{"nodes":[{"pos":[66,111],"content":"Use this method to renew a Windows Store key.","needQuote":true,"needEscape":true,"nodes":[{"content":"Use this method to renew a Windows Store key.","pos":[0,45]}]},{"pos":[119,147],"content":"Renew a Windows Store ID key","needQuote":true,"needEscape":true,"nodes":[{"content":"Renew a Windows Store ID key","pos":[0,28]}]},{"content":"Renew a Windows Store ID key","pos":[155,183]},{"content":"\\[ Updated for UWP apps on Windows 10.","pos":[186,224]},{"content":"For Windows 8.x articles, see the <bpt id=\"p1\">[</bpt>archive<ept id=\"p1\">](http://go.microsoft.com/fwlink/p/?linkid=619132)</ept> \\]","pos":[225,320],"source":" For Windows 8.x articles, see the [archive](http://go.microsoft.com/fwlink/p/?linkid=619132) \\]"},{"content":"Use this method to renew a Windows Store key.","pos":[322,367]},{"content":"When you generate a Windows Store ID key by calling the <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>GetCustomerCollectionsIdAsync<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/mt608674)</ept> or <bpt id=\"p3\">[</bpt><bpt id=\"p4\">**</bpt>GetCustomerPurchaseIdAsync<ept id=\"p4\">**</ept><ept id=\"p3\">](https://msdn.microsoft.com/library/windows/apps/mt608675)</ept> method, the key is valid for 90 days.","pos":[368,649],"source":" When you generate a Windows Store ID key by calling the [**GetCustomerCollectionsIdAsync**](https://msdn.microsoft.com/library/windows/apps/mt608674) or [**GetCustomerPurchaseIdAsync**](https://msdn.microsoft.com/library/windows/apps/mt608675) method, the key is valid for 90 days."},{"content":"After the key expires, you can use the expired key to renegotiate a new key by using this method.","pos":[650,747]},{"content":"Prerequisites","pos":[752,765]},{"content":"To use this method, you will need:","pos":[768,802]},{"pos":[808,907],"content":"An Azure AD access token that was created with the <bpt id=\"p1\">**</bpt>https://onestore.microsoft.com<ept id=\"p1\">**</ept> audience URI.","source":"An Azure AD access token that was created with the **https://onestore.microsoft.com** audience URI."},{"pos":[912,1207],"content":"An expired Windows Store ID key that was generated by calling the <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>GetCustomerCollectionsIdAsync<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/mt608674)</ept> or <bpt id=\"p3\">[</bpt><bpt id=\"p4\">**</bpt>GetCustomerPurchaseIdAsync<ept id=\"p4\">**</ept><ept id=\"p3\">](https://msdn.microsoft.com/library/windows/apps/mt608675)</ept> method from client-side code in your app.","source":"An expired Windows Store ID key that was generated by calling the [**GetCustomerCollectionsIdAsync**](https://msdn.microsoft.com/library/windows/apps/mt608674) or [**GetCustomerPurchaseIdAsync**](https://msdn.microsoft.com/library/windows/apps/mt608675) method from client-side code in your app."},{"pos":[1209,1319],"content":"For more information, see <bpt id=\"p1\">[</bpt>View and grant products from a service<ept id=\"p1\">](view-and-grant-products-from-a-service.md)</ept>.","source":"For more information, see [View and grant products from a service](view-and-grant-products-from-a-service.md)."},{"content":"Request","pos":[1324,1331]},{"content":"Request syntax","pos":[1338,1352]},{"content":"Key type","pos":[1356,1364]},{"content":"Method","pos":[1370,1376]},{"content":"Request URI","pos":[1379,1390]},{"content":"Collections","pos":[1524,1535]},{"content":"POST","pos":[1538,1542]},{"content":"https://collections.mp.microsoft.com/v6.0/b2b/keys/renew","pos":[1547,1603]},{"content":"Purchase","pos":[1608,1616]},{"content":"POST","pos":[1622,1626]},{"content":"https://purchase.mp.microsoft.com/v6.0/b2b/keys/renew","pos":[1631,1684]},{"content":"Request header","pos":[1698,1712]},{"content":"Header","pos":[1716,1722]},{"content":"Type","pos":[1733,1737]},{"content":"Description","pos":[1742,1753]},{"content":"Host","pos":[1980,1984]},{"content":"string","pos":[1997,2003]},{"pos":[2006,2097],"content":"Must be set to the value <bpt id=\"p1\">**</bpt>collections.mp.microsoft.com<ept id=\"p1\">**</ept> or <bpt id=\"p2\">**</bpt>purchase.mp.microsoft.com<ept id=\"p2\">**</ept>.","source":"Must be set to the value **collections.mp.microsoft.com** or **purchase.mp.microsoft.com**."},{"content":"Content-Length","pos":[2112,2126]},{"content":"number","pos":[2129,2135]},{"content":"The length of the request body.","pos":[2138,2169]},{"content":"Content-Type","pos":[2244,2256]},{"content":"string","pos":[2261,2267]},{"content":"Specifies the request and response type.","pos":[2270,2310]},{"content":"Currently, the only supported value is <bpt id=\"p1\">**</bpt>application/json<ept id=\"p1\">**</ept>.","pos":[2311,2371],"source":" Currently, the only supported value is **application/json**."},{"content":"Request body","pos":[2382,2394]},{"content":"Parameter","pos":[2398,2407]},{"content":"Type","pos":[2414,2418]},{"content":"Description","pos":[2423,2434]},{"content":"Required","pos":[2459,2467]},{"content":"serviceTicket","pos":[2546,2559]},{"content":"string","pos":[2562,2568]},{"content":"The Azure AD access token.","pos":[2571,2597]},{"content":"Yes","pos":[2607,2610]},{"content":"key","pos":[2620,2623]},{"content":"string","pos":[2636,2642]},{"content":"The expired Windows Store ID key.","pos":[2645,2678]},{"content":"No","pos":[2681,2683]},{"content":"Request example","pos":[2700,2715]},{"content":"Response","pos":[2979,2987]},{"content":"Response body","pos":[2994,3007]},{"content":"Parameter","pos":[3011,3020]},{"content":"Type","pos":[3023,3027]},{"content":"Description","pos":[3032,3043]},{"content":"Required","pos":[3153,3161]},{"content":"key","pos":[3321,3324]},{"content":"string","pos":[3333,3339]},{"content":"The refreshed Windows Store key that can be used in future calls to the Windows Store collections API or purchase API.","pos":[3342,3460]},{"content":"No","pos":[3463,3465]},{"content":"Response example","pos":[3482,3498]},{"content":"Error codes","pos":[3802,3813]},{"content":"Code","pos":[3818,3822]},{"content":"Error","pos":[3825,3830]},{"content":"Inner error code","pos":[3840,3856]},{"content":"Description","pos":[3869,3880]},{"content":"401","pos":[4292,4295]},{"content":"Unauthorized","pos":[4299,4311]},{"content":"AuthenticationTokenInvalid","pos":[4314,4340]},{"content":"The Azure AD access token is invalid.","pos":[4343,4380]},{"content":"In some cases the details of the ServiceError will contain more information, such as when the token is expired or the <bpt id=\"p1\">*</bpt>appid<ept id=\"p1\">*</ept> claim is missing.","pos":[4381,4524],"source":" In some cases the details of the ServiceError will contain more information, such as when the token is expired or the *appid* claim is missing."},{"content":"401","pos":[4529,4532]},{"content":"Unauthorized","pos":[4536,4548]},{"content":"InconsistentClientId","pos":[4551,4571]},{"pos":[4580,4693],"content":"The <bpt id=\"p1\">*</bpt>clientId<ept id=\"p1\">*</ept> claim in the Windows Store ID key and the <bpt id=\"p2\">*</bpt>appid<ept id=\"p2\">*</ept> claim in the Azure AD access token do not match.","source":"The *clientId* claim in the Windows Store ID key and the *appid* claim in the Azure AD access token do not match."},{"content":"Related topics","pos":[4771,4785]},{"content":"View and grant products from a service","pos":[4791,4829]},{"content":"Query for products","pos":[4877,4895]},{"content":"Report consumable products as fulfilled","pos":[4923,4962]},{"content":"Grant free products","pos":[5011,5030]}],"content":"---\nms.assetid: 3569C505-8D8C-4D85-B383-4839F13B2466\ndescription: Use this method to renew a Windows Store key.\ntitle: Renew a Windows Store ID key\n---\n\n# Renew a Windows Store ID key\n\n\n\\[ Updated for UWP apps on Windows 10. For Windows 8.x articles, see the [archive](http://go.microsoft.com/fwlink/p/?linkid=619132) \\]\n\nUse this method to renew a Windows Store key. When you generate a Windows Store ID key by calling the [**GetCustomerCollectionsIdAsync**](https://msdn.microsoft.com/library/windows/apps/mt608674) or [**GetCustomerPurchaseIdAsync**](https://msdn.microsoft.com/library/windows/apps/mt608675) method, the key is valid for 90 days. After the key expires, you can use the expired key to renegotiate a new key by using this method.\n\n## Prerequisites\n\n\nTo use this method, you will need:\n\n-   An Azure AD access token that was created with the **https://onestore.microsoft.com** audience URI.\n-   An expired Windows Store ID key that was generated by calling the [**GetCustomerCollectionsIdAsync**](https://msdn.microsoft.com/library/windows/apps/mt608674) or [**GetCustomerPurchaseIdAsync**](https://msdn.microsoft.com/library/windows/apps/mt608675) method from client-side code in your app.\n\nFor more information, see [View and grant products from a service](view-and-grant-products-from-a-service.md).\n\n## Request\n\n\n### Request syntax\n\n| Key type    | Method | Request URI                                              |\n|-------------|--------|----------------------------------------------------------|\n| Collections | POST   | https://collections.mp.microsoft.com/v6.0/b2b/keys/renew |\n| Purchase    | POST   | https://purchase.mp.microsoft.com/v6.0/b2b/keys/renew    |\n\n \n\n### Request header\n\n| Header         | Type   | Description                                                                                           |\n|----------------|--------|-------------------------------------------------------------------------------------------------------|\n| Host           | string | Must be set to the value **collections.mp.microsoft.com** or **purchase.mp.microsoft.com**.           |\n| Content-Length | number | The length of the request body.                                                                       |\n| Content-Type   | string | Specifies the request and response type. Currently, the only supported value is **application/json**. |\n\n \n\n### Request body\n\n| Parameter     | Type   | Description                       | Required |\n|---------------|--------|-----------------------------------|----------|\n| serviceTicket | string | The Azure AD access token.        | Yes      |\n| key           | string | The expired Windows Store ID key. | No       |\n\n \n\n### Request example\n\n```\nPOST https://collections.mp.microsoft.com/v6.0/b2b/keys/renew HTTP/1.1\nContent-Length: 2774\nContent-Type: application/json\nHost: collections.mp.microsoft.com\n\n{ \n    \"serviceTicket\": \"eyJ0eXAiOiJKV1QiLCJhb….\",\n    \"Key\": \"eyJ0eXAiOiJKV1QiLCJhbG….\"\n}\n```\n\n## Response\n\n\n### Response body\n\n| Parameter | Type   | Description                                                                                                            | Required |\n|-----------|--------|------------------------------------------------------------------------------------------------------------------------|----------|\n| key       | string | The refreshed Windows Store key that can be used in future calls to the Windows Store collections API or purchase API. | No       |\n\n \n\n### Response example\n\n```\nHTTP/1.1 200 OK\nContent-Length: 1646\nContent-Type: application/json\nMS-CorrelationId: bfebe80c-ff89-4c4b-8897-67b45b916e47\nMS-RequestId: 1b5fa630-d672-4971-b2c0-3713f4ea6c85\nMS-CV: xu2HW6SrSkyfHyFh.0.0\nMS-ServerId: 030011428\nDate: Tue, 13 Sep 2015 07:31:12 GMT\n\n{\n    \"key\":\"eyJ0eXAi…..\"\n}\n```\n\n## Error codes\n\n\n| Code | Error        | Inner error code           | Description                                                                                                                                                                           |\n|------|--------------|----------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| 401  | Unauthorized | AuthenticationTokenInvalid | The Azure AD access token is invalid. In some cases the details of the ServiceError will contain more information, such as when the token is expired or the *appid* claim is missing. |\n| 401  | Unauthorized | InconsistentClientId       | The *clientId* claim in the Windows Store ID key and the *appid* claim in the Azure AD access token do not match.                                                                     |\n\n \n\n## Related topics\n\n\n* [View and grant products from a service](view-and-grant-products-from-a-service.md)\n* [Query for products](query-for-products.md)\n* [Report consumable products as fulfilled](report-consumable-products-as-fulfilled.md)\n* [Grant free products](grant-free-products.md)\n\n"}