{"nodes":[{"pos":[11,33],"content":"Extend the game sample","needQuote":true,"needEscape":true,"nodes":[{"content":"Extend the game sample","pos":[0,22]}]},{"pos":[47,173],"content":"Congratulations! At this point, you understand the key components of a basic Universal Windows Platform (UWP) DirectX 3D game.","needQuote":true,"needEscape":true,"nodes":[{"content":"Congratulations! At this point, you understand the key components of a basic Universal Windows Platform (UWP) DirectX 3D game.","pos":[0,126],"nodes":[{"content":"Congratulations!","pos":[0,16]},{"content":"At this point, you understand the key components of a basic Universal Windows Platform (UWP) DirectX 3D game.","pos":[17,126]}]}]},{"content":"DirectX, XAML","pos":[235,248]},{"content":"Extend the game sample","pos":[258,280]},{"content":"\\[ Updated for UWP apps on Windows 10.","pos":[283,321]},{"content":"For Windows 8.x articles, see the <bpt id=\"p1\">[</bpt>archive<ept id=\"p1\">](http://go.microsoft.com/fwlink/p/?linkid=619132)</ept> \\]","pos":[322,417],"source":" For Windows 8.x articles, see the [archive](http://go.microsoft.com/fwlink/p/?linkid=619132) \\]"},{"content":"Congratulations!","pos":[419,435]},{"content":"At this point, you understand the key components of a basic Universal Windows Platform (UWP) DirectX 3D game.","pos":[436,545]},{"content":"You can set up the framework for a game, including the view provider and rendering pipeline, and implement a basic game loop.","pos":[546,671]},{"content":"You can also create a basic user interface overlay, and incorporate sounds and controls.","pos":[672,760]},{"content":"You're on your way to creating a game of your own, and here are some resources to further your knowledge of DirectX game development.","pos":[761,894]},{"content":"DirectX Graphics and Gaming","pos":[901,928]},{"content":"Direct3D 11 Overview","pos":[996,1016]},{"content":"Direct3D 11 Reference","pos":[1084,1105]},{"content":"Extending the game sample: using XAML for the overlay","pos":[1172,1225]},{"content":"One alternative that we didn't discuss in depth is the use of XAML instead of Direct2D for the overlay.","pos":[1228,1331]},{"content":"XAML has many benefits over Direct2D for drawing user interface elements, and the most important one is that it makes incorporating the Windows 10 look and feel into your DirectX game more convenient.","pos":[1332,1532]},{"content":"Many of the common elements, styles, and behaviors that define a UWP app are tightly integrated into the XAML model, making it far less work for a game developer to implement.","pos":[1533,1708]},{"content":"If your own game design has a complicated user interface, consider using XAML instead of Direct2D.","pos":[1709,1807]},{"content":"So, what is the difference between the implementation of a user interface with Direct2D, and implementing that same interface with XAML?","pos":[1809,1945]},{"content":"You define the overlay in a XAML file, \\*.xaml, rather than as a collection of Direct2D primitives and DirectWrite strings manually placed and written to a Direct2D target buffer.","pos":[1951,2130]},{"content":"If you understand XAML, you'll find it much easier to create and configure more complicated overlays, especially if you use Visual Studio's XAML editing tools.","pos":[2131,2290]},{"content":"The user interface elements come from standardized elements that are part of the Windows Runtime XAML APIs, including <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>Windows::UI::Xaml<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/br209045)</ept> and <bpt id=\"p3\">[</bpt><bpt id=\"p4\">**</bpt>Windows::UI::Xaml::Controls<ept id=\"p4\">**</ept><ept id=\"p3\">](https://msdn.microsoft.com/library/windows/apps/br227716)</ept>.","pos":[2295,2591],"source":"The user interface elements come from standardized elements that are part of the Windows Runtime XAML APIs, including [**Windows::UI::Xaml**](https://msdn.microsoft.com/library/windows/apps/br209045) and [**Windows::UI::Xaml::Controls**](https://msdn.microsoft.com/library/windows/apps/br227716)."},{"content":"The code that handles the behavior of the XAML user interface elements is defined in a codebehind file, Main.xaml.cpp.","pos":[2592,2710]},{"content":"XAML, as a tightly integrated Windows Runtime component, naturally handles resize and view state change events, transforming the overlay accordingly, so you don't have to manually specify how to redraw the overlay's components.","pos":[2715,2942]},{"content":"The swap chain is not directly attached to a <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>Windows::UI::Core::CoreWindow<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/br208225)</ept> object, or at least you don't have to do this.","pos":[2947,3132],"source":"The swap chain is not directly attached to a [**Windows::UI::Core::CoreWindow**](https://msdn.microsoft.com/library/windows/apps/br208225) object, or at least you don't have to do this."},{"content":"Instead, a DirectX app that incorporates XAML associates a swap chain when a new <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>SwapChainBackgroundPanel<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/hh702626)</ept> object is constructed.","pos":[3133,3325],"source":" Instead, a DirectX app that incorporates XAML associates a swap chain when a new [**SwapChainBackgroundPanel**](https://msdn.microsoft.com/library/windows/apps/hh702626) object is constructed."},{"content":"The <bpt id=\"p1\">**</bpt>SwapChainBackgroundPanel<ept id=\"p1\">**</ept> object is set as the <bpt id=\"p2\">[</bpt><bpt id=\"p3\">**</bpt>Content<ept id=\"p3\">**</ept><ept id=\"p2\">](https://msdn.microsoft.com/library/windows/apps/br209051)</ept> property of the current window object created at launch by the app singleton, and the window is passed to <bpt id=\"p4\">**</bpt>Simple3DGame::Initialize<ept id=\"p4\">**</ept> as a <bpt id=\"p5\">**</bpt>CoreWindow<ept id=\"p5\">**</ept> object.","pos":[3326,3614],"source":" The **SwapChainBackgroundPanel** object is set as the [**Content**](https://msdn.microsoft.com/library/windows/apps/br209051) property of the current window object created at launch by the app singleton, and the window is passed to **Simple3DGame::Initialize** as a **CoreWindow** object."},{"pos":[3616,3710],"content":"You declare the XAML for the <bpt id=\"p1\">**</bpt>SwapChainBackgroundPanel<ept id=\"p1\">**</ept> like this in <bpt id=\"p2\">**</bpt>Main.app.xaml<ept id=\"p2\">**</ept> file:","source":"You declare the XAML for the **SwapChainBackgroundPanel** like this in **Main.app.xaml** file:"},{"content":"To attach the configured swap chain to the <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>SwapChainBackgroundPanel<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/hh702626)</ept> panel instance defined by your XAML, you must obtain a pointer to the underlying native <bpt id=\"p3\">[</bpt><bpt id=\"p4\">**</bpt>ISwapChainBackgroundPanel<ept id=\"p4\">**</ept><ept id=\"p3\">](https://msdn.microsoft.com/library/windows/desktop/hh848326)</ept> interface implementation and call <bpt id=\"p5\">[</bpt><bpt id=\"p6\">**</bpt>SetSwapChain<ept id=\"p6\">**</ept><ept id=\"p5\">](https://msdn.microsoft.com/library/windows/desktop/hh848327)</ept> on it, passing it your configured swap chain.","pos":[7837,8309],"source":"To attach the configured swap chain to the [**SwapChainBackgroundPanel**](https://msdn.microsoft.com/library/windows/apps/hh702626) panel instance defined by your XAML, you must obtain a pointer to the underlying native [**ISwapChainBackgroundPanel**](https://msdn.microsoft.com/library/windows/desktop/hh848326) interface implementation and call [**SetSwapChain**](https://msdn.microsoft.com/library/windows/desktop/hh848327) on it, passing it your configured swap chain."},{"content":"From a method derived from <bpt id=\"p1\">**</bpt>DirectXBase::CreateWindowSizeDependentResources<ept id=\"p1\">**</ept> specifically for DirectX/XAML interop:","pos":[8310,8427],"source":" From a method derived from **DirectXBase::CreateWindowSizeDependentResources** specifically for DirectX/XAML interop:"},{"pos":[9783,9906],"content":"For more info about this process, see <bpt id=\"p1\">[</bpt>DirectX and XAML interop<ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/hh825871)</ept>.","source":"For more info about this process, see [DirectX and XAML interop](https://msdn.microsoft.com/library/windows/apps/hh825871)."},{"content":"Complete code for the XAML game sample XAML codebehinds","pos":[9911,9966]},{"content":"Here's the complete code for the codebehinds found in the XAML version of the Direct3D 11.1 shooting game sample.","pos":[9969,10082]},{"pos":[10084,10331],"content":"(Unlike the version of the game sample discussed in the rest of these topics, the XAML version defines its framework in the <bpt id=\"p1\">**</bpt>App.xaml.cpp<ept id=\"p1\">**</ept> and <bpt id=\"p2\">**</bpt>MainPage.xaml.cpp<ept id=\"p2\">**</ept> files, instead of <bpt id=\"p3\">**</bpt>DirectXApp.cpp<ept id=\"p3\">**</ept> and <bpt id=\"p4\">**</bpt>GameInfoOverlay.cpp<ept id=\"p4\">**</ept>, respectively.)","source":"(Unlike the version of the game sample discussed in the rest of these topics, the XAML version defines its framework in the **App.xaml.cpp** and **MainPage.xaml.cpp** files, instead of **DirectXApp.cpp** and **GameInfoOverlay.cpp**, respectively.)"},{"content":"App.xaml.h","pos":[10333,10343]},{"content":"App.xaml.cpp","pos":[14027,14039]},{"content":"MainPage.xaml","pos":[33266,33279]},{"content":"MainPage.xaml.h","pos":[50447,50462]},{"content":"Main.xaml.cpp codebehind","pos":[52057,52081]},{"pos":[60159,60330],"content":"To download a version of the sample game that uses XAML for the overlay, go to the <bpt id=\"p1\">[</bpt>Direct3D shooting game sample (XAML)<ept id=\"p1\">](http://go.microsoft.com/fwlink/p/?linkid=241418)</ept>.","source":"To download a version of the sample game that uses XAML for the overlay, go to the [Direct3D shooting game sample (XAML)](http://go.microsoft.com/fwlink/p/?linkid=241418)."}],"content":"---\ntitle: Extend the game sample\ndescription: Congratulations! At this point, you understand the key components of a basic Universal Windows Platform (UWP) DirectX 3D game.\nms.assetid: a1432c45-569e-7ecd-4098-f5ad6da9327e\nkeywords: [\"DirectX, XAML\"]\n---\n\n# Extend the game sample\n\n\n\\[ Updated for UWP apps on Windows 10. For Windows 8.x articles, see the [archive](http://go.microsoft.com/fwlink/p/?linkid=619132) \\]\n\nCongratulations! At this point, you understand the key components of a basic Universal Windows Platform (UWP) DirectX 3D game. You can set up the framework for a game, including the view provider and rendering pipeline, and implement a basic game loop. You can also create a basic user interface overlay, and incorporate sounds and controls. You're on your way to creating a game of your own, and here are some resources to further your knowledge of DirectX game development.\n\n-   [DirectX Graphics and Gaming](https://msdn.microsoft.com/library/windows/desktop/ee663274)\n-   [Direct3D 11 Overview](https://msdn.microsoft.com/library/windows/desktop/ff476345)\n-   [Direct3D 11 Reference](https://msdn.microsoft.com/library/windows/desktop/ff476147)\n\n## Extending the game sample: using XAML for the overlay\n\n\nOne alternative that we didn't discuss in depth is the use of XAML instead of Direct2D for the overlay. XAML has many benefits over Direct2D for drawing user interface elements, and the most important one is that it makes incorporating the Windows 10 look and feel into your DirectX game more convenient. Many of the common elements, styles, and behaviors that define a UWP app are tightly integrated into the XAML model, making it far less work for a game developer to implement. If your own game design has a complicated user interface, consider using XAML instead of Direct2D.\n\nSo, what is the difference between the implementation of a user interface with Direct2D, and implementing that same interface with XAML?\n\n-   You define the overlay in a XAML file, \\*.xaml, rather than as a collection of Direct2D primitives and DirectWrite strings manually placed and written to a Direct2D target buffer. If you understand XAML, you'll find it much easier to create and configure more complicated overlays, especially if you use Visual Studio's XAML editing tools.\n-   The user interface elements come from standardized elements that are part of the Windows Runtime XAML APIs, including [**Windows::UI::Xaml**](https://msdn.microsoft.com/library/windows/apps/br209045) and [**Windows::UI::Xaml::Controls**](https://msdn.microsoft.com/library/windows/apps/br227716). The code that handles the behavior of the XAML user interface elements is defined in a codebehind file, Main.xaml.cpp.\n-   XAML, as a tightly integrated Windows Runtime component, naturally handles resize and view state change events, transforming the overlay accordingly, so you don't have to manually specify how to redraw the overlay's components.\n-   The swap chain is not directly attached to a [**Windows::UI::Core::CoreWindow**](https://msdn.microsoft.com/library/windows/apps/br208225) object, or at least you don't have to do this. Instead, a DirectX app that incorporates XAML associates a swap chain when a new [**SwapChainBackgroundPanel**](https://msdn.microsoft.com/library/windows/apps/hh702626) object is constructed. The **SwapChainBackgroundPanel** object is set as the [**Content**](https://msdn.microsoft.com/library/windows/apps/br209051) property of the current window object created at launch by the app singleton, and the window is passed to **Simple3DGame::Initialize** as a **CoreWindow** object.\n\nYou declare the XAML for the **SwapChainBackgroundPanel** like this in **Main.app.xaml** file:\n\n```xaml\n<Page\n    x:Name=\"DXMainPage\"\n    x:Class=\"Simple3DGameXaml.MainPage\"\n    xmlns=\"http://schemas.microsoft.com/winfx/2006/xaml/presentation\"\n    xmlns:x=\"http://schemas.microsoft.com/winfx/2006/xaml\"\n    xmlns:d=\"http://schemas.microsoft.com/expression/blend/2008\"\n    xmlns:mc=\"http://schemas.openxmlformats.org/markup-compatibility/2006\"\n    mc:Ignorable=\"d\"\n    d:DesignWidth=\"1366\"\n    d:DesignHeight=\"768\">\n\n    <SwapChainBackgroundPanel x:Name=\"DXSwapChainPanel\">\n\n    <!-- ... XAML user controls and elements -->\n\n    </SwapChainBackgroundPanel>\n</Page>\n```\n\n```cpp\nvoid App::OnLaunched(LaunchActivatedEventArgs^ /* args */)\n{\n    Suspending += ref new SuspendingEventHandler(this, &App::OnSuspending);\n    Resuming += ref new EventHandler<Object^>(this, &App::OnResuming);\n\n    m_mainPage = ref new MainPage();\n    m_mainPage->SetApp(this);\n\n    Window::Current->Content = m_mainPage;\n    Window::Current->Activated += ref new WindowActivatedEventHandler(this, &App::OnWindowActivationChanged);\n    Window::Current->Activate();\n\n    m_controller = ref new MoveLookController();\n    m_renderer = ref new GameRenderer();\n    m_game = ref new Simple3DGame();\n\n    auto window = Window::Current->CoreWindow;\n\n    window->SizeChanged +=\n        ref new TypedEventHandler<CoreWindow^, WindowSizeChangedEventArgs^>(this, &App::OnWindowSizeChanged);\n\n    window->VisibilityChanged +=\n        ref new TypedEventHandler<CoreWindow^, VisibilityChangedEventArgs^>(this, &App::OnVisibilityChanged);\n\n    DisplayProperties::LogicalDpiChanged +=\n        ref new DisplayPropertiesEventHandler(this, &App::OnLogicalDpiChanged);\n\n    m_controller->Initialize(window);\n    m_controller->AutoFire(false);\n\n    m_controller->SetMoveRect(\n        XMFLOAT2(0.0f, window->Bounds.Height - GameConstants::TouchRectangleSize),\n        XMFLOAT2(GameConstants::TouchRectangleSize, window->Bounds.Height)\n        );\n    m_controller->SetFireRect(\n        XMFLOAT2(window->Bounds.Width - GameConstants::TouchRectangleSize, window->Bounds.Height - GameConstants::TouchRectangleSize),\n        XMFLOAT2(window->Bounds.Width, window->Bounds.Height)\n        );\n\n    m_renderer->Initialize(window, m_mainPage->GetSwapChainBackgroundPanel(), DisplayProperties::LogicalDpi);\n    SetGameInfoOverlay(GameInfoOverlayState::Loading);\n    SetAction(GameInfoOverlayCommand::None);\n    ShowGameInfoOverlay();\n\n    m_onRenderingEventToken = CompositionTarget::Rendering::add(ref new EventHandler<Object^>(this, &App::OnRendering));\n    m_renderNeeded = true;\n\n    create_task([this]()\n    {\n        // Asynchronously initialize the game class and load the renderer device resources.\n        // This way, the game gets to its main loop faster \n        // and in parallel all the necessary resources are loaded on other threads.\n        m_game->Initialize(m_controller, m_renderer);\n\n        return m_renderer->CreateGameDeviceResourcesAsync(m_game);\n\n    }).then([this]()\n    {\n        // The finalize code needs to run in the same thread context\n        // as the m_renderer object was created because the D3D device context\n        // can be accessed only on a single thread.\n        m_renderer->FinalizeCreateGameDeviceResources();\n\n        InitializeLicense();\n        InitializeGameState();\n\n        if (m_updateState == UpdateEngineState::WaitingForResources)\n        {\n            // In the middle of a game, so spin up the async task to load the level.\n            create_task([this]()\n            {\n                return m_game->LoadLevelAsync();\n\n            }).then([this]()\n            {\n                // The m_game object may need to deal with D3D device context work so\n                // again the finalize code needs to run in the same thread\n                // context as the m_renderer object was created because the D3D \n                // device context can  be accessed only on a single thread.\n                m_game->FinalizeLoadLevel();\n                m_updateState = UpdateEngineState::ResourcesLoaded;\n\n            }, task_continuation_context::use_current());\n        }\n    }, task_continuation_context::use_current());\n}\n```\n\nTo attach the configured swap chain to the [**SwapChainBackgroundPanel**](https://msdn.microsoft.com/library/windows/apps/hh702626) panel instance defined by your XAML, you must obtain a pointer to the underlying native [**ISwapChainBackgroundPanel**](https://msdn.microsoft.com/library/windows/desktop/hh848326) interface implementation and call [**SetSwapChain**](https://msdn.microsoft.com/library/windows/desktop/hh848327) on it, passing it your configured swap chain. From a method derived from **DirectXBase::CreateWindowSizeDependentResources** specifically for DirectX/XAML interop:\n\n```cpp\n        ComPtr<IDXGIDevice1> dxgiDevice;\n        DX::ThrowIfFailed(\n            m_d3dDevice.As(&dxgiDevice)\n            );\n\n        // Next, get the associated adapter from the DXGI Device.\n        ComPtr<IDXGIAdapter> dxgiAdapter;\n        DX::ThrowIfFailed(\n            dxgiDevice->GetAdapter(&dxgiAdapter)\n            );\n\n        // Next, get the parent factory from the DXGI adapter.\n        ComPtr<IDXGIFactory2> dxgiFactory;\n        DX::ThrowIfFailed(\n            dxgiAdapter->GetParent(IID_PPV_ARGS(&dxgiFactory))\n            );\n\n        // Create the swap chain and then associate it with the SwapChainBackgroundPanel.\n        DX::ThrowIfFailed(\n            dxgiFactory->CreateSwapChainForComposition(\n                m_d3dDevice.Get(),\n                &swapChainDesc,\n                nullptr,\n                &m_swapChain\n                )\n            );\n\n        ComPtr<ISwapChainBackgroundPanelNative> dxRootPanelAsNative;\n\n        // Set the swap chain on the SwapChainBackgroundPanel.\n        reinterpret_cast<IUnknown*>(m_swapChainPanel)->QueryInterface(__uuidof(ISwapChainBackgroundPanelNative), (void**)&dxRootPanelAsNative);\n\n        DX::ThrowIfFailed(\n            dxRootPanelAsNative->SetSwapChain(m_swapChain.Get())\n            );\n\n        DX::ThrowIfFailed(\n            dxgiDevice->SetMaximumFrameLatency(1)\n            );\n```\n\nFor more info about this process, see [DirectX and XAML interop](https://msdn.microsoft.com/library/windows/apps/hh825871).\n\n## Complete code for the XAML game sample XAML codebehinds\n\n\nHere's the complete code for the codebehinds found in the XAML version of the Direct3D 11.1 shooting game sample.\n\n(Unlike the version of the game sample discussed in the rest of these topics, the XAML version defines its framework in the **App.xaml.cpp** and **MainPage.xaml.cpp** files, instead of **DirectXApp.cpp** and **GameInfoOverlay.cpp**, respectively.)\n\nApp.xaml.h\n\n```cpp\n//// THIS CODE AND INFORMATION IS PROVIDED \"AS IS\" WITHOUT WARRANTY OF\n//// ANY KIND, EITHER EXPRESSED OR IMPLIED, INCLUDING BUT NOT LIMITED TO\n//// THE IMPLIED WARRANTIES OF MERCHANTABILITY AND/OR FITNESS FOR A\n//// PARTICULAR PURPOSE.\n////\n//// Copyright (c) Microsoft Corporation. All rights reserved\n\n#pragma once\n\n#include \"MainPage.xaml.h\"\n#include \"Simple3DGame.h\"\n#include \"App.g.h\"\n\nnamespace Simple3DGameXaml\n{\n    private enum class UpdateEngineState\n    {\n        Uninitialized,\n        WaitingForResources,\n        WaitingForPress,\n        Dynamics,\n        Snapped,\n        Suspended,\n        Deactivated,\n    };\n\n    private enum class PressResultState\n    {\n        LoadGame,\n        PlayLevel,\n        ContinueLevel,\n    };\n\n    private enum class GameInfoOverlayState\n    {\n        GameStats,\n        GameOverExpired,\n        GameOverCompleted,\n        LevelStart,\n        Pause,\n        Snapped,\n    };\n\n    public ref class App sealed\n    {\n    public:\n        App();\n\n        virtual void OnLaunched(Windows::ApplicationModel::Activation::LaunchActivatedEventArgs^ pArgs);\n\n        void PauseRequested() { if (m_updateState == UpdateEngineState::Dynamics) m_pauseRequested = true; };\n        void PressComplete()  { if (m_updateState == UpdateEngineState::WaitingForPress) m_pressComplete = true; };\n        void ResetGame();\n\n    private:\n        ~App();\n\n        void OnSuspending(\n            _In_ Platform::Object^ sender, \n            _In_ Windows::ApplicationModel::SuspendingEventArgs^ args\n            );\n        void OnResuming(\n            _In_ Platform::Object^ sender,\n            _In_ Platform::Object^ args\n            );\n\n        void OnViewStateChanged(\n            _In_ Windows::UI::ViewManagement::ApplicationView^ view,\n            _In_ Windows::UI::ViewManagement::ApplicationViewStateChangedEventArgs^ args\n            );\n\n        void OnWindowActivationChanged(\n            _In_ Platform::Object^ sender,\n            _In_ Windows::UI::Core::WindowActivatedEventArgs^ args\n            );\n\n        void OnWindowSizeChanged(\n            _In_ Windows::UI::Core::CoreWindow^ sender,\n            _In_ Windows::UI::Core::WindowSizeChangedEventArgs^ args\n            );\n\n        void OnLogicalDpiChanged(\n            _In_ Platform::Object^ sender\n            );\n\n        void OnRendering(\n            _In_ Object^ sender, \n            _In_ Object^ args\n            );\n\n        void InitializeGameState();\n        void Update();\n        void SetGameInfoOverlay(GameInfoOverlayState state);\n        void SetAction (GameInfoOverlayCommand command);\n        void ShowGameInfoOverlay();\n        void HideGameInfoOverlay();\n        void SetSnapped();\n        void HideSnapped();\n\n        Windows::Foundation::EventRegistrationToken         m_eventToken;\n        bool                                                m_pauseRequested;\n        bool                                                m_pressComplete;\n        bool                                                m_renderNeeded;\n        bool                                                m_haveFocus;\n\n        MainPage^                                           m_mainPage;\n        Simple3DGame^                                       m_game;\n        MoveLookController^                                 m_controller;           // Controller to handle user input\n\n        UpdateEngineState                                   m_updateState;\n        UpdateEngineState                                   m_updateStateNext;\n        PressResultState                                    m_pressResult;\n        GameInfoOverlayState                                m_gameInfoOverlayState;\n    };\n}\n```\n\nApp.xaml.cpp\n\n```cpp\n//// THIS CODE AND INFORMATION IS PROVIDED \"AS IS\" WITHOUT WARRANTY OF\n//// ANY KIND, EITHER EXPRESSED OR IMPLIED, INCLUDING BUT NOT LIMITED TO\n//// THE IMPLIED WARRANTIES OF MERCHANTABILITY AND/OR FITNESS FOR A\n//// PARTICULAR PURPOSE.\n////\n//// Copyright (c) Microsoft Corporation. All rights reserved\n\n#include \"pch.h\"\n#include \"App.xaml.h\"\n\nusing namespace Simple3DGameXaml;\n\nusing namespace Platform;\nusing namespace Windows::ApplicationModel::Activation;\nusing namespace Windows::ApplicationModel;\nusing namespace Windows::ApplicationModel::Core;\nusing namespace Windows::ApplicationModel::Activation;\nusing namespace Windows::UI::Core;\nusing namespace Windows::UI::ViewManagement;\nusing namespace Windows::Foundation;\nusing namespace Windows::Foundation::Collections;\nusing namespace Windows::UI::Xaml;\nusing namespace Windows::UI::Xaml::Controls;\nusing namespace Windows::UI::Xaml::Controls::Primitives;\nusing namespace Windows::UI::Xaml::Data;\nusing namespace Windows::UI::Xaml::Input;\nusing namespace Windows::UI::Xaml::Media;\nusing namespace Windows::UI::Xaml::Navigation;\nusing namespace Windows::UI::Xaml::Media::Animation;\nusing namespace Windows::Graphics::Display;\n\n//----------------------------------------------------------------------\nApp::App():\n    m_pauseRequested(false),\n    m_pressComplete(false),\n    m_renderNeeded(false),\n    m_haveFocus(false)\n{\n    InitializeComponent();\n}\n//----------------------------------------------------------------------\nApp::~App()\n{\n    CompositionTarget::Rendering::remove(m_eventToken);\n}\n//----------------------------------------------------------------------\nvoid App::OnLaunched(Windows::ApplicationModel::Activation::LaunchActivatedEventArgs^ args)\n{\n    m_mainPage = ref new MainPage(this);\n\n    Window::Current->Content = m_mainPage;\n    Window::Current->Activated += ref new WindowActivatedEventHandler(this, &App::OnWindowActivationChanged);\n    Window::Current->Activate();\n\n    // Create the game and pass to window and root panel for swap chain setup.\n    m_controller = ref new MoveLookController();\n    m_controller->Initialize(Window::Current->CoreWindow);\n    \n    m_game = ref new Simple3DGame();\n    m_game->Initialize(Window::Current->CoreWindow, m_mainPage, DisplayProperties::LogicalDpi, m_controller);\n\n    m_eventToken = CompositionTarget::Rendering::add(ref new EventHandler<Object^>(this, &App::OnRendering));\n\n    ApplicationView::GetForCurrentView()->ViewStateChanged +=\n        ref new TypedEventHandler<ApplicationView^, ApplicationViewStateChangedEventArgs^>(\n            this,\n            &App::OnViewStateChanged\n            );\n\n    CoreApplication::Suspending += ref new EventHandler<SuspendingEventArgs^>(this, &App::OnSuspending);\n    CoreApplication::Resuming += ref new EventHandler<Object^>(this, &App::OnResuming);\n\n    Window::Current->CoreWindow->SizeChanged += \n        ref new TypedEventHandler<CoreWindow^, WindowSizeChangedEventArgs^>(this, &App::OnWindowSizeChanged);\n\n    DisplayProperties::LogicalDpiChanged +=\n        ref new DisplayPropertiesEventHandler(this, &App::OnLogicalDpiChanged);\n\n    InitializeGameState();\n}\n//----------------------------------------------------------------------\nvoid App::OnRendering(\n    _In_ Object^ sender, \n    _In_ Object^ args\n    )\n{\n    Update();\n    if (m_updateState == UpdateEngineState::Dynamics  || m_renderNeeded)\n    {\n        m_game->Render();\n        m_renderNeeded = false;\n    }\n}\n//--------------------------------------------------------------------------------------\nvoid App::OnWindowSizeChanged(\n    _In_ CoreWindow^ sender,\n    _In_ WindowSizeChangedEventArgs^ args\n    )\n{\n    m_renderNeeded = true;\n    m_game->UpdateForWindowSizeChange();\n}\n//--------------------------------------------------------------------------------------\nvoid App::OnLogicalDpiChanged(\n    _In_ Object^ sender\n    )\n{\n    m_game->SetDpi(DisplayProperties::LogicalDpi);\n}\n//--------------------------------------------------------------------------------------\nvoid App::InitializeGameState()\n{\n    //\n    // Set up the initial state machine for handling the Game playing state.\n    //\n    if (m_game->GameActive() && m_game->LevelActive())\n    {\n        // The last time the game terminated it was in the middle \n        // of a level. \n        // We are waiting for the user to continue the game.\n        m_updateState = UpdateEngineState::WaitingForResources;\n        m_pressResult = PressResultState::ContinueLevel;\n        SetGameInfoOverlay(GameInfoOverlayState::Pause);\n    }\n    else if (!m_game->GameActive() && (m_game->HighScore().totalHits > 0))\n    {\n        // The last time the game terminated the game had been completed.\n        // Show the high score.\n        // We are waiting for the user to start a new game.\n        m_updateState = UpdateEngineState::WaitingForResources;\n        m_pressResult = PressResultState::LoadGame;\n        SetGameInfoOverlay(GameInfoOverlayState::GameStats);\n    }\n    else\n    {\n        // This is either the first time the game has run or\n        // the last time the game terminated the level was completed.\n        // We are waiting for the user to begin the next level.\n        m_updateState = UpdateEngineState::WaitingForResources;\n        m_pressResult = PressResultState::PlayLevel;\n        SetGameInfoOverlay(GameInfoOverlayState::LevelStart);\n    }\n    SetAction(GameInfoOverlayCommand::PleaseWait);\n    ShowGameInfoOverlay();\n}\n//--------------------------------------------------------------------------------------\nvoid App::Update()\n{\n    m_controller->Update();\n\n    switch (m_updateState)\n    {\n    case UpdateEngineState::WaitingForResources:\n        if (m_game->IsResourceLoadingComplete())\n        {\n            switch (m_pressResult)\n            {\n            case PressResultState::LoadGame:\n                SetGameInfoOverlay(GameInfoOverlayState::GameStats);\n                break;\n\n            case PressResultState::PlayLevel:\n                SetGameInfoOverlay(GameInfoOverlayState::LevelStart);\n                break;\n\n            case PressResultState::ContinueLevel:\n                SetGameInfoOverlay(GameInfoOverlayState::Pause);\n                break;\n            }\n            m_updateState = UpdateEngineState::WaitingForPress;\n            SetAction(GameInfoOverlayCommand::TapToContinue);\n            m_controller->WaitForPress();\n            ShowGameInfoOverlay();\n            m_renderNeeded = true;\n        }\n        break;\n\n    case UpdateEngineState::WaitingForPress:\n        if (m_controller->IsPressComplete() || m_pressComplete)\n        {\n            m_pressComplete = false;\n\n            switch (m_pressResult)\n            {\n            case PressResultState::LoadGame:\n                m_updateState = UpdateEngineState::WaitingForResources;\n                m_pressResult = PressResultState::PlayLevel;\n                m_controller->Active(false);\n                m_game->LoadGame();\n                SetAction(GameInfoOverlayCommand::PleaseWait);\n                SetGameInfoOverlay(GameInfoOverlayState::LevelStart);\n                ShowGameInfoOverlay();\n                break;\n\n            case PressResultState::PlayLevel:\n                m_updateState = UpdateEngineState::Dynamics;\n                HideGameInfoOverlay();\n                m_controller->Active(true);\n                m_game->StartLevel();\n                break;\n\n            case PressResultState::ContinueLevel:\n                m_updateState = UpdateEngineState::Dynamics;\n                HideGameInfoOverlay();\n                m_controller->Active(true);\n                m_game->ContinueGame();\n                break;\n            }\n        }\n        break;\n\n    case UpdateEngineState::Dynamics:\n        if (m_controller->IsPauseRequested() || m_pauseRequested)\n        {\n            m_pauseRequested = false;\n\n            m_game->PauseGame();\n            SetGameInfoOverlay(GameInfoOverlayState::Pause);\n            SetAction(GameInfoOverlayCommand::TapToContinue);\n            m_updateState = UpdateEngineState::WaitingForPress;\n            m_pressResult = PressResultState::ContinueLevel;\n            ShowGameInfoOverlay();\n        }\n        else \n        {\n            GameState runState = m_game->RunGame();\n            switch (runState)\n            {\n            case GameState::TimeExpired:\n                SetAction(GameInfoOverlayCommand::TapToContinue);\n                SetGameInfoOverlay(GameInfoOverlayState::GameOverExpired);\n                ShowGameInfoOverlay();\n                m_updateState = UpdateEngineState::WaitingForPress;\n                m_pressResult = PressResultState::LoadGame;\n                break;\n\n            case GameState::LevelComplete:\n                SetAction(GameInfoOverlayCommand::PleaseWait);\n                SetGameInfoOverlay(GameInfoOverlayState::LevelStart);\n                ShowGameInfoOverlay();\n                m_updateState = UpdateEngineState::WaitingForResources;\n                m_pressResult = PressResultState::PlayLevel;\n                break;\n\n            case GameState::GameComplete:\n                SetAction(GameInfoOverlayCommand::TapToContinue);\n                SetGameInfoOverlay(GameInfoOverlayState::GameOverCompleted);\n                ShowGameInfoOverlay();\n                m_updateState  = UpdateEngineState::WaitingForPress;\n                m_pressResult = PressResultState::LoadGame;\n                break;\n            }\n        }\n\n        if (m_updateState == UpdateEngineState::WaitingForPress)\n        {\n            // Transitioning state, so enable waiting for the press event\n            m_controller->WaitForPress();\n        }\n        break;\n    }\n}\n//--------------------------------------------------------------------------------------\nvoid App::OnWindowActivationChanged(\n    _In_ Platform::Object^ sender,\n    _In_ Windows::UI::Core::WindowActivatedEventArgs^ args\n    )\n{\n    if (args->WindowActivationState == CoreWindowActivationState::Deactivated)\n    {\n        m_haveFocus = false;\n\n        switch (m_updateState)\n        {\n        case UpdateEngineState::Dynamics:\n            // From Dynamic mode, when coming out of Deactivated rather than going directly back into game play\n            // go to the paused state waiting for user input to continue.\n            m_updateStateNext = UpdateEngineState::WaitingForPress;\n            m_pressResult = PressResultState::ContinueLevel;\n            SetGameInfoOverlay(GameInfoOverlayState::Pause);\n            ShowGameInfoOverlay();\n            m_game->PauseGame();\n            m_updateState = UpdateEngineState::Deactivated;\n            SetAction(GameInfoOverlayCommand::None);\n            m_renderNeeded = true;\n            break;\n\n        case UpdateEngineState::WaitingForResources:\n        case UpdateEngineState::WaitingForPress:\n            m_updateStateNext = m_updateState;\n            m_updateState = UpdateEngineState::Deactivated;\n            SetAction(GameInfoOverlayCommand::None);\n            ShowGameInfoOverlay();\n            m_renderNeeded = true;\n            break;\n        }\n    }\n    else if (args->WindowActivationState == CoreWindowActivationState::CodeActivated \n        || args->WindowActivationState == CoreWindowActivationState::PointerActivated)\n    {\n        m_haveFocus = true;\n\n        if (m_updateState == UpdateEngineState::Deactivated)\n        {\n            m_updateState = m_updateStateNext;\n\n            if (m_updateState == UpdateEngineState::WaitingForPress)\n            {\n                SetAction(GameInfoOverlayCommand::TapToContinue);\n                m_controller->WaitForPress();\n            }\n            else if (m_updateStateNext == UpdateEngineState::WaitingForResources)\n            {\n                SetAction(GameInfoOverlayCommand::PleaseWait);\n            }\n        }\n    }\n}\n//--------------------------------------------------------------------------------------\nvoid App::OnSuspending(\n    _In_ Platform::Object^ sender, \n    _In_ SuspendingEventArgs^ args\n    )\n{\n    // Save application state.\n    // If your application needs time to complete a lengthy operation, it can request a deferral.\n    // The SuspendingOperation has a deadline time. Make sure all your operations are complete by that time!\n    // If the app doesn't return from this handler within five seconds, it will be terminated.\n    SuspendingOperation^ op = args->SuspendingOperation;\n    SuspendingDeferral^ deferral = op->GetDeferral();\n\n    switch (m_updateState)\n    {\n    case UpdateEngineState::Dynamics:\n       // Game is in the active game play state, Stop Game Timer and Pause play and save state.\n        SetAction(GameInfoOverlayCommand::None);\n        SetGameInfoOverlay(GameInfoOverlayState::Pause);\n        m_updateStateNext = UpdateEngineState::WaitingForPress;\n        m_pressResult = PressResultState::ContinueLevel;\n        m_game->PauseGame();\n        break;\n\n    case UpdateEngineState::WaitingForResources:\n    case UpdateEngineState::WaitingForPress:\n        m_updateStateNext = m_updateState;\n        break;\n\n    default:\n        // Any other state don't save as next state as they are transient states and have already set m_updateStateNext\n        break;\n    }\n    m_updateState = UpdateEngineState::Suspended;\n\n    m_controller->Active(false);\n    m_game->OnSuspending();\n\n    deferral->Complete();\n}\n//--------------------------------------------------------------------------------------\nvoid App::OnResuming(\n    _In_ Platform::Object^ sender,\n    _In_ Platform::Object^ args\n    )\n{\n    if (m_haveFocus)\n    {\n        m_updateState = m_updateStateNext;\n    }\n    else\n    {\n        m_updateState = UpdateEngineState::Deactivated;\n    }\n\n    if (m_updateState == UpdateEngineState::WaitingForPress)\n    {\n        SetAction(GameInfoOverlayCommand::TapToContinue);\n        m_controller->WaitForPress();\n    }\n    m_game->OnResuming();\n    ShowGameInfoOverlay();\n    m_renderNeeded = true;\n}\n//--------------------------------------------------------------------------------------\nvoid App::OnViewStateChanged(\n     _In_ ApplicationView^ view, \n     _In_ ApplicationViewStateChangedEventArgs^ args\n     )\n{\n    m_renderNeeded = true;\n\n    if (args->ViewState == ApplicationViewState::Snapped)\n    {\n        switch (m_updateState)\n        {\n        case UpdateEngineState::Dynamics:\n            // From Dynamic mode, when coming out of SNAPPED layout rather than going directly back into game play\n            // go to the paused state waiting for user input to continue.\n            m_updateStateNext = UpdateEngineState::WaitingForPress;\n            m_pressResult = PressResultState::ContinueLevel;\n            SetGameInfoOverlay(GameInfoOverlayState::Pause);\n            SetAction(GameInfoOverlayCommand::TapToContinue);\n            m_game->PauseGame();\n            break;\n\n        case UpdateEngineState::WaitingForResources:\n        case UpdateEngineState::WaitingForPress:\n            // Avoid corrupting the m_updateStateNext on a transition from Snapped -> Snapped.\n            // Otherwise, just cache the current state and return to it when leaving SNAPPED layout.\n\n            m_updateStateNext = m_updateState;\n            break;\n\n        default:\n            break;\n        }\n\n        m_updateState = UpdateEngineState::Snapped;\n        m_controller->Active(false);\n        HideGameInfoOverlay();\n        SetSnapped();\n    }\n    else if (args->ViewState == ApplicationViewState::Filled ||\n        args->ViewState == ApplicationViewState::FullScreenLandscape ||\n        args->ViewState == ApplicationViewState::FullScreenPortrait)\n    {\n        if (m_updateState == UpdateEngineState::Snapped)\n        {\n\n            HideSnapped();\n            ShowGameInfoOverlay();\n            m_renderNeeded = true;\n\n            if (m_haveFocus)\n            {\n                if (m_updateStateNext == UpdateEngineState::WaitingForPress)\n                {\n                    SetAction(GameInfoOverlayCommand::TapToContinue);\n                    m_controller->WaitForPress();\n                }\n                else if (m_updateStateNext == UpdateEngineState::WaitingForResources)\n                {\n                    SetAction(GameInfoOverlayCommand::PleaseWait);\n                }\n\n                m_updateState = m_updateStateNext;\n            }\n            else\n            {\n                m_updateState = UpdateEngineState::Deactivated;\n                SetAction(GameInfoOverlayCommand::None);\n            }\n        }\n    }\n}\n//--------------------------------------------------------------------------------------\nvoid App::SetGameInfoOverlay(GameInfoOverlayState state)\n{\n    m_gameInfoOverlayState = state;\n    switch (state)\n    {\n    case GameInfoOverlayState::GameStats:\n        m_mainPage->SetGameStats(\n            m_game->HighScore().levelCompleted + 1,\n            m_game->HighScore().totalHits,\n            m_game->HighScore().totalShots\n            );\n        break;\n\n    case GameInfoOverlayState::LevelStart:\n        m_mainPage->SetLevelStart(\n            m_game->LevelCompleted() + 1,\n            m_game->CurrentLevel()->Objective(),\n            m_game->CurrentLevel()->TimeLimit(),\n            m_game->BonusTime()\n            );\n        break;\n\n    case GameInfoOverlayState::GameOverCompleted:\n        m_mainPage->SetGameOver(\n            true, \n            m_game->LevelCompleted() + 1,\n            m_game->TotalHits(),\n            m_game->TotalShots(),\n            m_game->HighScore().totalHits\n            );\n        break;\n\n    case GameInfoOverlayState::GameOverExpired:\n        m_mainPage->SetGameOver(\n            false, \n            m_game->LevelCompleted(),\n            m_game->TotalHits(),\n            m_game->TotalShots(),\n            m_game->HighScore().totalHits\n            );\n        break;\n\n    case GameInfoOverlayState::Pause:\n        m_mainPage->SetPause(\n            m_game->LevelCompleted() + 1,\n            m_game->TotalHits(),\n            m_game->TotalShots(),\n            m_game->TimeRemaining()\n            );\n        break;\n    }\n}\n//--------------------------------------------------------------------------------------\nvoid App::SetAction(GameInfoOverlayCommand command)\n{\n    m_mainPage->SetAction(command);\n}\n//--------------------------------------------------------------------------------------\nvoid App::ShowGameInfoOverlay()\n{\n    m_mainPage->ShowGameInfoOverlay();\n}\n//--------------------------------------------------------------------------------------\nvoid App::HideGameInfoOverlay()\n{\n    m_mainPage->HideGameInfoOverlay();\n}\n//--------------------------------------------------------------------------------------\nvoid App::SetSnapped()\n{\n    m_mainPage->SetSnapped();\n}\n//--------------------------------------------------------------------------------------\nvoid App::HideSnapped()\n{\n    m_mainPage->HideSnapped();\n}\n//--------------------------------------------------------------------------------------\nvoid App::ResetGame()\n{\n    m_updateState = UpdateEngineState::WaitingForResources;\n    m_pressResult = PressResultState::PlayLevel;\n    m_controller->Active(false);\n    m_game->LoadGame();\n    SetAction(GameInfoOverlayCommand::PleaseWait);\n    SetGameInfoOverlay(GameInfoOverlayState::LevelStart);\n    ShowGameInfoOverlay();\n    m_renderNeeded = true;\n}\n```\n\nMainPage.xaml\n\n```xaml\n<SwapChainBackgroundPanel\n    x:Name=\"DXSwapChainPanel\"\n    x:Class=\"Simple3DGameXaml.MainPage\"\n    xmlns=\"http://schemas.microsoft.com/winfx/2006/xaml/presentation\"\n    xmlns:x=\"http://schemas.microsoft.com/winfx/2006/xaml\"\n    xmlns:d=\"http://schemas.microsoft.com/expression/blend/2008\"\n    xmlns:mc=\"http://schemas.openxmlformats.org/markup-compatibility/2006\"\n    mc:Ignorable=\"d\"\n    d:DesignWidth=\"1366\"\n    d:DesignHeight=\"768\">\n  <UserControl x:Name=\"LayoutControl\" Background=\"Transparent\">\n    <Grid x:Name=\"LayoutRoot\">\n      <VisualStateManager.VisualStateGroups>\n        <VisualStateGroup x:Name=\"GameInfoOverlayStates\">\n          <VisualState x:Name=\"NormalState\">\n            <Storyboard>\n              <DoubleAnimation Storyboard.TargetName=\"GameInfoOverlay\" Storyboard.TargetProperty=\"(UIElement.Opacity)\" Duration=\"00:00:00.25\" To=\"0\">\n                <DoubleAnimation.EasingFunction>\n                  <CubicEase EasingMode=\"EaseIn\" />\n                </DoubleAnimation.EasingFunction>\n              </DoubleAnimation>\n\n              <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty=\"Visibility\" Storyboard.TargetName=\"GameInfoOverlay\">\n                <DiscreteObjectKeyFrame KeyTime=\"0:0:1\" Value=\"Collapsed\" />\n              </ObjectAnimationUsingKeyFrames>\n            </Storyboard>\n          </VisualState>\n\n          <VisualState x:Name=\"GameInfoOverlayState\">\n            <Storyboard>\n              <DoubleAnimation Storyboard.TargetName=\"GameInfoOverlay\" Storyboard.TargetProperty=\"(UIElement.Opacity)\" Duration=\"00:00:00.25\" To=\"1\">\n                <DoubleAnimation.EasingFunction>\n                  <CubicEase EasingMode=\"EaseIn\" />\n                </DoubleAnimation.EasingFunction>\n              </DoubleAnimation>\n\n              <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty=\"Visibility\" Storyboard.TargetName=\"GameInfoOverlay\">\n                <DiscreteObjectKeyFrame KeyTime=\"0:0:0\" Value=\"Visible\" />\n              </ObjectAnimationUsingKeyFrames>\n            </Storyboard>\n          </VisualState>\n\n          <VisualState x:Name=\"SnappedState\">\n            <Storyboard>\n              <DoubleAnimation Storyboard.TargetName=\"SDKHeader\" Storyboard.TargetProperty=\"(UIElement.Opacity)\" Duration=\"00:00:00.25\" To=\"0\">\n                <DoubleAnimation.EasingFunction>\n                  <CubicEase EasingMode=\"EaseIn\" />\n                </DoubleAnimation.EasingFunction>\n              </DoubleAnimation>\n              <DoubleAnimation Storyboard.TargetName=\"FullscreenView\" Storyboard.TargetProperty=\"(UIElement.Opacity)\" Duration=\"00:00:00.25\" To=\"0\">\n                <DoubleAnimation.EasingFunction>\n                  <CubicEase EasingMode=\"EaseIn\" />\n                </DoubleAnimation.EasingFunction>\n              </DoubleAnimation>\n              <DoubleAnimation Storyboard.TargetName=\"SnappedView\" Storyboard.TargetProperty=\"(UIElement.Opacity)\" Duration=\"00:00:00.25\" To=\"1\">\n                <DoubleAnimation.EasingFunction>\n                  <CubicEase EasingMode=\"EaseIn\" />\n                </DoubleAnimation.EasingFunction>\n              </DoubleAnimation>\n\n              <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty=\"Visibility\" Storyboard.TargetName=\"SDKHeader\">\n                <DiscreteObjectKeyFrame KeyTime=\"0:0:1\" Value=\"Collapsed\" />\n              </ObjectAnimationUsingKeyFrames>\n              <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty=\"Visibility\" Storyboard.TargetName=\"FullscreenView\">\n                <DiscreteObjectKeyFrame KeyTime=\"0:0:1\" Value=\"Collapsed\" />\n              </ObjectAnimationUsingKeyFrames>\n              <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty=\"Visibility\" Storyboard.TargetName=\"SnappedView\">\n                <DiscreteObjectKeyFrame KeyTime=\"0:0:0\" Value=\"Visible\" />\n              </ObjectAnimationUsingKeyFrames>\n            </Storyboard>\n          </VisualState>\n\n          <VisualState x:Name=\"UnsnappedState\">\n            <Storyboard>\n              <DoubleAnimation Storyboard.TargetName=\"SDKHeader\" Storyboard.TargetProperty=\"(UIElement.Opacity)\" Duration=\"00:00:00.25\" To=\"1\">\n                <DoubleAnimation.EasingFunction>\n                  <CubicEase EasingMode=\"EaseIn\" />\n                </DoubleAnimation.EasingFunction>\n              </DoubleAnimation>\n              <DoubleAnimation Storyboard.TargetName=\"FullscreenView\" Storyboard.TargetProperty=\"(UIElement.Opacity)\" Duration=\"00:00:00.25\" To=\"1\">\n                <DoubleAnimation.EasingFunction>\n                  <CubicEase EasingMode=\"EaseIn\" />\n                </DoubleAnimation.EasingFunction>\n              </DoubleAnimation>\n              <DoubleAnimation Storyboard.TargetName=\"SnappedView\" Storyboard.TargetProperty=\"(UIElement.Opacity)\" Duration=\"00:00:00.25\" To=\"0\">\n                <DoubleAnimation.EasingFunction>\n                  <CubicEase EasingMode=\"EaseIn\" />\n                </DoubleAnimation.EasingFunction>\n              </DoubleAnimation>\n\n              <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty=\"Visibility\" Storyboard.TargetName=\"SDKHeader\">\n                <DiscreteObjectKeyFrame KeyTime=\"0:0:0\" Value=\"Visible\" />\n              </ObjectAnimationUsingKeyFrames>\n              <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty=\"Visibility\" Storyboard.TargetName=\"FullscreenView\">\n                <DiscreteObjectKeyFrame KeyTime=\"0:0:0\" Value=\"Visible\" />\n              </ObjectAnimationUsingKeyFrames>\n              <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty=\"Visibility\" Storyboard.TargetName=\"SnappedView\">\n                <DiscreteObjectKeyFrame KeyTime=\"0:0:1\" Value=\"Collapsed\" />\n              </ObjectAnimationUsingKeyFrames>\n            </Storyboard>\n          </VisualState>\n        </VisualStateGroup>\n      </VisualStateManager.VisualStateGroups>\n      <Grid x:Name=\"ContentRoot\">\n        <Grid.RowDefinitions>\n          <RowDefinition Height=\"1*\"/>\n          <RowDefinition Height=\"2*\"/>\n          <RowDefinition Height=\"1*\"/>\n        </Grid.RowDefinitions>\n\n        <!-- Sample Overlay Title -->\n        <StackPanel x:Name=\"SDKHeader\" Grid.Row=\"0\">\n          <StackPanel Orientation=\"Horizontal\">\n            <Image Source=\"windows-sdk.png\"/>\n            <TextBlock Text=\"Windows 8 SDK Samples\" VerticalAlignment=\"Bottom\" Style=\"{StaticResource OverlayTitleStyle}\" TextWrapping=\"Wrap\"/>\n          </StackPanel>\n          <TextBlock x:Name=\"FeatureName\" Text=\"UWP DirectX/XAML first-person game sample\" Style=\"{StaticResource OverlayH1Style}\" TextWrapping=\"Wrap\"/>\n        </StackPanel>\n        <!-- End Sample Overlay Title -->\n\n        <Grid Grid.Row=\"1\" x:Name=\"SnappedView\" Background=\"{StaticResource PageBackgroundBrush}\" Visibility=\"Collapsed\">\n          <Grid.RowDefinitions>\n            <RowDefinition Height=\"2*\"/>\n            <RowDefinition Height=\"5*\"/>\n            <RowDefinition Height=\"1*\"/>\n          </Grid.RowDefinitions>\n\n          <!-- Title of the Game Info Overlay -->\n          <StackPanel Grid.Row=\"1\" Orientation=\"Horizontal\" HorizontalAlignment=\"Center\">\n            <TextBlock\n              Text=\"Game Paused\"\n              Style=\"{StaticResource TitleStyle}\"/>\n          </StackPanel>\n        </Grid>\n\n        <Grid Grid.Row=\"1\" x:Name=\"FullscreenView\">\n          <Grid.ColumnDefinitions>\n            <ColumnDefinition Width=\"1*\"/>\n            <ColumnDefinition Width=\"2*\"/>\n            <ColumnDefinition Width=\"1*\"/>\n          </Grid.ColumnDefinitions>\n\n          <!-- Center of the outer Grid.  This is the Center 50% of the screen -->\n          <Grid x:Name=\"GameInfoOverlay\" Grid.Column=\"1\" Background=\"{StaticResource PageBackgroundBrush}\" Visibility=\"Collapsed\"\n                Tapped=\"OnGameInfoOverlayTapped\">\n            <Grid.RowDefinitions>\n              <RowDefinition Height=\"2*\"/>\n              <RowDefinition Height=\"5*\"/>\n              <RowDefinition Height=\"1*\"/>\n            </Grid.RowDefinitions>\n\n            <!-- Title of the Game Info Overlay -->\n            <StackPanel Grid.Row=\"0\" Orientation=\"Horizontal\" HorizontalAlignment=\"Center\">\n              <TextBlock x:Name=\"GameInfoOverlayTitle\"\n                Text=\"Title\"\n                Style=\"{StaticResource TitleStyle}\"/>\n            </StackPanel>\n\n            <!-- Body1: Game Statistics -->\n            <Grid x:Name=\"Stats\" Grid.Row=\"1\" Visibility=\"Collapsed\">\n              <Grid.ColumnDefinitions>\n                <ColumnDefinition Width=\"Auto\"/>\n                <ColumnDefinition Width=\"*\"/>\n              </Grid.ColumnDefinitions>\n              <Grid.RowDefinitions>\n                <RowDefinition Height=\"Auto\"/>\n                <RowDefinition Height=\"Auto\"/>\n                <RowDefinition Height=\"Auto\"/>\n                <RowDefinition Height=\"*\"/>\n              </Grid.RowDefinitions>\n\n              <StackPanel Grid.Column=\"0\" Grid.Row=\"0\" Orientation=\"Horizontal\">\n                <TextBlock\n                  Text=\"Levels Completed\"\n                  Style=\"{StaticResource H1Style}\"/>\n              </StackPanel>\n              <StackPanel Grid.Column=\"0\" Grid.Row=\"1\" Orientation=\"Horizontal\">\n                <TextBlock\n                  Text=\"Total Points\"\n                  Style=\"{StaticResource H1Style}\"/>\n              </StackPanel>\n              <StackPanel Grid.Column=\"0\" Grid.Row=\"2\" Orientation=\"Horizontal\">\n                <TextBlock\n                  Text=\"Total Shots\"\n                  Style=\"{StaticResource H1Style}\"/>\n              </StackPanel>\n              <StackPanel x:Name=\"HighScoreTitle\" Grid.Column=\"0\" Grid.Row=\"3\" Orientation=\"Horizontal\" Visibility=\"Visible\">\n                <TextBlock\n                  Text=\"High Score\"\n                  Style=\"{StaticResource H1StyleSpace}\"/>\n              </StackPanel>\n              <StackPanel Grid.Column=\"1\" Grid.Row=\"0\" Orientation=\"Horizontal\">\n                <TextBlock x:Name=\"LevelsCompleted\"\n                  Text=\"1\"\n                  Style=\"{StaticResource H1Style}\"/>\n              </StackPanel>\n              <StackPanel Grid.Column=\"1\" Grid.Row=\"1\" Orientation=\"Horizontal\">\n                <TextBlock x:Name=\"TotalPoints\"\n                  Text=\"9\"\n                  Style=\"{StaticResource H1Style}\"/>\n              </StackPanel>\n              <StackPanel Grid.Column=\"1\" Grid.Row=\"2\" Orientation=\"Horizontal\">\n                <TextBlock x:Name=\"TotalShots\"\n                  Text=\"25\"\n                  Style=\"{StaticResource H1Style}\"/>\n              </StackPanel>\n              <StackPanel x:Name=\"HighScoreData\" Grid.Column=\"1\" Grid.Row=\"3\" Orientation=\"Horizontal\">\n                <TextBlock x:Name=\"HighScore\"\n                  Text=\"120\"\n                  Style=\"{StaticResource H1StyleSpace}\"/>\n              </StackPanel>\n            </Grid>\n\n            <!-- Body2: Level Start -->\n            <Grid x:Name=\"LevelStart\" Grid.Row=\"1\" Visibility=\"Visible\">\n              <Grid.ColumnDefinitions>\n                <ColumnDefinition Width=\"Auto\"/>\n                <ColumnDefinition Width=\"*\"/>\n              </Grid.ColumnDefinitions>\n              <Grid.RowDefinitions>\n                <RowDefinition Height=\"Auto\"/>\n                <RowDefinition Height=\"Auto\"/>\n                <RowDefinition Height=\"*\"/>\n              </Grid.RowDefinitions>\n\n              <StackPanel Grid.Column=\"0\" Grid.Row=\"0\" Orientation=\"Horizontal\">\n                <TextBlock\n                  Text=\"Objective\"\n                  Style=\"{StaticResource H1Style}\"/>\n              </StackPanel>\n              <StackPanel Grid.Column=\"0\" Grid.Row=\"1\" Orientation=\"Horizontal\">\n                <TextBlock\n                  Text=\"Time Limit\"\n                  Style=\"{StaticResource H1Style}\"/>\n              </StackPanel>\n              <StackPanel x:Name=\"BonusTimeTitle\" Grid.Column=\"0\" Grid.Row=\"2\" Orientation=\"Horizontal\">\n                <TextBlock\n                  Text=\"Bonus Time\"\n                  Style=\"{StaticResource H1Style}\"/>\n              </StackPanel>\n              <Grid Grid.Column=\"1\" Grid.Row=\"0\">\n                <TextBlock x:Name=\"Objective\"\n                  Text=\"Objective Text - replaced before it is displayed\"\n                  TextWrapping=\"Wrap\"\n                  Style=\"{StaticResource H1Style}\"/>\n              </Grid>\n              <StackPanel Grid.Column=\"1\" Grid.Row=\"1\" Orientation=\"Horizontal\">\n                <TextBlock x:Name=\"TimeLimit\"\n                  Text=\"30 sec\"\n                  Style=\"{StaticResource H1Style}\"/>\n              </StackPanel>\n              <StackPanel x:Name=\"BonusTimeData\" Grid.Column=\"1\" Grid.Row=\"2\" Orientation=\"Horizontal\">\n                <TextBlock x:Name=\"BonusTime\"\n                  Text=\"20 sec\"\n                  Style=\"{StaticResource H1Style}\"/>\n              </StackPanel>\n            </Grid>\n\n            <!-- Body3: Pause -->\n            <Grid x:Name=\"PauseData\" Grid.Row=\"1\" Visibility=\"Visible\">\n              <Grid.ColumnDefinitions>\n                <ColumnDefinition Width=\"Auto\"/>\n                <ColumnDefinition Width=\"*\"/>\n              </Grid.ColumnDefinitions>\n              <Grid.RowDefinitions>\n                <RowDefinition Height=\"Auto\"/>\n                <RowDefinition Height=\"Auto\"/>\n                <RowDefinition Height=\"Auto\"/>\n                <RowDefinition Height=\"*\"/>\n              </Grid.RowDefinitions>\n\n              <StackPanel Grid.Column=\"0\" Grid.Row=\"0\" Orientation=\"Horizontal\">\n                <TextBlock\n                  Text=\"Level\"\n                  Style=\"{StaticResource H1Style}\"/>\n              </StackPanel>\n              <StackPanel Grid.Column=\"0\" Grid.Row=\"1\" Orientation=\"Horizontal\">\n                <TextBlock\n                  Text=\"Hits\"\n                  Style=\"{StaticResource H1Style}\"/>\n              </StackPanel>\n              <StackPanel Grid.Column=\"0\" Grid.Row=\"2\" Orientation=\"Horizontal\">\n                <TextBlock\n                  Text=\"Shots\"\n                  Style=\"{StaticResource H1Style}\"/>\n              </StackPanel>\n              <StackPanel Grid.Column=\"0\" Grid.Row=\"3\" Orientation=\"Horizontal\">\n                <TextBlock\n                  Text=\"Time\"\n                  Style=\"{StaticResource H1Style}\"/>\n              </StackPanel>\n              <StackPanel Grid.Column=\"1\" Grid.Row=\"0\" Orientation=\"Horizontal\">\n                <TextBlock x:Name=\"PauseLevel\"\n                  Text=\"1\"\n                  TextWrapping=\"Wrap\"\n                  Style=\"{StaticResource H1Style}\"/>\n              </StackPanel>\n              <StackPanel Grid.Column=\"1\" Grid.Row=\"1\" Orientation=\"Horizontal\">\n                <TextBlock x:Name=\"PauseHits\"\n                  Text=\"0\"\n                  Style=\"{StaticResource H1Style}\"/>\n              </StackPanel>\n              <StackPanel Grid.Column=\"1\" Grid.Row=\"2\" Orientation=\"Horizontal\">\n                <TextBlock x:Name=\"PauseShots\"\n                  Text=\"0\"\n                  Style=\"{StaticResource H1Style}\"/>\n              </StackPanel>\n              <StackPanel Grid.Column=\"1\" Grid.Row=\"3\" Orientation=\"Horizontal\">\n                <TextBlock x:Name=\"PauseTimeRemaining\"\n                  Text=\"20.0 sec\"\n                  Style=\"{StaticResource H1Style}\"/>\n              </StackPanel>\n            </Grid>\n\n            <!-- Footer of Game Info Overlay.  There are several options -->\n            <StackPanel x:Name=\"TapToContinue\" Grid.Row=\"2\" Orientation=\"Horizontal\" Visibility=\"Collapsed\">\n              <TextBlock\n                Text=\"Tap to continue ...\"\n                Style=\"{StaticResource H3Style}\"\n                TextWrapping=\"Wrap\"/>\n            </StackPanel>\n            <StackPanel x:Name=\"PleaseWait\" Grid.Row=\"2\" Orientation=\"Horizontal\" Visibility=\"Collapsed\">\n              <TextBlock\n                Text=\"Level Loading Please Wait ...\"\n                Style=\"{StaticResource H3Style}\"\n                TextWrapping=\"Wrap\"/>\n            </StackPanel>\n            <StackPanel x:Name=\"PlayAgain\" Grid.Row=\"2\" Orientation=\"Horizontal\" Visibility=\"Collapsed\">\n              <TextBlock\n                Text=\"Tap to play again ...\"\n                Style=\"{StaticResource H3Style}\"\n                TextWrapping=\"Wrap\"/>\n            </StackPanel>\n          </Grid>\n        </Grid>\n      </Grid>\n      <AppBar x:Name=\"GameAppBar\"  Height=\"88\" VerticalAlignment=\"Bottom\">\n        <Grid>\n          <Grid.ColumnDefinitions>\n            <ColumnDefinition Width=\"*\"/>\n            <ColumnDefinition Width=\"Auto\"/>\n          </Grid.ColumnDefinitions>\n          <StackPanel Grid.Column=\"0\" Orientation=\"Horizontal\" HorizontalAlignment=\"Left\" VerticalAlignment=\"Top\">\n            <Button x:Name=\"Reset\" Tag=\"Reset\" Style=\"{StaticResource ResetButtonStyle}\" Click=\"OnResetButtonClicked\"/>\n          </StackPanel>\n          <StackPanel Grid.Column=\"1\" Orientation=\"Horizontal\" HorizontalAlignment=\"Right\" VerticalAlignment=\"Top\">\n            <Button x:Name=\"Pause\" Tag=\"Pause\" Style=\"{StaticResource PauseButtonStyle}\" Click=\"OnPauseButtonClicked\"/>\n            <Button x:Name=\"Play\"  Tag=\"Play\"  Style=\"{StaticResource PlayButtonStyle}\"  Click=\"OnPlayButtonClicked\"/>\n          </StackPanel>\n        </Grid>\n      </AppBar>\n    </Grid>\n  </UserControl>\n</SwapChainBackgroundPanel>\n```\n\nMainPage.xaml.h\n\n```cpp\n//// THIS CODE AND INFORMATION IS PROVIDED \"AS IS\" WITHOUT WARRANTY OF\n//// ANY KIND, EITHER EXPRESSED OR IMPLIED, INCLUDING BUT NOT LIMITED TO\n//// THE IMPLIED WARRANTIES OF MERCHANTABILITY AND/OR FITNESS FOR A\n//// PARTICULAR PURPOSE.\n////\n//// Copyright (c) Microsoft Corporation. All rights reserved\n\n#pragma once\n\n#include \"MainPage.g.h\"\n\nnamespace Simple3DGameXaml\n{\n    ref class App;\n\n    public enum class GameInfoOverlayCommand\n    {\n        None,\n        TapToContinue,\n        PleaseWait,\n        PlayAgain,\n    };\n\n    public ref class MainPage sealed\n    {\n    public:\n        MainPage(App^ app);\n\n        void SetGameStats(int maxLevel, int hitCount, int shotCount);\n        void SetGameOver(bool win, int maxLevel, int hitCount, int shotCount, int highScore);\n        void SetLevelStart(int level, Platform::String^ objective, float timeLimit, float bonusTime);\n        void SetPause(int level, int hitCount, int shotCount, float timeRemaining);\n        void SetSnapped();\n        void HideSnapped();\n        void SetAction(GameInfoOverlayCommand action);\n        void HideGameInfoOverlay();\n        void ShowGameInfoOverlay();\n\n    protected:\n        void OnPauseButtonClicked(Object^ sender, Windows::UI::Xaml::RoutedEventArgs^ e);\n        void OnPlayButtonClicked(Object^ sender, Windows::UI::Xaml::RoutedEventArgs^ e);\n        void OnResetButtonClicked(Object^ sender, Windows::UI::Xaml::RoutedEventArgs^ e);\n        void OnGameInfoOverlayTapped(Object^ sender, Windows::UI::Xaml::Input::TappedRoutedEventArgs^ args);\n\n    private:\n        App^ m_app;\n    };\n}\n```\n\nMain.xaml.cpp codebehind\n\n```cpp\n//// THIS CODE AND INFORMATION IS PROVIDED \"AS IS\" WITHOUT WARRANTY OF\n//// ANY KIND, EITHER EXPRESSED OR IMPLIED, INCLUDING BUT NOT LIMITED TO\n//// THE IMPLIED WARRANTIES OF MERCHANTABILITY AND/OR FITNESS FOR A\n//// PARTICULAR PURPOSE.\n////\n//// Copyright (c) Microsoft Corporation. All rights reserved\n\n#include \"pch.h\"\n#include \"App.xaml.h\"\n#include \"MainPage.xaml.h\"\n\nusing namespace Simple3DGameXaml;\n\nusing namespace Platform;\nusing namespace Windows::Foundation;\nusing namespace Windows::Foundation::Collections;\nusing namespace Windows::Graphics::Display;\nusing namespace Windows::UI::ViewManagement;\nusing namespace Windows::UI::Xaml;\nusing namespace Windows::UI::Xaml::Controls;\nusing namespace Windows::UI::Xaml::Controls::Primitives;\nusing namespace Windows::UI::Xaml::Data;\nusing namespace Windows::UI::Xaml::Input;\nusing namespace Windows::UI::Xaml::Media;\nusing namespace Windows::UI::Xaml::Navigation;\n\n//----------------------------------------------------------------------\nMainPage::MainPage(App^ app)\n{\n    InitializeComponent();\n\n    m_app = app;\n}\n//----------------------------------------------------------------------\nvoid MainPage::HideGameInfoOverlay()\n{\n    VisualStateManager::GoToState(this->LayoutControl, ref new String(L\"NormalState\"), true);\n}\n//----------------------------------------------------------------------\nvoid MainPage::ShowGameInfoOverlay()\n{\n    VisualStateManager::GoToState(this->LayoutControl, ref new String(L\"GameInfoOverlayState\"), true);\n}\n//----------------------------------------------------------------------\nvoid MainPage::SetAction(GameInfoOverlayCommand action)\n{\n    // Enable only one of the four possible commands at the bottom of the\n    // Game Info Overlay.\n\n    PlayAgain->Visibility = ::Visibility::Collapsed;\n    PleaseWait->Visibility = ::Visibility::Collapsed;\n    TapToContinue->Visibility = ::Visibility::Collapsed;\n\n    switch (action)\n    {\n    case GameInfoOverlayCommand::PlayAgain:\n        PlayAgain->Visibility = ::Visibility::Visible;\n        break;\n    case GameInfoOverlayCommand::PleaseWait:\n        PleaseWait->Visibility = ::Visibility::Visible;\n        break;\n    case GameInfoOverlayCommand::TapToContinue:\n        TapToContinue->Visibility = ::Visibility::Visible;\n        break;\n    case GameInfoOverlayCommand::None:\n        break;\n    }\n}\n//----------------------------------------------------------------------\nvoid MainPage::SetGameStats(\n    int maxLevel, \n    int hitCount, \n    int shotCount\n    )\n{\n    GameInfoOverlayTitle->Text = \"Game Statistics\";\n    Stats->Visibility = ::Visibility::Visible;\n    LevelStart->Visibility = ::Visibility::Collapsed;\n    PauseData->Visibility = ::Visibility::Collapsed;\n\n    static const int bufferLength = 20;\n    static char16 wsbuffer[bufferLength];\n\n    int length = swprintf_s(wsbuffer, bufferLength, L\"%d\", maxLevel);\n    LevelsCompleted->Text = ref new Platform::String(wsbuffer, length);\n\n    length = swprintf_s(wsbuffer, bufferLength, L\"%d\", hitCount);\n    TotalPoints->Text = ref new Platform::String(wsbuffer, length);\n\n    length = swprintf_s(wsbuffer, bufferLength, L\"%d\", shotCount);\n    TotalShots->Text = ref new Platform::String(wsbuffer, length);\n\n    // High Score is not used for showing Game Statistics\n    HighScoreTitle->Visibility = ::Visibility::Collapsed;\n    HighScoreData->Visibility  = ::Visibility::Collapsed;\n}\n//----------------------------------------------------------------------\nvoid MainPage::SetGameOver(\n    bool win, \n    int maxLevel, \n    int hitCount, \n    int shotCount, \n    int highScore\n    )\n{\n    if (win)\n    {\n        GameInfoOverlayTitle->Text = \"You Won!\";\n    }\n    else\n    {\n        GameInfoOverlayTitle->Text = \"Game Over\";\n    }\n    Stats->Visibility = ::Visibility::Visible;\n    LevelStart->Visibility = ::Visibility::Collapsed;\n    PauseData->Visibility = ::Visibility::Collapsed;\n\n    static const int bufferLength = 20;\n    static char16 wsbuffer[bufferLength];\n\n    int length = swprintf_s(wsbuffer, bufferLength, L\"%d\", maxLevel);\n    LevelsCompleted->Text = ref new Platform::String(wsbuffer, length);\n\n    length = swprintf_s(wsbuffer, bufferLength, L\"%d\", hitCount);\n    TotalPoints->Text = ref new Platform::String(wsbuffer, length);\n\n    length = swprintf_s(wsbuffer, bufferLength, L\"%d\", shotCount);\n    TotalShots->Text = ref new Platform::String(wsbuffer, length);\n\n    // Show High Score\n    HighScoreTitle->Visibility = ::Visibility::Visible;\n    HighScoreData->Visibility  = ::Visibility::Visible;\n    length = swprintf_s(wsbuffer, bufferLength, L\"%d\", highScore);\n    HighScore->Text = ref new Platform::String(wsbuffer, length);\n}\n//----------------------------------------------------------------------\nvoid MainPage::SetLevelStart(\n    int level, \n    Platform::String^ objective, \n    float timeLimit, \n    float bonusTime\n    )\n{\n    static const int bufferLength = 20;\n    static char16 wsbuffer[bufferLength];\n\n    int length = swprintf_s(wsbuffer, bufferLength, L\"Level %d\", level);\n    GameInfoOverlayTitle->Text = ref new Platform::String(wsbuffer, length);\n\n    Stats->Visibility = ::Visibility::Collapsed;\n    LevelStart->Visibility = ::Visibility::Visible;\n    PauseData->Visibility = ::Visibility::Collapsed;\n\n    Objective->Text = objective;\n\n    length = swprintf_s(wsbuffer, bufferLength, L\"%6.1f sec\", timeLimit);\n    TimeLimit->Text = ref new Platform::String(wsbuffer, length);\n\n    if (bonusTime > 0.0)\n    {\n        BonusTimeTitle->Visibility = ::Visibility::Visible;\n        BonusTimeData->Visibility  = ::Visibility::Visible;\n        length = swprintf_s(wsbuffer, bufferLength, L\"%6.1f sec\", bonusTime);\n        BonusTime->Text = ref new Platform::String(wsbuffer, length);\n    }\n    else\n    {\n        BonusTimeTitle->Visibility = ::Visibility::Collapsed;\n        BonusTimeData->Visibility  = ::Visibility::Collapsed;  \n    }\n}\n//----------------------------------------------------------------------\nvoid MainPage::SetPause(int level, int hitCount, int shotCount, float timeRemaining)\n{\n    GameInfoOverlayTitle->Text = \"Paused\";\n    Stats->Visibility = ::Visibility::Collapsed;\n    LevelStart->Visibility = ::Visibility::Collapsed;\n    PauseData->Visibility = ::Visibility::Visible;\n\n    static const int bufferLength = 20;\n    static char16 wsbuffer[bufferLength];\n\n    int length = swprintf_s(wsbuffer, bufferLength, L\"%d\", level);\n    PauseLevel->Text = ref new Platform::String(wsbuffer, length);\n\n    length = swprintf_s(wsbuffer, bufferLength, L\"%d\", hitCount);\n    PauseHits->Text = ref new Platform::String(wsbuffer, length);\n\n    length = swprintf_s(wsbuffer, bufferLength, L\"%d\", shotCount);\n    PauseShots->Text = ref new Platform::String(wsbuffer, length);\n\n    length = swprintf_s(wsbuffer, bufferLength, L\"%6.1f sec\", timeRemaining);\n    PauseTimeRemaining->Text = ref new Platform::String(wsbuffer, length);\n}\n//----------------------------------------------------------------------\nvoid MainPage::SetSnapped()\n{\n    VisualStateManager::GoToState(this->LayoutControl, ref new String(L\"SnappedState\"), true);\n}\n//----------------------------------------------------------------------\nvoid MainPage::HideSnapped()\n{\n    VisualStateManager::GoToState(this->LayoutControl, ref new String(L\"UnsnappedState\"), true);\n}\n//----------------------------------------------------------------------\nvoid MainPage::OnGameInfoOverlayTapped(Object^ sender, TappedRoutedEventArgs^ args)\n{\n    m_app->PressComplete();\n}\n//----------------------------------------------------------------------\nvoid MainPage::OnPauseButtonClicked(Object^ sender, RoutedEventArgs^ args)\n{\n    m_app->PauseRequested();\n}\n//----------------------------------------------------------------------\nvoid MainPage::OnPlayButtonClicked(Object^ sender, RoutedEventArgs^ args)\n{\n    m_app->PressComplete();\n}\n//----------------------------------------------------------------------\nvoid MainPage::OnResetButtonClicked(Object^ sender, RoutedEventArgs^ args)\n{\n    m_app->ResetGame();\n}\n//----------------------------------------------------------------------\n```\n\nTo download a version of the sample game that uses XAML for the overlay, go to the [Direct3D shooting game sample (XAML)](http://go.microsoft.com/fwlink/p/?linkid=241418).\n\n \n\n \n\n\n\n\n"}