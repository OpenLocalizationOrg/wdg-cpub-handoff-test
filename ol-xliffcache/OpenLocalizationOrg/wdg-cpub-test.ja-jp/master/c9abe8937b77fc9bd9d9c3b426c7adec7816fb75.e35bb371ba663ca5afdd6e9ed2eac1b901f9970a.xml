{"nodes":[{"pos":[60,82],"content":"Composition animations","needQuote":true,"needEscape":true,"nodes":[{"content":"Composition animations","pos":[0,22]}]},{"pos":[96,282],"content":"Many composition object and effect properties can be animated using key frame and expression animations allowing properties of a UI element to change over time or based on a calculation.","needQuote":true,"needEscape":true,"nodes":[{"content":"Many composition object and effect properties can be animated using key frame and expression animations allowing properties of a UI element to change over time or based on a calculation.","pos":[0,186]}]},{"content":"Composition animations","pos":[289,311]},{"content":"\\[ Updated for UWP apps on Windows 10.","pos":[313,351]},{"content":"For Windows 8.x articles, see the <bpt id=\"p1\">[</bpt>archive<ept id=\"p1\">](http://go.microsoft.com/fwlink/p/?linkid=619132)</ept> \\]","pos":[352,447],"source":" For Windows 8.x articles, see the [archive](http://go.microsoft.com/fwlink/p/?linkid=619132) \\]"},{"content":"Many composition object and effect properties can be animated using key frame and expression animations allowing properties of a UI element to change over time or based on a calculation.","pos":[449,635]},{"content":"There are two types of animations, keyframe animations, represented by the <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>KeyFrameAnimation<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/Dn706830)</ept> class, and expression animations represented by the <bpt id=\"p3\">[</bpt><bpt id=\"p4\">**</bpt>ExpressionAnimation<ept id=\"p4\">**</ept><ept id=\"p3\">](https://msdn.microsoft.com/library/windows/apps/Dn706817)</ept> class.","pos":[636,935],"source":" There are two types of animations, keyframe animations, represented by the [**KeyFrameAnimation**](https://msdn.microsoft.com/library/windows/apps/Dn706830) class, and expression animations represented by the [**ExpressionAnimation**](https://msdn.microsoft.com/library/windows/apps/Dn706817) class."},{"content":"Animatable Properties","pos":[942,963]},{"content":"KeyFrame Animations","pos":[1020,1039]},{"content":"Creating your animation and KeyFrames","pos":[1098,1135]},{"content":"KeyFrame Properties","pos":[1212,1231]},{"content":"Easing Functions","pos":[1290,1306]},{"content":"Starting and Stopping KeyFrame Animations","pos":[1362,1403]},{"content":"Animation Completion Events","pos":[1484,1511]},{"content":"Expression Animations","pos":[1574,1595]},{"content":"Creating your Expression","pos":[1656,1680]},{"content":"Property Sets","pos":[1744,1757]},{"content":"Expression KeyFrames","pos":[1810,1830]},{"content":"Animatable Properties","pos":[1885,1906]},{"content":"The following properties are animatable by associating them with a KeyFrame or Expression Animation:","pos":[1908,2008]},{"content":"CompositionColorBrush.Color","pos":[2014,2041]},{"content":"InsetClip.BottomInset","pos":[2046,2067]},{"content":"InsetClip.LeftInset","pos":[2072,2091]},{"content":"InsetClip.RightInset","pos":[2096,2116]},{"content":"InsetClip.TopInset","pos":[2121,2139]},{"content":"Visual.AnchorPoint","pos":[2144,2162]},{"content":"Visual.CenterPoint","pos":[2167,2185]},{"content":"Visual.Offset","pos":[2190,2203]},{"content":"Visual.Opacity","pos":[2208,2222]},{"content":"Visual.Orientation","pos":[2227,2245]},{"content":"Visual.RotationAngle","pos":[2250,2270]},{"content":"Visual.RotationAxis","pos":[2275,2294]},{"content":"Visual.Size","pos":[2299,2310]},{"content":"Visual.TransformMatrix","pos":[2315,2337]},{"content":"CompositionPropertySet","pos":[2342,2364]},{"content":"KeyFrame Animations","pos":[2369,2388]},{"content":"KeyFrame Animations are time-based animations that use one or more key frames to specify how the animated value should change over time.","pos":[2390,2526]},{"content":"The frames represent markers, allowing you to define what the animated value should be at a specific time.","pos":[2527,2633]},{"content":"Creating your animation and KeyFrames","pos":[2639,2676]},{"content":"To construct a KeyFrame Animation, use one of the constructor methods of the Compositor class that correlates to the structure type of the property you wish to animate.","pos":[2678,2846]},{"content":"CreateColorKeyFrameAnimation","pos":[2855,2883]},{"content":"CreateQuaternionKeyFrameAnimation","pos":[2952,2985]},{"content":"CreateScalarKeyFrameAnimation","pos":[3054,3083]},{"content":"CreateVector2KeyFrameAnimation","pos":[3152,3182]},{"content":"CreateVector3KeyFrameAnimation","pos":[3251,3281]},{"content":"CreateVector4KeyFrameAnimation","pos":[3350,3380]},{"content":"For example, the following snippet creates a Vector3 keyframe animation:","pos":[3443,3515]},{"content":"Each KeyFrame is constructed by calling the InsertKeyFrame method of a KeyFrameAnimation and specifying two components and optionally a third component:","pos":[3590,3742]},{"content":"Time: normalized progress state of the KeyFrame between 0.0 – 1.0","pos":[3748,3813]},{"content":"Value: specific value of the animating value at the time state","pos":[3818,3880]},{"content":"(Optional) Easing function: function to describe interpolation between previous and current KeyFrame (discussed later on)","pos":[3885,4006]},{"content":"For example, the following snippet inserts a keyframe in a Vector3KeyFrameAnimation that will triggered half way through the animation:","pos":[4008,4143]},{"content":"KeyFrame Properties","pos":[4225,4244]},{"content":"Once you've defined your KeyFrame Animation and the individual KeyFrames, you are able to define multiple properties of your animation:","pos":[4246,4381]},{"content":"DelayTime – time before an animation starts after StartAnimation() is called","pos":[4387,4463]},{"content":"Duration – duration of the animation","pos":[4468,4504]},{"content":"IterationBehavior – count or infinite repeat behavior for an animation","pos":[4509,4579]},{"content":"IterationCount – number of finite times a KeyFrame Animation will repeat","pos":[4584,4656]},{"content":"KeyFrame Count – number of KeyFrames in a particular KeyFrameAnimation","pos":[4661,4731]},{"content":"StopBehavior – specifies the behavior of an animating property value when StopAnimation is called.","pos":[4736,4834]},{"content":"For example, the following snippet sets the duration of the animation to five seconds:","pos":[4836,4922]},{"content":"Easing Functions","pos":[4985,5001]},{"content":"A key frame easing function, a CompositionEasingFunction, indicates how intermediate values progress from the previous key frame value to the current key frame value.","pos":[5003,5169]},{"content":"If you do not provide an easing function for the KeyFrame, a default curve will be used.","pos":[5170,5258]},{"content":"There are two types of easing functions supported:","pos":[5260,5310]},{"pos":[5316,5409],"content":"Linear (<bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>LinearEasingFunction<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/Dn706839)</ept>)","source":"Linear ([**LinearEasingFunction**](https://msdn.microsoft.com/library/windows/apps/Dn706839))"},{"pos":[5414,5518],"content":"Cubic Bezier (<bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>CubicBezierEasingFunction<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/Dn706812)</ept>)","source":"Cubic Bezier ([**CubicBezierEasingFunction**](https://msdn.microsoft.com/library/windows/apps/Dn706812))"},{"pos":[5520,5850],"content":"To create an easing function, use either the <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>CreateLinearEasingFunction<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/Dn706801)</ept> or <bpt id=\"p3\">[</bpt><bpt id=\"p4\">**</bpt>CreateCubicBezierEasingFunction<ept id=\"p4\">**</ept><ept id=\"p3\">](https://msdn.microsoft.com/library/windows/apps/Dn706791)</ept> method of the <bpt id=\"p5\">[</bpt><bpt id=\"p6\">**</bpt>Compositor<ept id=\"p6\">**</ept><ept id=\"p5\">](https://msdn.microsoft.com/library/windows/apps/Dn706761)</ept> class:","source":"To create an easing function, use either the [**CreateLinearEasingFunction**](https://msdn.microsoft.com/library/windows/apps/Dn706801) or [**CreateCubicBezierEasingFunction**](https://msdn.microsoft.com/library/windows/apps/Dn706791) method of the [**Compositor**](https://msdn.microsoft.com/library/windows/apps/Dn706761) class:"},{"content":"Note: A useful tool for generating the points for your Cubic Bezier can be found here.","pos":[6026,6112]},{"content":"To add your easing function into your KeyFrame, simply add in the third parameter to the KeyFrame when inserting it into the Animation:","pos":[6114,6249]},{"content":"Starting and Stopping KeyFrame Animations","pos":[6339,6380]},{"content":"After you have defined your animation, KeyFrames and properties, you are ready to connect the animation to the property you want to animate.","pos":[6382,6522]},{"content":"You connect your animation to the property you plan to animate by calling <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>StartAnimation<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/Mt590840)</ept> on the <bpt id=\"p3\">[</bpt><bpt id=\"p4\">**</bpt>Visual<ept id=\"p4\">**</ept><ept id=\"p3\">](https://msdn.microsoft.com/library/windows/apps/Dn706858)</ept> object the property belongs to.","pos":[6523,6785],"source":" You connect your animation to the property you plan to animate by calling [**StartAnimation**](https://msdn.microsoft.com/library/windows/apps/Mt590840) on the [**Visual**](https://msdn.microsoft.com/library/windows/apps/Dn706858) object the property belongs to."},{"content":"The general syntax and an example is as follows:","pos":[6787,6835]},{"content":"After starting your animation, you also have the ability to stop and disconnect it as well.","pos":[6898,6989]},{"content":"This is done by using the <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>StopAnimation<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/Mt590841)</ept> method and specifying the property you want to stop animating.","pos":[6990,7156],"source":" This is done by using the [**StopAnimation**](https://msdn.microsoft.com/library/windows/apps/Mt590841) method and specifying the property you want to stop animating."},{"content":"For example:","pos":[7158,7170]},{"content":"Animation Completion Events","pos":[7225,7252]},{"content":"KeyFrame animations have a defined end, unlike Expression Animations, which are conditional.","pos":[7254,7346]},{"content":"Developers can determine when groups or a single KeyFrame animation completes by using batches.","pos":[7347,7442]},{"content":"Batches can be created or retrieved, depending on the batch object type, and are used to aggregate the end state of animations.","pos":[7443,7570]},{"content":"Scoped batches are created while Commit batches are retrieved, the use of these different batches are described later.","pos":[7571,7689]},{"content":"A batch completion event fires when all animations within the batch have completed.","pos":[7691,7774]},{"content":"The time it takes for a batch's completion event to fire depends on the longest or most delayed animation in the batch.","pos":[7775,7894]},{"content":"Aggregating end states is useful when you need to know when groups of select animations complete in order to schedule other work.","pos":[7895,8024]},{"content":"Scoped batches","pos":[8030,8044]},{"pos":[8046,8232],"content":"To aggregate a specific group or a single animation, you first need to create a Scoped batch by calling <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>CreateScopedBatch<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/Mt589425)</ept>.","source":"To aggregate a specific group or a single animation, you first need to create a Scoped batch by calling [**CreateScopedBatch**](https://msdn.microsoft.com/library/windows/apps/Mt589425)."},{"pos":[8325,8587],"content":"After creating a Scoped batch, all started animations aggregate until the batch is explicitly suspended or ended using <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>Suspend<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/Mt590848)</ept> or <bpt id=\"p3\">[</bpt><bpt id=\"p4\">**</bpt>End<ept id=\"p4\">**</ept><ept id=\"p3\">](https://msdn.microsoft.com/library/windows/apps/Mt590844)</ept>.","source":"After creating a Scoped batch, all started animations aggregate until the batch is explicitly suspended or ended using [**Suspend**](https://msdn.microsoft.com/library/windows/apps/Mt590848) or [**End**](https://msdn.microsoft.com/library/windows/apps/Mt590844)."},{"content":"Calling <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>Suspend<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/Mt590848)</ept> stops aggregating animation end states until <bpt id=\"p3\">[</bpt><bpt id=\"p4\">**</bpt>Resume<ept id=\"p4\">**</ept><ept id=\"p3\">](https://msdn.microsoft.com/library/windows/apps/Mt590847)</ept> is called.","pos":[8589,8795],"source":"Calling [**Suspend**](https://msdn.microsoft.com/library/windows/apps/Mt590848) stops aggregating animation end states until [**Resume**](https://msdn.microsoft.com/library/windows/apps/Mt590847) is called."},{"content":"This allows you to explicitly exclude content from a given batch.","pos":[8796,8861]},{"content":"In order to complete your batch you must call <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>End<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/Mt590844)</ept>.","pos":[8899,9013],"source":"In order to complete your batch you must call [**End**](https://msdn.microsoft.com/library/windows/apps/Mt590844)."},{"content":"Without an End call, the batch will remain open forever-collecting objects.","pos":[9014,9089]},{"content":"If you want to know when a single animation ends, you need to create a Scoped batch, start the animation and end the batch.","pos":[9123,9246]},{"content":"For example:","pos":[9248,9260]},{"content":"Commit batches","pos":[9425,9439]},{"content":"A commit batch is a batch that is implicitly created during the commit cycle.","pos":[9441,9518]},{"content":"The current Commit batch can be retrieved by calling <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>GetCommitBatch<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/Mt589430)</ept> at any time during the commit cycle.","pos":[9519,9687],"source":" The current Commit batch can be retrieved by calling [**GetCommitBatch**](https://msdn.microsoft.com/library/windows/apps/Mt589430) at any time during the commit cycle."},{"content":"The commit cycle is defined as the time between updates from the compositor.","pos":[9688,9764]},{"content":"Updates are queued until the system is ready to process the changes and draw bits to the screen.","pos":[9765,9861]},{"content":"Titles do not control when commits happen.","pos":[9862,9904]},{"content":"The Commit batch will aggregate all objects within the commit cycle, those before and after GetCommitBatch was called.","pos":[9905,10023]},{"content":"There is only one Commit batch per commit cycle and you do not need to explicitly call <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>End<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/Mt590844)</ept> on the commit batch.","pos":[10024,10199],"source":" There is only one Commit batch per commit cycle and you do not need to explicitly call [**End**](https://msdn.microsoft.com/library/windows/apps/Mt590844) on the commit batch."},{"content":"Batch states","pos":[10293,10305]},{"content":"To determine if a batch is open to aggregating animations you can use the <bpt id=\"p1\">**</bpt>IsActive<ept id=\"p1\">**</ept> property.","pos":[10307,10403],"source":"To determine if a batch is open to aggregating animations you can use the **IsActive** property."},{"content":"If the <bpt id=\"p1\">**</bpt>IsEnded<ept id=\"p1\">**</ept> property return true, you cannot add an animation to that specific batch.","pos":[10404,10496],"source":" If the **IsEnded** property return true, you cannot add an animation to that specific batch."},{"content":"Scoped batches are “ended” when they have been explicitly ended by calling the <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>End<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/Mt590844)</ept> method.","pos":[10497,10651],"source":" Scoped batches are “ended” when they have been explicitly ended by calling the [**End**](https://msdn.microsoft.com/library/windows/apps/Mt590844) method."},{"content":"Commit batches are ended when the current commit cycle has ended.","pos":[10652,10717]},{"content":"Expression Animations","pos":[10722,10743]},{"content":"Expression Animations are animations that use a mathematical expression to specify how the animated value should be calculated for each frame.","pos":[10745,10887]},{"content":"The expression language itself can reference properties from other composition objects.","pos":[10888,10975]},{"content":"Unlike KeyFrame Animations, Expressions are not time-based and are processed each frame (if necessary).","pos":[10976,11079]},{"content":"Expressions can be useful to describe more complex user experiences that can be processed by the Composition engine, for example sticky headers and parallax.","pos":[11080,11237]},{"content":"Creating your Expression","pos":[11243,11267]},{"pos":[11269,11467],"content":"To create your expression, you call <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>CreateExpressionAnimation<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/Mt187002)</ept> on your Compositor object and specifying the expression you want to use:","source":"To create your expression, you call [**CreateExpressionAnimation**](https://msdn.microsoft.com/library/windows/apps/Mt187002) on your Compositor object and specifying the expression you want to use:"},{"content":"Operators, Precedence and Associativity","pos":[11567,11606]},{"content":"The Expression language supports the following operators and adheres to operator precedence and associativity as defined in the C# Language Specification:","pos":[11608,11762]},{"content":"Unary (-)","pos":[11768,11777]},{"content":"Multiplicative (\\* /)","pos":[11782,11803]},{"content":"Additive (- +)","pos":[11808,11822]},{"content":"The Expression language also supports the concept of per-component math operations.","pos":[11824,11907]},{"content":"These member-access (x.y) operators are only supported on “primitive” types (Vector and Matrices).","pos":[11908,12006]},{"content":"For example:","pos":[12007,12019]},{"content":"Property Parameters","pos":[12051,12070]},{"content":"One of the powerful components of the Expression language is being able use parameters as variables in the expression.","pos":[12072,12190]},{"content":"The expression string can contain parameters which are replaced with either a constant value or are references to another object's property value when calculated.","pos":[12191,12353]},{"content":"For example:","pos":[12354,12366]},{"content":"In this example ChildOffset and ParentOffset are parameters that represent the offset property of two visuals.","pos":[12424,12534]},{"content":"You define parameters using the <bpt id=\"p1\">**</bpt>Set\\*Parameter<ept id=\"p1\">**</ept> methods of the <bpt id=\"p2\">[</bpt><bpt id=\"p3\">**</bpt>CompositionAnimation<ept id=\"p3\">**</ept><ept id=\"p2\">](https://msdn.microsoft.com/library/windows/apps/Dn706708)</ept> class:","pos":[12535,12692],"source":" You define parameters using the **Set\\*Parameter** methods of the [**CompositionAnimation**](https://msdn.microsoft.com/library/windows/apps/Dn706708) class:"},{"pos":[12698,13179],"content":"To create a vector parameter you use <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>SetVector2Parameter<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.composition.compositionanimation.setvector2parameter.aspx)</ept>, <bpt id=\"p3\">[</bpt><bpt id=\"p4\">**</bpt>SetVector3Parameter<ept id=\"p4\">**</ept><ept id=\"p3\">](https://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.composition.compositionanimation.setvector3parameter.aspx)</ept>, or <bpt id=\"p5\">[</bpt><bpt id=\"p6\">**</bpt>SetVector4Parameter<ept id=\"p6\">**</ept><ept id=\"p5\">](https://msdn.microsoft.com/library/windows/apps/windows.ui.composition.compositionanimation.setvector4parameter)</ept>.","source":"To create a vector parameter you use [**SetVector2Parameter**](https://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.composition.compositionanimation.setvector2parameter.aspx), [**SetVector3Parameter**](https://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.composition.compositionanimation.setvector3parameter.aspx), or [**SetVector4Parameter**](https://msdn.microsoft.com/library/windows/apps/windows.ui.composition.compositionanimation.setvector4parameter)."},{"pos":[13184,13522],"content":"To create a matrix parameter you use <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>SetMatrix3x2Parameter<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.composition.compositionanimation.setmatrix3x2parameter.aspx)</ept>, or <bpt id=\"p3\">[</bpt><bpt id=\"p4\">**</bpt>SetMatrix4x4Parameter<ept id=\"p4\">**</ept><ept id=\"p3\">](https://msdn.microsoft.com/library/windows/apps/windows.ui.composition.compositionanimation.setmatrix4x4parameter)</ept>.","source":"To create a matrix parameter you use [**SetMatrix3x2Parameter**](https://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.composition.compositionanimation.setmatrix3x2parameter.aspx), or [**SetMatrix4x4Parameter**](https://msdn.microsoft.com/library/windows/apps/windows.ui.composition.compositionanimation.setmatrix4x4parameter)."},{"pos":[13527,13701],"content":"to create a scalar parameter you use <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>SetScalarParameter<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/windows.ui.composition.compositionanimation.setscalarparameter)</ept>.","source":"to create a scalar parameter you use [**SetScalarParameter**](https://msdn.microsoft.com/library/windows/apps/windows.ui.composition.compositionanimation.setscalarparameter)."},{"pos":[13706,13877],"content":"To create a color parameter you use <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>SetColorParameter<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/windows.ui.composition.compositionanimation.setcolorparameter)</ept>.","source":"To create a color parameter you use [**SetColorParameter**](https://msdn.microsoft.com/library/windows/apps/windows.ui.composition.compositionanimation.setcolorparameter)."},{"pos":[13882,14068],"content":"To create a quaternion parameter you use <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>SetQuaternionParameter<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/windows.ui.composition.compositionanimation.setquaternionparameter)</ept>.","source":"To create a quaternion parameter you use [**SetQuaternionParameter**](https://msdn.microsoft.com/library/windows/apps/windows.ui.composition.compositionanimation.setquaternionparameter)."},{"pos":[14073,14256],"content":"To create a reference parameter you use <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>SetReferenceParameter<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/windows.ui.composition.compositionanimation.setreferenceparameter)</ept>.","source":"To create a reference parameter you use [**SetReferenceParameter**](https://msdn.microsoft.com/library/windows/apps/windows.ui.composition.compositionanimation.setreferenceparameter)."},{"content":"In the Expression String above, we would need to create two parameters to define the two Visuals:","pos":[14258,14355]},{"content":"Expression Helper Functions","pos":[14498,14525]},{"content":"In addition to having access to operators and property parameters, you also have access to the full helper function library of the expression language.","pos":[14527,14678]},{"content":"You can find the full list of helper functions in the remarks section of the <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>ExpressionAnimation<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/Dn706817)</ept> class, but here are a few:","pos":[14679,14866],"source":" You can find the full list of helper functions in the remarks section of the [**ExpressionAnimation**](https://msdn.microsoft.com/library/windows/apps/Dn706817) class, but here are a few:"},{"content":"Max (Scalar value1, Scalar value2)","pos":[14872,14906]},{"content":"Scale (Vector3 value, Scalar factor)","pos":[14911,14947]},{"content":"Transform(Vector2 value, Matrix 3x2 matrix)","pos":[14952,14995]},{"content":"Here’s a more complex expression string example that uses the Clamp helper function:","pos":[14997,15081]},{"content":"Starting and stopping your Expression Animation","pos":[15190,15237]},{"content":"To start and stop your Expression Animations, you use the same functions (<bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>StartAnimation<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/Mt590840)</ept>, <bpt id=\"p3\">[</bpt><bpt id=\"p4\">**</bpt>StopAnimation<ept id=\"p4\">**</ept><ept id=\"p3\">](https://msdn.microsoft.com/library/windows/apps/Mt590841)</ept>) as you do with KeyFrame Animations.","pos":[15239,15507],"source":"To start and stop your Expression Animations, you use the same functions ([**StartAnimation**](https://msdn.microsoft.com/library/windows/apps/Mt590840), [**StopAnimation**](https://msdn.microsoft.com/library/windows/apps/Mt590841)) as you do with KeyFrame Animations."},{"content":"Note: Expression Animations will continue to run until they are stopped using <bpt id=\"p1\">**</bpt>StopAnimation<ept id=\"p1\">**</ept> – unlike KeyFrame Animations, they do not have a finite duration.","pos":[15508,15669],"source":" Note: Expression Animations will continue to run until they are stopped using **StopAnimation** – unlike KeyFrame Animations, they do not have a finite duration."},{"content":"Property Sets","pos":[15675,15688]},{"content":"In addition to being able to reference properties of other Composition objects, you also have the ability to create and store property values of your own that can be used across multiple animations.","pos":[15690,15888]},{"content":"Property sets are represented by the <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>CompositionPropertySet<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/Dn706772)</ept> class.","pos":[15889,16019],"source":" Property sets are represented by the [**CompositionPropertySet**](https://msdn.microsoft.com/library/windows/apps/Dn706772) class."},{"content":"Property sets allow you to create a property with a value and reference it later in an expression or even hook it up as the target of a KeyFrame Animation.","pos":[16020,16175]},{"content":"To create a property set, use the <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>CreatePropertySet<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/Dn706802)</ept> method of the Compositor class.","pos":[16177,16324],"source":"To create a property set, use the [**CreatePropertySet**](https://msdn.microsoft.com/library/windows/apps/Dn706802) method of the Compositor class."},{"content":"For example:","pos":[16325,16337]},{"content":"Once you’ve created your property set, you can add a property and value to it using one of the <bpt id=\"p1\">**</bpt>Insert\\*<ept id=\"p1\">**</ept> methods of <bpt id=\"p2\">[</bpt><bpt id=\"p3\">**</bpt>CompositionPropertySet<ept id=\"p3\">**</ept><ept id=\"p2\">](https://msdn.microsoft.com/library/windows/apps/Dn706772)</ept>.","pos":[16403,16609],"source":"Once you’ve created your property set, you can add a property and value to it using one of the **Insert\\*** methods of [**CompositionPropertySet**](https://msdn.microsoft.com/library/windows/apps/Dn706772)."},{"content":"For example:","pos":[16610,16622]},{"content":"After you've created your expression animation, you can reference properties from the property set in the expression string with the use of a reference parameter.","pos":[16689,16851]},{"content":"For example:","pos":[16852,16864]},{"content":"Expression KeyFrames","pos":[17040,17060]},{"content":"Earlier in this document, we described how you create KeyFrame Animations and their respective KeyFrames.","pos":[17062,17167]},{"content":"In addition to making the traditional KeyFrame with a normalized time and value component, you are also able to define expression KeyFrames.","pos":[17168,17308]},{"content":"Instead of defining an explicit value for a particular time in the KeyFrame, we are able to use the expression syntax to describe how the value should be calculated at this particular point in the KeyFrame timeline.","pos":[17310,17525]},{"content":"You are able to mix and match expression KeyFrames with basic KeyFrames in your KeyFrame Animation.","pos":[17526,17625]},{"content":"Constructing Expression KeyFrames","pos":[17631,17664]},{"content":"Similar to traditional KeyFrames, expression KeyFrames are constructed by specifying 2 components:","pos":[17666,17764]},{"content":"Time: normalized time state of the KeyFrame between 0.0 – 1.0","pos":[17770,17831]},{"content":"Value: The expression string used to describe how the value should be calculated","pos":[17836,17916]},{"content":"For example, the following snippet uses a combination of both regular and expression KeyFrames:","pos":[17918,18013]},{"content":"Using current and starting values","pos":[18209,18242]},{"content":"In the expression language, it is possible to reference both the current and the starting value of an animation.","pos":[18244,18356]},{"content":"These values are pre-fixed in the expression language with “this”:","pos":[18357,18423]},{"content":"this.CurrentValue","pos":[18429,18446]},{"content":"this.StartingValue","pos":[18451,18469]},{"content":"An example of using these in an Expression KeyFrame:","pos":[18471,18523]},{"content":"Conditional Expressions","pos":[18611,18634]},{"content":"In addition to supporting basic mathematical expressions, you can also define a conditional expression using a ternary operator:","pos":[18636,18764]},{"content":"Within the expressions themselves, the following conditional operators are supported in the condition statement:","pos":[18828,18940]},{"content":"Equals (==)","pos":[18946,18957]},{"content":"Not Equals (!=)","pos":[18962,18977]},{"content":"Less than (&lt;)","pos":[18982,18995],"source":"Less than (<)"},{"content":"Less than or equal to (&lt;=)","pos":[19000,19026],"source":"Less than or equal to (<=)"},{"content":"Great than (&gt;)","pos":[19031,19045],"source":"Great than (>)"},{"content":"Great than or equal to (&gt;=)","pos":[19050,19077],"source":"Great than or equal to (>=)"},{"content":"Finally, the following conjunctions are supported as operators or functions in the condition statement:","pos":[19079,19182]},{"content":"Not: !","pos":[19188,19194]},{"content":"/ Not(bool1)","pos":[19195,19207]},{"content":"And: &amp;&amp; / And(bool1, bool2)","pos":[19212,19239],"source":"And: && / And(bool1, bool2)"},{"content":"Or: || / Or(bool1, bool2)","pos":[19244,19269]},{"content":"The following snippet shows an example of using conditionals in an expression:","pos":[19271,19349]}],"content":"---\nms.assetid: 386faf59-8f22-2e7c-abc9-d04216e78894\ntitle: Composition animations\ndescription: Many composition object and effect properties can be animated using key frame and expression animations allowing properties of a UI element to change over time or based on a calculation.\n---\n# Composition animations\n\n\\[ Updated for UWP apps on Windows 10. For Windows 8.x articles, see the [archive](http://go.microsoft.com/fwlink/p/?linkid=619132) \\]\n\nMany composition object and effect properties can be animated using key frame and expression animations allowing properties of a UI element to change over time or based on a calculation. There are two types of animations, keyframe animations, represented by the [**KeyFrameAnimation**](https://msdn.microsoft.com/library/windows/apps/Dn706830) class, and expression animations represented by the [**ExpressionAnimation**](https://msdn.microsoft.com/library/windows/apps/Dn706817) class.\n\n-   [Animatable Properties](./composition-animation.md#animatable_properties)\n-   [KeyFrame Animations](./composition-animation.md#keyframe-animations)\n    -   [Creating your animation and KeyFrames](./composition-animation.md#creating-your-animation-and-Keyframes)\n    -   [KeyFrame Properties](./composition-animation.md#keyframe-properties)\n    -   [Easing Functions](./composition-animation.md#easing-functions)\n    -   [Starting and Stopping KeyFrame Animations](./composition-animation.md#starting-and-stopping-keyframe-animations)\n    -   [Animation Completion Events](./composition-animation.md#animation-completion-events)\n-   [Expression Animations](./composition-animation.md#expression-animations)\n    -   [Creating your Expression](./composition-animation.md#creating-your-expression)\n    -   [Property Sets](./composition-animation.md#property-sets)\n    -   [Expression KeyFrames](./composition-animation.md#expression_keyframes)\n\n## Animatable Properties\n\nThe following properties are animatable by associating them with a KeyFrame or Expression Animation:\n\n-   CompositionColorBrush.Color\n-   InsetClip.BottomInset\n-   InsetClip.LeftInset\n-   InsetClip.RightInset\n-   InsetClip.TopInset\n-   Visual.AnchorPoint\n-   Visual.CenterPoint\n-   Visual.Offset\n-   Visual.Opacity\n-   Visual.Orientation\n-   Visual.RotationAngle\n-   Visual.RotationAxis\n-   Visual.Size\n-   Visual.TransformMatrix\n-   CompositionPropertySet\n\n## KeyFrame Animations\n\nKeyFrame Animations are time-based animations that use one or more key frames to specify how the animated value should change over time. The frames represent markers, allowing you to define what the animated value should be at a specific time.\n\n### Creating your animation and KeyFrames\n\nTo construct a KeyFrame Animation, use one of the constructor methods of the Compositor class that correlates to the structure type of the property you wish to animate.\n\n-   [**CreateColorKeyFrameAnimation**](https://msdn.microsoft.com/library/windows/apps/Mt589424)\n-   [**CreateQuaternionKeyFrameAnimation**](https://msdn.microsoft.com/library/windows/apps/Mt517858)\n-   [**CreateScalarKeyFrameAnimation**](https://msdn.microsoft.com/library/windows/apps/Dn706803)\n-   [**CreateVector2KeyFrameAnimation**](https://msdn.microsoft.com/library/windows/apps/Dn706806)\n-   [**CreateVector3KeyFrameAnimation**](https://msdn.microsoft.com/library/windows/apps/Dn706807)\n-   [**CreateVector4KeyFrameAnimation**](https://msdn.microsoft.com/library/windows/apps/Dn706808)\n\nFor example, the following snippet creates a Vector3 keyframe animation:\n\n```cs\nvar animation = _compositor.CreateVector3KeyFrameAnimation();\n```\n\nEach KeyFrame is constructed by calling the InsertKeyFrame method of a KeyFrameAnimation and specifying two components and optionally a third component:\n\n-   Time: normalized progress state of the KeyFrame between 0.0 – 1.0\n-   Value: specific value of the animating value at the time state\n-   (Optional) Easing function: function to describe interpolation between previous and current KeyFrame (discussed later on)\n\nFor example, the following snippet inserts a keyframe in a Vector3KeyFrameAnimation that will triggered half way through the animation:\n\n```cs\nanimation.InsertKeyFrame(0.5f, new Vector3(50.0f, 80.0f, 0.0f));\n```\n\n### KeyFrame Properties\n\nOnce you've defined your KeyFrame Animation and the individual KeyFrames, you are able to define multiple properties of your animation:\n\n-   DelayTime – time before an animation starts after StartAnimation() is called\n-   Duration – duration of the animation\n-   IterationBehavior – count or infinite repeat behavior for an animation\n-   IterationCount – number of finite times a KeyFrame Animation will repeat\n-   KeyFrame Count – number of KeyFrames in a particular KeyFrameAnimation\n-   StopBehavior – specifies the behavior of an animating property value when StopAnimation is called.\n\nFor example, the following snippet sets the duration of the animation to five seconds:\n\n```cs\nanimation.Duration = TimeSpan.FromSeconds(5);\n```\n\n### Easing Functions\n\nA key frame easing function, a CompositionEasingFunction, indicates how intermediate values progress from the previous key frame value to the current key frame value. If you do not provide an easing function for the KeyFrame, a default curve will be used.\n\nThere are two types of easing functions supported:\n\n-   Linear ([**LinearEasingFunction**](https://msdn.microsoft.com/library/windows/apps/Dn706839))\n-   Cubic Bezier ([**CubicBezierEasingFunction**](https://msdn.microsoft.com/library/windows/apps/Dn706812))\n\nTo create an easing function, use either the [**CreateLinearEasingFunction**](https://msdn.microsoft.com/library/windows/apps/Dn706801) or [**CreateCubicBezierEasingFunction**](https://msdn.microsoft.com/library/windows/apps/Dn706791) method of the [**Compositor**](https://msdn.microsoft.com/library/windows/apps/Dn706761) class:\n\n```cs\nvar linear = _compositor.CreateLinearEasingFunction();\nvar easeIn = _compositor.CreateCubicBezierEasingFunction(new Vector2(0.5f, 0.0f), new Vector2(1.0f, 1.0f));\n```\n\nNote: A useful tool for generating the points for your Cubic Bezier can be found here.\n\nTo add your easing function into your KeyFrame, simply add in the third parameter to the KeyFrame when inserting it into the Animation:\n\n```cs\nanimation.InsertKeyFrame(0.5f, new Vector3(50.0f, 80.0f, 0.0f), easeIn);\n```\n\n### Starting and Stopping KeyFrame Animations\n\nAfter you have defined your animation, KeyFrames and properties, you are ready to connect the animation to the property you want to animate. You connect your animation to the property you plan to animate by calling [**StartAnimation**](https://msdn.microsoft.com/library/windows/apps/Mt590840) on the [**Visual**](https://msdn.microsoft.com/library/windows/apps/Dn706858) object the property belongs to.\n\nThe general syntax and an example is as follows:\n\n```cs\ntargetVisual.StartAnimation(“Offset”, animation);\n```\n\nAfter starting your animation, you also have the ability to stop and disconnect it as well. This is done by using the [**StopAnimation**](https://msdn.microsoft.com/library/windows/apps/Mt590841) method and specifying the property you want to stop animating.\n\nFor example:\n\n```cs\ntargetVisual.StopAnimation(“Offset”);\n```\n\n### Animation Completion Events\n\nKeyFrame animations have a defined end, unlike Expression Animations, which are conditional. Developers can determine when groups or a single KeyFrame animation completes by using batches. Batches can be created or retrieved, depending on the batch object type, and are used to aggregate the end state of animations. Scoped batches are created while Commit batches are retrieved, the use of these different batches are described later.\n\nA batch completion event fires when all animations within the batch have completed. The time it takes for a batch's completion event to fire depends on the longest or most delayed animation in the batch. Aggregating end states is useful when you need to know when groups of select animations complete in order to schedule other work.\n\n### Scoped batches\n\nTo aggregate a specific group or a single animation, you first need to create a Scoped batch by calling [**CreateScopedBatch**](https://msdn.microsoft.com/library/windows/apps/Mt589425).\n\n```cs\nmyScopedBatch = _compositor.CreateScopedBatch(CompositionBatchTypes.Animation);\n```\n\nAfter creating a Scoped batch, all started animations aggregate until the batch is explicitly suspended or ended using [**Suspend**](https://msdn.microsoft.com/library/windows/apps/Mt590848) or [**End**](https://msdn.microsoft.com/library/windows/apps/Mt590844).\n\nCalling [**Suspend**](https://msdn.microsoft.com/library/windows/apps/Mt590848) stops aggregating animation end states until [**Resume**](https://msdn.microsoft.com/library/windows/apps/Mt590847) is called. This allows you to explicitly exclude content from a given batch.\n\n```cs\nmyScopedBatch.Suspend();\n```\n\nIn order to complete your batch you must call [**End**](https://msdn.microsoft.com/library/windows/apps/Mt590844). Without an End call, the batch will remain open forever-collecting objects.\n\n```cs\nmyScopedBatch.End();\n```\n\nIf you want to know when a single animation ends, you need to create a Scoped batch, start the animation and end the batch.\n\nFor example:\n\n```cs\nmyScopedBatch = _compositor.CreateScopedBatch(CompositionBatchTypes.Animation);\nVisual.StartAnimation(“Opacity”, myAnimation);\nmyScopedBatch.End();\n```\n\n### Commit batches\n\nA commit batch is a batch that is implicitly created during the commit cycle. The current Commit batch can be retrieved by calling [**GetCommitBatch**](https://msdn.microsoft.com/library/windows/apps/Mt589430) at any time during the commit cycle. The commit cycle is defined as the time between updates from the compositor. Updates are queued until the system is ready to process the changes and draw bits to the screen. Titles do not control when commits happen. The Commit batch will aggregate all objects within the commit cycle, those before and after GetCommitBatch was called. There is only one Commit batch per commit cycle and you do not need to explicitly call [**End**](https://msdn.microsoft.com/library/windows/apps/Mt590844) on the commit batch.\n\n```cs\nmyCommitBatch = _compositor.GetCommitBatch(CompositionBatchTypes.Animation);\n```\n\n### Batch states\n\nTo determine if a batch is open to aggregating animations you can use the **IsActive** property. If the **IsEnded** property return true, you cannot add an animation to that specific batch. Scoped batches are “ended” when they have been explicitly ended by calling the [**End**](https://msdn.microsoft.com/library/windows/apps/Mt590844) method. Commit batches are ended when the current commit cycle has ended.\n\n## Expression Animations\n\nExpression Animations are animations that use a mathematical expression to specify how the animated value should be calculated for each frame. The expression language itself can reference properties from other composition objects. Unlike KeyFrame Animations, Expressions are not time-based and are processed each frame (if necessary). Expressions can be useful to describe more complex user experiences that can be processed by the Composition engine, for example sticky headers and parallax.\n\n### Creating your Expression\n\nTo create your expression, you call [**CreateExpressionAnimation**](https://msdn.microsoft.com/library/windows/apps/Mt187002) on your Compositor object and specifying the expression you want to use:\n\n```cs\nvar expression = _compositor.CreateExpressionAnimation(“INSERT_EXPRESSION_STRING”)\n```\n\n### Operators, Precedence and Associativity\n\nThe Expression language supports the following operators and adheres to operator precedence and associativity as defined in the C# Language Specification:\n\n-   Unary (-)\n-   Multiplicative (\\* /)\n-   Additive (- +)\n\nThe Expression language also supports the concept of per-component math operations. These member-access (x.y) operators are only supported on “primitive” types (Vector and Matrices). For example:\n\n```cs\nOffset.x + 5.0\n```\n\n### Property Parameters\n\nOne of the powerful components of the Expression language is being able use parameters as variables in the expression. The expression string can contain parameters which are replaced with either a constant value or are references to another object's property value when calculated. For example:\n\n```cs\nChildVisual.Offset.X / ParentVisual.Offset.Y\n```\n\nIn this example ChildOffset and ParentOffset are parameters that represent the offset property of two visuals. You define parameters using the **Set\\*Parameter** methods of the [**CompositionAnimation**](https://msdn.microsoft.com/library/windows/apps/Dn706708) class:\n\n-   To create a vector parameter you use [**SetVector2Parameter**](https://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.composition.compositionanimation.setvector2parameter.aspx), [**SetVector3Parameter**](https://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.composition.compositionanimation.setvector3parameter.aspx), or [**SetVector4Parameter**](https://msdn.microsoft.com/library/windows/apps/windows.ui.composition.compositionanimation.setvector4parameter).\n-   To create a matrix parameter you use [**SetMatrix3x2Parameter**](https://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.composition.compositionanimation.setmatrix3x2parameter.aspx), or [**SetMatrix4x4Parameter**](https://msdn.microsoft.com/library/windows/apps/windows.ui.composition.compositionanimation.setmatrix4x4parameter).\n-   to create a scalar parameter you use [**SetScalarParameter**](https://msdn.microsoft.com/library/windows/apps/windows.ui.composition.compositionanimation.setscalarparameter).\n-   To create a color parameter you use [**SetColorParameter**](https://msdn.microsoft.com/library/windows/apps/windows.ui.composition.compositionanimation.setcolorparameter).\n-   To create a quaternion parameter you use [**SetQuaternionParameter**](https://msdn.microsoft.com/library/windows/apps/windows.ui.composition.compositionanimation.setquaternionparameter).\n-   To create a reference parameter you use [**SetReferenceParameter**](https://msdn.microsoft.com/library/windows/apps/windows.ui.composition.compositionanimation.setreferenceparameter).\n\nIn the Expression String above, we would need to create two parameters to define the two Visuals:\n\n```cs\nExpression.SetReferenceParameter(“ChildVisual”, childVisual);\nExpression.SetReferenceParameter(“ParentVisual”, parentVisual);\n```\n\n### Expression Helper Functions\n\nIn addition to having access to operators and property parameters, you also have access to the full helper function library of the expression language. You can find the full list of helper functions in the remarks section of the [**ExpressionAnimation**](https://msdn.microsoft.com/library/windows/apps/Dn706817) class, but here are a few:\n\n-   Max (Scalar value1, Scalar value2)\n-   Scale (Vector3 value, Scalar factor)\n-   Transform(Vector2 value, Matrix 3x2 matrix)\n\nHere’s a more complex expression string example that uses the Clamp helper function:\n\n```cs\nClamp((scroller.Offset.y * -1.0) – container.Offset.y, 0, container.Size.y – header.Size.y)\n```\n\n### Starting and stopping your Expression Animation\n\nTo start and stop your Expression Animations, you use the same functions ([**StartAnimation**](https://msdn.microsoft.com/library/windows/apps/Mt590840), [**StopAnimation**](https://msdn.microsoft.com/library/windows/apps/Mt590841)) as you do with KeyFrame Animations. Note: Expression Animations will continue to run until they are stopped using **StopAnimation** – unlike KeyFrame Animations, they do not have a finite duration.\n\n### Property Sets\n\nIn addition to being able to reference properties of other Composition objects, you also have the ability to create and store property values of your own that can be used across multiple animations. Property sets are represented by the [**CompositionPropertySet**](https://msdn.microsoft.com/library/windows/apps/Dn706772) class. Property sets allow you to create a property with a value and reference it later in an expression or even hook it up as the target of a KeyFrame Animation.\n\nTo create a property set, use the [**CreatePropertySet**](https://msdn.microsoft.com/library/windows/apps/Dn706802) method of the Compositor class. For example:\n\n```cs\n_sharedProperties = _compositor.CreatePropertySet();\n```\n\nOnce you’ve created your property set, you can add a property and value to it using one of the **Insert\\*** methods of [**CompositionPropertySet**](https://msdn.microsoft.com/library/windows/apps/Dn706772). For example:\n\n```cs\n_sharedProperties.InsertVector3(“NewOffset”, offset);\n```\n\nAfter you've created your expression animation, you can reference properties from the property set in the expression string with the use of a reference parameter. For example:\n\n```cs\nvar expression = _compositor.CreateExpressionAnimation(“sharedProperties.NewOffset”);\nexpression.SetReferenceParameter(“sharedProperties”, _sharedProperties);\n```\n\n### Expression KeyFrames\n\nEarlier in this document, we described how you create KeyFrame Animations and their respective KeyFrames. In addition to making the traditional KeyFrame with a normalized time and value component, you are also able to define expression KeyFrames.\n\nInstead of defining an explicit value for a particular time in the KeyFrame, we are able to use the expression syntax to describe how the value should be calculated at this particular point in the KeyFrame timeline. You are able to mix and match expression KeyFrames with basic KeyFrames in your KeyFrame Animation.\n\n### Constructing Expression KeyFrames\n\nSimilar to traditional KeyFrames, expression KeyFrames are constructed by specifying 2 components:\n\n-   Time: normalized time state of the KeyFrame between 0.0 – 1.0\n-   Value: The expression string used to describe how the value should be calculated\n\nFor example, the following snippet uses a combination of both regular and expression KeyFrames:\n\n```cs\nvar animation = _compositor.CreateScalarKeyFrameAnimation();\nanimation.InsertExpressionKeyFrame(0.25, “VisualBOffset.X / VisualAOffset.Y”);\nanimation.InsertKeyFrame(1.00f, 0.8f);\n```\n\n### Using current and starting values\n\nIn the expression language, it is possible to reference both the current and the starting value of an animation. These values are pre-fixed in the expression language with “this”:\n\n-   this.CurrentValue\n-   this.StartingValue\n\nAn example of using these in an Expression KeyFrame:\n\n```cs\nanimation.InsertExpressionKeyFrame(0.0f, “this.CurrentValue + delta”);\n```\n\n### Conditional Expressions\n\nIn addition to supporting basic mathematical expressions, you can also define a conditional expression using a ternary operator:\n\n```cs\n(condition ? first_expression : second_expression)\n```\n\nWithin the expressions themselves, the following conditional operators are supported in the condition statement:\n\n-   Equals (==)\n-   Not Equals (!=)\n-   Less than (<)\n-   Less than or equal to (<=)\n-   Great than (>)\n-   Great than or equal to (>=)\n\nFinally, the following conjunctions are supported as operators or functions in the condition statement:\n\n-   Not: ! / Not(bool1)\n-   And: && / And(bool1, bool2)\n-   Or: || / Or(bool1, bool2)\n\nThe following snippet shows an example of using conditionals in an expression:\n\n```cs\nvar expression = _compositor.CreateExpressionAnimation(“target.Offset.x > 50 ? 0.0f +   (target.Offset.x / parent.Offset.x) : 1.0f”);\n```\n\n \n\n \n\n\n\n\n"}