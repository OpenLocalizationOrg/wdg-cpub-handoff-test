{"nodes":[{"content":"Converting WDK 8.1 Projects to WDK 10","pos":[0,37]},{"content":"This topic describes how to convert a driver project that was created using Microsoft Visual Studio 2013 and Windows Driver Kit (WDK) 8.1 to a driver project that builds in Microsoft Visual Studio 2015 with the Windows Driver Kit (WDK) 10.","pos":[142,381]},{"content":"Visual Studio 2015 has new compiler warnings and errors.","pos":[383,439]},{"content":"Even if your driver project built with no errors in Visual Studio 2013, you might see errors when you build it in Visual Studio 2015.","pos":[440,573]},{"content":"Use these steps to convert the projects in a driver solution.","pos":[575,636]},{"content":"In Visual Studio 2015, open the legacy driver solution.","pos":[642,697]},{"content":"Visual Studio automatically runs ProjectUpgradeTool to convert the projects in this solution.","pos":[703,796]},{"content":"You can also run this tool from the command line.","pos":[797,846]},{"content":"By default, when you install the WDK, ProjectUpgradeTool.exe installs in Windows Kits\\\\10\\\\bin\\\\x86.","pos":[847,947]},{"content":"Visual Studio opens a <bpt id=\"p1\">**</bpt>Review Solution Actions<ept id=\"p1\">**</ept> dialog with the title <bpt id=\"p2\">**</bpt>Upgrade VC++ Compiler and Libraries<ept id=\"p2\">**</ept>.","pos":[953,1065],"source":"Visual Studio opens a **Review Solution Actions** dialog with the title **Upgrade VC++ Compiler and Libraries**."},{"content":"Click <bpt id=\"p1\">**</bpt>OK<ept id=\"p1\">**</ept> and Visual Studio attempts to upgrade all projects in the solution.","pos":[1066,1146],"source":" Click **OK** and Visual Studio attempts to upgrade all projects in the solution."},{"pos":[1152,1226],"content":"If you see a <bpt id=\"p1\">**</bpt>File Modification Detected<ept id=\"p1\">**</ept> dialog, choose <bpt id=\"p2\">**</bpt>Reload All<ept id=\"p2\">**</ept>.","source":"If you see a **File Modification Detected** dialog, choose **Reload All**."},{"content":"In the Solution Explorer pane, right-click the driver project name and choose <bpt id=\"p1\">**</bpt>Properties<ept id=\"p1\">**</ept>.","pos":[1232,1325],"source":"In the Solution Explorer pane, right-click the driver project name and choose **Properties**."},{"content":"Click the <bpt id=\"p1\">**</bpt>Configuration Manager<ept id=\"p1\">**</ept> button.","pos":[1326,1369],"source":" Click the **Configuration Manager** button."},{"content":"In the <bpt id=\"p1\">**</bpt>Active solution configuration<ept id=\"p1\">**</ept> list, choose <bpt id=\"p2\">**</bpt><ph id=\"ph1\">&amp;lt;</ph>New...<ph id=\"ph2\">&amp;gt;</ph><ept id=\"p2\">**</ept>.","pos":[1370,1443],"source":" In the **Active solution configuration** list, choose **&lt;New...&gt;**."},{"content":"Type a name and copy the settings from a Windows 8.1 project context.","pos":[1444,1513]},{"content":"Click <bpt id=\"p1\">**</bpt>OK<ept id=\"p1\">**</ept>.","pos":[1514,1527],"source":" Click **OK**."},{"content":"Typically, the converted solution contains two configuration profiles, one for debug (testing) and one for release.","pos":[1533,1648]},{"content":"To create a similar environment with WDK 10, simply choose <bpt id=\"p1\">**</bpt><ph id=\"ph1\">&amp;lt;</ph>New...<ph id=\"ph2\">&amp;gt;</ph><ept id=\"p1\">**</ept> twice.","pos":[1649,1733],"source":" To create a similar environment with WDK 10, simply choose **&lt;New...&gt;** twice."},{"content":"To create a debug profile, copy from the <bpt id=\"p1\">**</bpt>Win 8.1 Debug<ept id=\"p1\">**</ept> profile.","pos":[1734,1801],"source":" To create a debug profile, copy from the **Win 8.1 Debug** profile."},{"content":"To create a release profile, copy from the <bpt id=\"p1\">**</bpt>Win 8.1 Release<ept id=\"p1\">**</ept> profile.","pos":[1802,1873],"source":" To create a release profile, copy from the **Win 8.1 Release** profile."},{"content":"In WDK versions prior to WDK 10, your driver solution always needed a package project.","pos":[1879,1965]},{"content":"In WDK 10, you only need a package project if you are including multiple drivers in a driver package.","pos":[1966,2067]},{"content":"Use the following guidelines:","pos":[2068,2097]},{"content":"If you have only one driver in the solution and a package project exists, delete it.","pos":[2107,2191]},{"content":"If you have more than one driver in the solution, ensure that your solution contains a package project.","pos":[2201,2304]},{"content":"Then, for each driver project in the solution, open project properties and navigate to <bpt id=\"p1\">**</bpt>Configuration Properties <ph id=\"ph1\">&amp;gt;</ph> Driver Settings<ept id=\"p1\">**</ept>.","pos":[2305,2442],"source":" Then, for each driver project in the solution, open project properties and navigate to **Configuration Properties &gt; Driver Settings**."},{"content":"Set <bpt id=\"p1\">**</bpt>BuildPackage<ept id=\"p1\">**</ept> to <bpt id=\"p2\">**</bpt>No<ept id=\"p2\">**</ept>.","pos":[2443,2474],"source":" Set **BuildPackage** to **No**."},{"content":"If you are building from the command line, set <bpt id=\"p1\">**</bpt>/p:SupportsPackaging=false<ept id=\"p1\">**</ept>.","pos":[2475,2553],"source":" If you are building from the command line, set **/p:SupportsPackaging=false**."},{"content":"Again in driver project properties, choose <bpt id=\"p1\">**</bpt>Properties<ept id=\"p1\">**</ept>.","pos":[2559,2617],"source":"Again in driver project properties, choose **Properties**."},{"content":"Navigate to <bpt id=\"p1\">**</bpt>Configuration Properties <ph id=\"ph1\">&amp;gt;</ph> Driver Settings <ph id=\"ph2\">&amp;gt;</ph> General <ph id=\"ph3\">&amp;gt;</ph> Target OS Version<ept id=\"p1\">**</ept>.","pos":[2618,2716],"source":" Navigate to **Configuration Properties &gt; Driver Settings &gt; General &gt; Target OS Version**."},{"content":"Select Windows 10.","pos":[2717,2735]},{"content":"Verify that <bpt id=\"p1\">**</bpt>Target Platform<ept id=\"p1\">**</ept> is set to <bpt id=\"p2\">**</bpt>Desktop<ept id=\"p2\">**</ept>, and build the solution.","pos":[2741,2819],"source":"Verify that **Target Platform** is set to **Desktop**, and build the solution."},{"content":"Fix any errors that occur.","pos":[2820,2846]},{"pos":[2852,2935],"content":"Once the solution builds successfully, change <bpt id=\"p1\">**</bpt>Target Platform<ept id=\"p1\">**</ept> to <bpt id=\"p2\">**</bpt>Universal<ept id=\"p2\">**</ept>.","source":"Once the solution builds successfully, change **Target Platform** to **Universal**."},{"content":"Build the solution again.","pos":[2941,2966]},{"content":"At this point, the only errors are from the ApiValidator tool, which checks if the driver calls any non-universal functionality.","pos":[2967,3095]},{"content":"Replace any calls to non-universal DDIs with calls to universal DDIs.","pos":[3096,3165]},{"pos":[3171,3288],"content":"For more information about ApiValidator, see <bpt id=\"p1\">[</bpt>Validating Universal Windows drivers<ept id=\"p1\">](validating_universal_drivers.md)</ept>.","source":"For more information about ApiValidator, see [Validating Universal Windows drivers](validating_universal_drivers.md)."},{"pos":[3294,3456],"content":"To learn how to determine the target platform for a given DDI, see <bpt id=\"p1\">[</bpt>Target platform on MSDN driver reference pages<ept id=\"p1\">](windows_10_editions_for_universal_drivers.md)</ept>.","source":"To learn how to determine the target platform for a given DDI, see [Target platform on MSDN driver reference pages](windows_10_editions_for_universal_drivers.md)."},{"pos":[3464,4422],"content":"<bpt id=\"p1\">[</bpt>Send comments about this topic to Microsoft<ept id=\"p1\">]</ept><bpt id=\"p2\">(mailto:wsddocfb@microsoft.com?subject=Documentation%20feedback%20[VsDriver\\vsdriver]:%20Converting%20WDK%208.1%20Projects%20to%20WDK%2010%20%20RELEASE:%20%289/30/2015%29&amp;body=%0A%0APRIVACY%20STATEMENT%0A%0AWe%20use%20your%20feedback%20to%20improve%20the%20documentation.%20We%20don't%20use%20your%20email%20address%20for%20any%20other%20purpose,%20and%20we'll%20remove%20your%20email%20address%20from%20our%20system%20after%20the%20issue%20that%20you're%20reporting%20is%20fixed.%20While%20we're%20working%20to%20fix%20this%20issue,%20we%20might%20send%20you%20an%20email%20message%20to%20ask%20for%20more%20info.%20Later,%20we%20might%20also%20send%20you%20an%20email%20message%20to%20let%20you%20know%20that%20we've%20addressed%20your%20feedback.%0A%0AFor%20more%20info%20about%20Microsoft's%20privacy%20policy,%20see%20http://privacy.microsoft.com/en-us/default. \"</bpt>Send comments about this topic to Microsoft<ept id=\"p2\">\")</ept>","source":"[Send comments about this topic to Microsoft](mailto:wsddocfb@microsoft.com?subject=Documentation%20feedback%20[VsDriver\\vsdriver]:%20Converting%20WDK%208.1%20Projects%20to%20WDK%2010%20%20RELEASE:%20%289/30/2015%29&body=%0A%0APRIVACY%20STATEMENT%0A%0AWe%20use%20your%20feedback%20to%20improve%20the%20documentation.%20We%20don't%20use%20your%20email%20address%20for%20any%20other%20purpose,%20and%20we'll%20remove%20your%20email%20address%20from%20our%20system%20after%20the%20issue%20that%20you're%20reporting%20is%20fixed.%20While%20we're%20working%20to%20fix%20this%20issue,%20we%20might%20send%20you%20an%20email%20message%20to%20ask%20for%20more%20info.%20Later,%20we%20might%20also%20send%20you%20an%20email%20message%20to%20let%20you%20know%20that%20we've%20addressed%20your%20feedback.%0A%0AFor%20more%20info%20about%20Microsoft's%20privacy%20policy,%20see%20http://privacy.microsoft.com/en-us/default. \"Send comments about this topic to Microsoft\")"}],"content":"Converting WDK 8.1 Projects to WDK 10\n======================================================================================================\n\nThis topic describes how to convert a driver project that was created using Microsoft Visual Studio 2013 and Windows Driver Kit (WDK) 8.1 to a driver project that builds in Microsoft Visual Studio 2015 with the Windows Driver Kit (WDK) 10.\n\nVisual Studio 2015 has new compiler warnings and errors. Even if your driver project built with no errors in Visual Studio 2013, you might see errors when you build it in Visual Studio 2015.\n\nUse these steps to convert the projects in a driver solution.\n\n1.  In Visual Studio 2015, open the legacy driver solution.\n\n    Visual Studio automatically runs ProjectUpgradeTool to convert the projects in this solution. You can also run this tool from the command line. By default, when you install the WDK, ProjectUpgradeTool.exe installs in Windows Kits\\\\10\\\\bin\\\\x86.\n\n    Visual Studio opens a **Review Solution Actions** dialog with the title **Upgrade VC++ Compiler and Libraries**. Click **OK** and Visual Studio attempts to upgrade all projects in the solution.\n\n    If you see a **File Modification Detected** dialog, choose **Reload All**.\n\n2.  In the Solution Explorer pane, right-click the driver project name and choose **Properties**. Click the **Configuration Manager** button. In the **Active solution configuration** list, choose **&lt;New...&gt;**. Type a name and copy the settings from a Windows 8.1 project context. Click **OK**.\n\n    Typically, the converted solution contains two configuration profiles, one for debug (testing) and one for release. To create a similar environment with WDK 10, simply choose **&lt;New...&gt;** twice. To create a debug profile, copy from the **Win 8.1 Debug** profile. To create a release profile, copy from the **Win 8.1 Release** profile.\n\n3.  In WDK versions prior to WDK 10, your driver solution always needed a package project. In WDK 10, you only need a package project if you are including multiple drivers in a driver package. Use the following guidelines:\n\n    -   If you have only one driver in the solution and a package project exists, delete it.\n\n    -   If you have more than one driver in the solution, ensure that your solution contains a package project. Then, for each driver project in the solution, open project properties and navigate to **Configuration Properties &gt; Driver Settings**. Set **BuildPackage** to **No**. If you are building from the command line, set **/p:SupportsPackaging=false**.\n\n4.  Again in driver project properties, choose **Properties**. Navigate to **Configuration Properties &gt; Driver Settings &gt; General &gt; Target OS Version**. Select Windows 10.\n\n    Verify that **Target Platform** is set to **Desktop**, and build the solution. Fix any errors that occur.\n\n5.  Once the solution builds successfully, change **Target Platform** to **Universal**.\n\n    Build the solution again. At this point, the only errors are from the ApiValidator tool, which checks if the driver calls any non-universal functionality. Replace any calls to non-universal DDIs with calls to universal DDIs.\n\n    For more information about ApiValidator, see [Validating Universal Windows drivers](validating_universal_drivers.md).\n\n    To learn how to determine the target platform for a given DDI, see [Target platform on MSDN driver reference pages](windows_10_editions_for_universal_drivers.md).\n\n \n\n \n\n[Send comments about this topic to Microsoft](mailto:wsddocfb@microsoft.com?subject=Documentation%20feedback%20[VsDriver\\vsdriver]:%20Converting%20WDK%208.1%20Projects%20to%20WDK%2010%20%20RELEASE:%20%289/30/2015%29&body=%0A%0APRIVACY%20STATEMENT%0A%0AWe%20use%20your%20feedback%20to%20improve%20the%20documentation.%20We%20don't%20use%20your%20email%20address%20for%20any%20other%20purpose,%20and%20we'll%20remove%20your%20email%20address%20from%20our%20system%20after%20the%20issue%20that%20you're%20reporting%20is%20fixed.%20While%20we're%20working%20to%20fix%20this%20issue,%20we%20might%20send%20you%20an%20email%20message%20to%20ask%20for%20more%20info.%20Later,%20we%20might%20also%20send%20you%20an%20email%20message%20to%20let%20you%20know%20that%20we've%20addressed%20your%20feedback.%0A%0AFor%20more%20info%20about%20Microsoft's%20privacy%20policy,%20see%20http://privacy.microsoft.com/en-us/default. \"Send comments about this topic to Microsoft\")\n\n\n"}