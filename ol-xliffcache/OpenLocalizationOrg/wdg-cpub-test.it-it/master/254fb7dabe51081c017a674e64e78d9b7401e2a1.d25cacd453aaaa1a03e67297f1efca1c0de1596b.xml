{"nodes":[{"content":"Access the SD card","pos":[2,20]},{"content":"\\[ Updated for UWP apps on Windows 10.","pos":[22,60]},{"content":"For Windows 8.x articles, see the <bpt id=\"p1\">[</bpt>archive<ept id=\"p1\">](http://go.microsoft.com/fwlink/p/?linkid=619132)</ept> \\]","pos":[61,156],"source":" For Windows 8.x articles, see the [archive](http://go.microsoft.com/fwlink/p/?linkid=619132) \\]"},{"content":"You can store and access non-essential data on an optional microSD card, especially on low-cost mobile devices that have limited internal storage.","pos":[159,305]},{"content":"In most cases, you have to specify the <bpt id=\"p1\">**</bpt>removableStorage<ept id=\"p1\">**</ept> capability in the app manifest file before your app can store and access files on the SD card.","pos":[307,461],"source":"In most cases, you have to specify the **removableStorage** capability in the app manifest file before your app can store and access files on the SD card."},{"content":"Typically you also have to register to handle the type of files that your app stores and accesses.","pos":[462,560]},{"content":"You can store and access files on the optional SD card by using the following methods:","pos":[562,648]},{"content":"File pickers.","pos":[652,665]},{"pos":[669,758],"content":"The <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>Windows.Storage<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/br227346)</ept> APIs.","source":"The [**Windows.Storage**](https://msdn.microsoft.com/library/windows/apps/br227346) APIs."},{"content":"What you can and can't access on the SD card","pos":[763,807]},{"content":"What you can access","pos":[813,832]},{"content":"Your app can only read and write files of file types that the app has registered to handle in the app manifest file.","pos":[836,952]},{"content":"Your app can also create and manage folders.","pos":[956,1000]},{"content":"What you can't access","pos":[1006,1027]},{"content":"Your app can't see or access system folders and the files that they contain.","pos":[1031,1107]},{"content":"Your app can't see files that are marked with the Hidden attribute.","pos":[1111,1178]},{"content":"The Hidden attribute is typically used to reduce the risk of deleting data accidentally.","pos":[1179,1267]},{"content":"Your app can't see or access the Documents library by using <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>KnownFolders.DocumentsLibrary<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/br227152)</ept>.","pos":[1271,1425],"source":"Your app can't see or access the Documents library by using [**KnownFolders.DocumentsLibrary**](https://msdn.microsoft.com/library/windows/apps/br227152)."},{"content":"However you can access the Documents library on the SD card by traversing the file system.","pos":[1426,1516]},{"content":"Security and privacy considerations","pos":[1521,1556]},{"content":"When an app saves files in a global location on the SD card, those files are not encrypted so they are typically accessible to other apps.","pos":[1558,1696]},{"content":"While the SD card is in the device, your files are accessible to other apps that have registered to handle the same file type.","pos":[1700,1826]},{"content":"When the SD card is removed from the device and opened from a PC, your files are visible in File Explorer and accessible to other apps.","pos":[1830,1965]},{"pos":[1967,2172],"content":"When an app installed on the SD card saves files in its <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>LocalFolder<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/br241621)</ept>, however, those files are encrypted and are not accessible to other apps.","source":"When an app installed on the SD card saves files in its [**LocalFolder**](https://msdn.microsoft.com/library/windows/apps/br241621), however, those files are encrypted and are not accessible to other apps."},{"content":"Requirements for accessing files on the SD card","pos":[2177,2224]},{"content":"To access files on the SD card, typically you have to specify the following things.","pos":[2226,2309]},{"pos":[2315,2397],"content":"You have to specify the <bpt id=\"p1\">**</bpt>removableStorage<ept id=\"p1\">**</ept> capability in the app manifest file .","source":"You have to specify the **removableStorage** capability in the app manifest file ."},{"content":"You also have to register to handle the file extensions associated with the type of media that you want to access.","pos":[2402,2516]},{"pos":[2518,2734],"content":"Use the preceding method also to access media files on the SD card without referencing a known folder like <bpt id=\"p1\">**</bpt>KnownFolders.MusicLibrary<ept id=\"p1\">**</ept>, or to access media files that are stored outside of the media library folders.","source":"Use the preceding method also to access media files on the SD card without referencing a known folder like **KnownFolders.MusicLibrary**, or to access media files that are stored outside of the media library folders."},{"content":"To access media files stored in the media libraries—Music, Photos, or Videos—by using known folders, you only have to specify the associated capability in the app manifest file—<bpt id=\"p1\">**</bpt>musicLibrary<ept id=\"p1\">**</ept>, <bpt id=\"p2\">**</bpt>picturesLibrary<ept id=\"p2\">**</ept>, or <bpt id=\"p3\">**</bpt>videoLibrary<ept id=\"p3\">**</ept>.","pos":[2736,2972],"source":"To access media files stored in the media libraries—Music, Photos, or Videos—by using known folders, you only have to specify the associated capability in the app manifest file—**musicLibrary**, **picturesLibrary**, or **videoLibrary**."},{"content":"You do not have to specify the <bpt id=\"p1\">**</bpt>removableStorage<ept id=\"p1\">**</ept> capability.","pos":[2973,3036],"source":" You do not have to specify the **removableStorage** capability."},{"content":"For more info, see <bpt id=\"p1\">[</bpt>Files and folders in the Music, Pictures, and Videos libraries<ept id=\"p1\">](quickstart-managing-folders-in-the-music-pictures-and-videos-libraries.md)</ept>.","pos":[3037,3196],"source":" For more info, see [Files and folders in the Music, Pictures, and Videos libraries](quickstart-managing-folders-in-the-music-pictures-and-videos-libraries.md)."},{"content":"Accessing files on the SD card","pos":[3201,3231]},{"content":"Getting a reference to the SD card","pos":[3237,3271]},{"content":"The <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>KnownFolders.RemovableDevices<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/br227158)</ept> folder is the logical root <bpt id=\"p3\">[</bpt><bpt id=\"p4\">**</bpt>StorageFolder<ept id=\"p4\">**</ept><ept id=\"p3\">](https://msdn.microsoft.com/library/windows/apps/br227230)</ept> for the set of removable devices currently connected to the device.","pos":[3273,3543],"source":"The [**KnownFolders.RemovableDevices**](https://msdn.microsoft.com/library/windows/apps/br227158) folder is the logical root [**StorageFolder**](https://msdn.microsoft.com/library/windows/apps/br227230) for the set of removable devices currently connected to the device."},{"content":"If an SD card is present, the first (and only) <bpt id=\"p1\">**</bpt>StorageFolder<ept id=\"p1\">**</ept> underneath the <bpt id=\"p2\">**</bpt>KnownFolders.RemovableDevices<ept id=\"p2\">**</ept> folder represents the SD card.","pos":[3544,3688],"source":" If an SD card is present, the first (and only) **StorageFolder** underneath the **KnownFolders.RemovableDevices** folder represents the SD card."},{"pos":[3690,3873],"content":"Use code like the following to determine whether an SD card is present and to get a reference to it as a <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>StorageFolder<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/br227230)</ept>.","source":"Use code like the following to determine whether an SD card is present and to get a reference to it as a [**StorageFolder**](https://msdn.microsoft.com/library/windows/apps/br227230)."},{"content":"Querying the contents of the SD card","pos":[4505,4541]},{"content":"The SD card can contain many folders and files that aren't recognized as known folders and can't be queried by using a location from <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>KnownFolders<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/br227151)</ept>.","pos":[4543,4753],"source":"The SD card can contain many folders and files that aren't recognized as known folders and can't be queried by using a location from [**KnownFolders**](https://msdn.microsoft.com/library/windows/apps/br227151)."},{"content":"To find files, your app has to enumerate the contents of the card by traversing the file system recursively.","pos":[4754,4862]},{"content":"Use <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>GetFilesAsync (CommonFileQuery.DefaultQuery)<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/br227274)</ept> and <bpt id=\"p3\">[</bpt><bpt id=\"p4\">**</bpt>GetFoldersAsync (CommonFolderQuery.DefaultQuery)<ept id=\"p4\">**</ept><ept id=\"p3\">](https://msdn.microsoft.com/library/windows/apps/br227281)</ept> to get the contents of the SD card efficiently.","pos":[4863,5140],"source":" Use [**GetFilesAsync (CommonFileQuery.DefaultQuery)**](https://msdn.microsoft.com/library/windows/apps/br227274) and [**GetFoldersAsync (CommonFolderQuery.DefaultQuery)**](https://msdn.microsoft.com/library/windows/apps/br227281) to get the contents of the SD card efficiently."},{"content":"We recommend that you use a background thread to traverse the SD card.","pos":[5142,5212]},{"content":"An SD card may contain many gigabytes of data.","pos":[5213,5259]},{"content":"Your app can also require the user to choose specific folders by using the folder picker.","pos":[5261,5350]},{"pos":[5352,5578],"content":"When you access the file system on the SD card with a path that you derived from <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>KnownFolders.RemovableDevices<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/br227158)</ept>, the following methods behave in the following way.","source":"When you access the file system on the SD card with a path that you derived from [**KnownFolders.RemovableDevices**](https://msdn.microsoft.com/library/windows/apps/br227158), the following methods behave in the following way."},{"pos":[5584,5844],"content":"The <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>GetFilesAsync<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/br227273)</ept> method returns the union of the file extensions that you have registered to handle and the file extensions associated with any media library capabilities that you have specified.","source":"The [**GetFilesAsync**](https://msdn.microsoft.com/library/windows/apps/br227273) method returns the union of the file extensions that you have registered to handle and the file extensions associated with any media library capabilities that you have specified."},{"pos":[5850,6045],"content":"The <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>GetFileFromPathAsync<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/br227206)</ept> method fails if you have not registered to handle the file extension of the file you are trying to access.","source":"The [**GetFileFromPathAsync**](https://msdn.microsoft.com/library/windows/apps/br227206) method fails if you have not registered to handle the file extension of the file you are trying to access."},{"content":"Identifying the individual SD card","pos":[6050,6084]},{"content":"When the SD card is first mounted, the operating system generates a unique identifier for the card.","pos":[6086,6185]},{"content":"It stores this ID in a file in the WPSystem folder at the root of the card.","pos":[6186,6261]},{"content":"An app can use this ID to determine whether it recognizes the card.","pos":[6262,6329]},{"content":"If an app recognizes the card, the app may be able to postpone certain operations that were completed previously.","pos":[6330,6443]},{"content":"However the contents of the card may have changed since the card was last accessed by the app.","pos":[6444,6538]},{"content":"For example, consider an app that indexes ebooks.","pos":[6540,6589]},{"content":"If the app has previously scanned the whole SD card for ebook files and created an index of the ebooks, it can display the list immediately if the card is reinserted and the app recognizes the card.","pos":[6590,6788]},{"content":"Separately it can start a low-priority background thread to search for new ebooks.","pos":[6789,6871]},{"content":"It can also handle a failure to find an ebook that existed previously when the user tries to access the deleted ebook.","pos":[6872,6990]},{"pos":[6992,7077],"content":"The name of the property that contains this ID is <bpt id=\"p1\">**</bpt>WindowsPhone.ExternalStorageId<ept id=\"p1\">**</ept>.","source":"The name of the property that contains this ID is **WindowsPhone.ExternalStorageId**."}],"content":"# Access the SD card\n\n\\[ Updated for UWP apps on Windows 10. For Windows 8.x articles, see the [archive](http://go.microsoft.com/fwlink/p/?linkid=619132) \\]\n\n\nYou can store and access non-essential data on an optional microSD card, especially on low-cost mobile devices that have limited internal storage.\n\nIn most cases, you have to specify the **removableStorage** capability in the app manifest file before your app can store and access files on the SD card. Typically you also have to register to handle the type of files that your app stores and accesses.\n\nYou can store and access files on the optional SD card by using the following methods:\n\n- File pickers.\n\n- The [**Windows.Storage**](https://msdn.microsoft.com/library/windows/apps/br227346) APIs.\n\n## What you can and can't access on the SD card\n\n### What you can access\n\n- Your app can only read and write files of file types that the app has registered to handle in the app manifest file.\n\n- Your app can also create and manage folders.\n\n### What you can't access\n\n- Your app can't see or access system folders and the files that they contain.\n\n- Your app can't see files that are marked with the Hidden attribute. The Hidden attribute is typically used to reduce the risk of deleting data accidentally.\n\n- Your app can't see or access the Documents library by using [**KnownFolders.DocumentsLibrary**](https://msdn.microsoft.com/library/windows/apps/br227152). However you can access the Documents library on the SD card by traversing the file system.\n\n## Security and privacy considerations\n\nWhen an app saves files in a global location on the SD card, those files are not encrypted so they are typically accessible to other apps.\n\n- While the SD card is in the device, your files are accessible to other apps that have registered to handle the same file type.\n\n- When the SD card is removed from the device and opened from a PC, your files are visible in File Explorer and accessible to other apps.\n\nWhen an app installed on the SD card saves files in its [**LocalFolder**](https://msdn.microsoft.com/library/windows/apps/br241621), however, those files are encrypted and are not accessible to other apps.\n\n## Requirements for accessing files on the SD card\n\nTo access files on the SD card, typically you have to specify the following things.\n\n1.  You have to specify the **removableStorage** capability in the app manifest file .\n2.  You also have to register to handle the file extensions associated with the type of media that you want to access.\n\nUse the preceding method also to access media files on the SD card without referencing a known folder like **KnownFolders.MusicLibrary**, or to access media files that are stored outside of the media library folders.\n\nTo access media files stored in the media libraries—Music, Photos, or Videos—by using known folders, you only have to specify the associated capability in the app manifest file—**musicLibrary**, **picturesLibrary**, or **videoLibrary**. You do not have to specify the **removableStorage** capability. For more info, see [Files and folders in the Music, Pictures, and Videos libraries](quickstart-managing-folders-in-the-music-pictures-and-videos-libraries.md).\n\n## Accessing files on the SD card\n\n### Getting a reference to the SD card\n\nThe [**KnownFolders.RemovableDevices**](https://msdn.microsoft.com/library/windows/apps/br227158) folder is the logical root [**StorageFolder**](https://msdn.microsoft.com/library/windows/apps/br227230) for the set of removable devices currently connected to the device. If an SD card is present, the first (and only) **StorageFolder** underneath the **KnownFolders.RemovableDevices** folder represents the SD card.\n\nUse code like the following to determine whether an SD card is present and to get a reference to it as a [**StorageFolder**](https://msdn.microsoft.com/library/windows/apps/br227230).\n\n```csharp\nusing Windows.Storage;\n\n...\n\n            // Get the logical root folder for all external storage devices.\n            StorageFolder externalDevices = Windows.Storage.KnownFolders.RemovableDevices;\n\n            // Get the first child folder, which represents the SD card.\n            StorageFolder sdCard = (await externalDevices.GetFoldersAsync()).FirstOrDefault();\n\n            if (sdCard != null)\n            {\n                // An SD card is present and the sdCard variable now contains a reference to it.\n            }\n            else\n            {\n                // No SD card is present.\n            }\n```\n\n### Querying the contents of the SD card\n\nThe SD card can contain many folders and files that aren't recognized as known folders and can't be queried by using a location from [**KnownFolders**](https://msdn.microsoft.com/library/windows/apps/br227151). To find files, your app has to enumerate the contents of the card by traversing the file system recursively. Use [**GetFilesAsync (CommonFileQuery.DefaultQuery)**](https://msdn.microsoft.com/library/windows/apps/br227274) and [**GetFoldersAsync (CommonFolderQuery.DefaultQuery)**](https://msdn.microsoft.com/library/windows/apps/br227281) to get the contents of the SD card efficiently.\n\nWe recommend that you use a background thread to traverse the SD card. An SD card may contain many gigabytes of data.\n\nYour app can also require the user to choose specific folders by using the folder picker.\n\nWhen you access the file system on the SD card with a path that you derived from [**KnownFolders.RemovableDevices**](https://msdn.microsoft.com/library/windows/apps/br227158), the following methods behave in the following way.\n\n-   The [**GetFilesAsync**](https://msdn.microsoft.com/library/windows/apps/br227273) method returns the union of the file extensions that you have registered to handle and the file extensions associated with any media library capabilities that you have specified.\n\n-   The [**GetFileFromPathAsync**](https://msdn.microsoft.com/library/windows/apps/br227206) method fails if you have not registered to handle the file extension of the file you are trying to access.\n\n## Identifying the individual SD card\n\nWhen the SD card is first mounted, the operating system generates a unique identifier for the card. It stores this ID in a file in the WPSystem folder at the root of the card. An app can use this ID to determine whether it recognizes the card. If an app recognizes the card, the app may be able to postpone certain operations that were completed previously. However the contents of the card may have changed since the card was last accessed by the app.\n\nFor example, consider an app that indexes ebooks. If the app has previously scanned the whole SD card for ebook files and created an index of the ebooks, it can display the list immediately if the card is reinserted and the app recognizes the card. Separately it can start a low-priority background thread to search for new ebooks. It can also handle a failure to find an ebook that existed previously when the user tries to access the deleted ebook.\n\nThe name of the property that contains this ID is **WindowsPhone.ExternalStorageId**.\n\n```csharp\nusing Windows.Storage;\n\n...\n\n            // Get the logical root folder for all external storage devices.\n            StorageFolder externalDevices = Windows.Storage.KnownFolders.RemovableDevices;\n\n            // Get the first child folder, which represents the SD card.\n            StorageFolder sdCard = (await externalDevices.GetFoldersAsync()).FirstOrDefault();\n\n            if (sdCard != null)\n            {\n                var allProperties = sdCard.Properties;\n                IEnumerable<string> propertiesToRetrieve = new List<string> { \"WindowsPhone.ExternalStorageId\" };\n\n                var storageIdProperties = await allProperties.RetrievePropertiesAsync(propertiesToRetrieve);\n\n                string cardId = (string)storageIdProperties[\"WindowsPhone.ExternalStorageId\"];\n\n                if (...) // If cardID matches the cached ID of a recognized card.\n                {\n                    // Card is recognized. Index contents opportunistically.\n                }\n                else\n                {\n                    // Card is not recognized. Index contents immediately.\n                }\n            }\n```\n\n \n\n \n\n\n\n"}