{"nodes":[{"content":"Sensor orientation","pos":[2,20]},{"content":"\\[ Updated for UWP apps on Windows 10.","pos":[22,60]},{"content":"For Windows 8.x articles, see the <bpt id=\"p1\">[</bpt>archive<ept id=\"p1\">](http://go.microsoft.com/fwlink/p/?linkid=619132)</ept> \\]","pos":[61,156],"source":" For Windows 8.x articles, see the [archive](http://go.microsoft.com/fwlink/p/?linkid=619132) \\]"},{"content":"** Important APIs **","pos":[158,178]},{"content":"Windows.Devices.Sensors","pos":[187,210]},{"content":"Windows.Devices.Sensors.Custom","pos":[279,309]},{"content":"Sensor data from the <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>Accelerometer<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/BR225687)</ept>, <bpt id=\"p3\">[</bpt><bpt id=\"p4\">**</bpt>Gyrometer<ept id=\"p4\">**</ept><ept id=\"p3\">](https://msdn.microsoft.com/library/windows/apps/BR225718)</ept>, <bpt id=\"p5\">[</bpt><bpt id=\"p6\">**</bpt>Compass<ept id=\"p6\">**</ept><ept id=\"p5\">](https://msdn.microsoft.com/library/windows/apps/BR225705)</ept>, <bpt id=\"p7\">[</bpt><bpt id=\"p8\">**</bpt>Inclinometer<ept id=\"p8\">**</ept><ept id=\"p7\">](https://msdn.microsoft.com/library/windows/apps/BR225766)</ept>, and <bpt id=\"p9\">[</bpt><bpt id=\"p10\">**</bpt>OrientationSensor<ept id=\"p10\">**</ept><ept id=\"p9\">](https://msdn.microsoft.com/library/windows/apps/BR206371)</ept> classes is defined by their reference axes.","pos":[372,827],"source":"Sensor data from the [**Accelerometer**](https://msdn.microsoft.com/library/windows/apps/BR225687), [**Gyrometer**](https://msdn.microsoft.com/library/windows/apps/BR225718), [**Compass**](https://msdn.microsoft.com/library/windows/apps/BR225705), [**Inclinometer**](https://msdn.microsoft.com/library/windows/apps/BR225766), and [**OrientationSensor**](https://msdn.microsoft.com/library/windows/apps/BR206371) classes is defined by their reference axes."},{"content":"These axes are defined by the device's landscape orientation and rotate with the device as the user turns it.","pos":[828,937]},{"content":"If your app supports automatic rotation and reorients itself to accommodate the device as the user rotates it, you must adjust your sensor data for the rotation before using it.","pos":[938,1115]},{"content":"Display orientation vs device orientation","pos":[1120,1161]},{"content":"In order to understand the reference axes for sensors, you need to distinguish display orientation from device orientation.","pos":[1163,1286]},{"content":"Display orientation is the direction text and images are displayed on the screen whereas device orientation is the physical positioning of the device.","pos":[1287,1437]},{"content":"In the following picture, both the device and display orientation are in <bpt id=\"p1\">**</bpt>Landscape<ept id=\"p1\">**</ept>.","pos":[1438,1525],"source":" In the following picture, both the device and display orientation are in **Landscape**."},{"content":"Display and device orientation in Landscape","pos":[1529,1572]},{"pos":[1638,1730],"content":"The following picture shows both the display and device orientation in <bpt id=\"p1\">**</bpt>LandscapeFlipped<ept id=\"p1\">**</ept>.","source":"The following picture shows both the display and device orientation in **LandscapeFlipped**."},{"content":"Display and device orientation in LandscapeFlipped","pos":[1734,1784]},{"content":"The next picture shows the display orientation in Landscape while the device orientation is LandscapeFlipped.","pos":[1854,1963]},{"content":"Display orientation in Landscape while the device orientation is LandscapeFlipped","pos":[1967,2048]},{"content":"You can query the orientation values through the <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>DisplayInformation<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/Dn264258)</ept> class by using the <bpt id=\"p3\">[</bpt><bpt id=\"p4\">**</bpt>GetForCurrentView<ept id=\"p4\">**</ept><ept id=\"p3\">](https://msdn.microsoft.com/en-us/library/windows/apps/windows.graphics.display.displayinformation.getforcurrentview.aspx)</ept> method with the <bpt id=\"p5\">[</bpt><bpt id=\"p6\">**</bpt>CurrentOrientation<ept id=\"p6\">**</ept><ept id=\"p5\">](https://msdn.microsoft.com/en-us/library/windows/apps/windows.graphics.display.displayinformation.currentorientation.aspx)</ept> property.","pos":[2127,2597],"source":"You can query the orientation values through the [**DisplayInformation**](https://msdn.microsoft.com/library/windows/apps/Dn264258) class by using the [**GetForCurrentView**](https://msdn.microsoft.com/en-us/library/windows/apps/windows.graphics.display.displayinformation.getforcurrentview.aspx) method with the [**CurrentOrientation**](https://msdn.microsoft.com/en-us/library/windows/apps/windows.graphics.display.displayinformation.currentorientation.aspx) property."},{"content":"Then you can create logic by comparing against the <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>DisplayOrientations<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/BR226142)</ept> enumeration.","pos":[2598,2745],"source":" Then you can create logic by comparing against the [**DisplayOrientations**](https://msdn.microsoft.com/library/windows/apps/BR226142) enumeration."},{"content":"Remember that for every orientation you support, you have to support a conversion of the reference axes to that orientation.","pos":[2746,2870]},{"content":"Landscape-first vs portrait-first devices","pos":[2875,2916]},{"content":"Manufacturers produce both landscape-first and portrait-first devices.","pos":[2918,2988]},{"content":"When manufacturers integrate components into devices, they do so in a unified and consistent way so that all devices operate within the same reference frame.","pos":[2989,3146]},{"content":"The following table shows the sensor axes for both landscape-first and portrait first devices.","pos":[3147,3241]},{"content":"Orientation","pos":[3245,3256]},{"content":"Landscape-first","pos":[3259,3274]},{"content":"Portrait-first","pos":[3277,3291]},{"content":"Landscape","pos":[3349,3358]},{"content":"Landscape-first device in Landscape orientation","pos":[3365,3412]},{"content":"Portrait-first device in Landscape orientation","pos":[3471,3517]},{"content":"Portrait","pos":[3581,3589]},{"content":"Landscape-first device in Portrait orientation","pos":[3596,3642]},{"content":"Portrait-first device in Portrait orientation","pos":[3704,3749]},{"content":"**LandscapeFlipped **","pos":[3807,3828]},{"content":"Landscape-first device in LandscapeFlipped orientation","pos":[3833,3887]},{"content":"Portrait-first device in LandscapeFlipped orientation","pos":[3950,4003]},{"content":"PortraitFlipped","pos":[4067,4082]},{"content":"Landscape-first device in PortraitFlipped orientation","pos":[4089,4142]},{"content":"Portrait-first device in PortraitFlipped orientation","pos":[4204,4256]},{"content":"Devices broadcasting display and headless devices","pos":[4320,4369]},{"content":"Some devices have the ability to broadcast the display to another device.","pos":[4371,4444]},{"content":"For example, you could take a tablet and broadcast the display to a projector that will be in landscape orientation.","pos":[4445,4561]},{"content":"In this scenario, it is important to keep in mind that the device orientation is based on the original device, not the one presenting the display.","pos":[4562,4708]},{"content":"So an accelerometer would report data for the tablet.","pos":[4709,4762]},{"content":"Furthermore, some devices do not have a display.","pos":[4764,4812]},{"content":"With these devices, the default orientation for these devices is portrait.","pos":[4813,4887]},{"content":"Display orientation and compass heading","pos":[4892,4931]},{"content":"Compass heading depends upon the reference axes and so it changes with the device orientation.","pos":[4934,5028]},{"content":"You compensate based on the this table (assume the user is facing north).","pos":[5029,5102]},{"content":"Display orientation","pos":[5106,5125]},{"content":"Reference axis for compass heading","pos":[5128,5162]},{"content":"API compass heading when facing north","pos":[5165,5202]},{"content":"Compass heading compensation","pos":[5205,5233]},{"content":"Landscape","pos":[5371,5380]},{"content":"-Z","pos":[5393,5395]},{"content":"0","pos":[5398,5399]},{"content":"Heading","pos":[5404,5411]},{"content":"Portrait","pos":[5430,5438]},{"content":"Y","pos":[5453,5454]},{"content":"90","pos":[5457,5459]},{"content":"(Heading + 270) % 360","pos":[5463,5484]},{"content":"LandscapeFlipped","pos":[5490,5506]},{"content":"Z","pos":[5513,5514]},{"content":"180","pos":[5517,5520]},{"content":"(Heading + 180) % 360","pos":[5523,5544]},{"content":"PortraitFlipped","pos":[5549,5564]},{"content":"Y","pos":[5572,5573]},{"content":"270","pos":[5576,5579]},{"content":"(Heading + 90) % 360","pos":[5582,5602]},{"content":"Modify the compass heading as shown in the table in order to correctly display the heading.","pos":[5607,5698]},{"content":"The following code snippet demonstrates how to do this.","pos":[5699,5754]},{"content":"Display orientation with the accelerometer and gyrometer","pos":[6693,6749]},{"content":"This table converts accelerometer and gyrometer data for display orientation.","pos":[6751,6828]},{"content":"Reference axes","pos":[6832,6846]},{"content":"X","pos":[6857,6858]},{"content":"Y","pos":[6862,6863]},{"content":"Z","pos":[6866,6867]},{"content":"Landscape","pos":[6914,6923]},{"content":"X","pos":[6937,6938]},{"content":"Y","pos":[6942,6943]},{"content":"Z","pos":[6946,6947]},{"content":"Portrait","pos":[6954,6962]},{"content":"Y","pos":[6977,6978]},{"content":"-X","pos":[6981,6983]},{"content":"Z","pos":[6986,6987]},{"content":"LandscapeFlipped","pos":[6994,7010]},{"content":"-X","pos":[7016,7018]},{"content":"-Y","pos":[7021,7023]},{"content":"Z","pos":[7026,7027]},{"content":"PortraitFlipped","pos":[7034,7049]},{"content":"-Y","pos":[7056,7058]},{"content":"X","pos":[7062,7063]},{"content":"Z","pos":[7066,7067]},{"content":"The following code example applies these conversions to the gyrometer.","pos":[7071,7141]},{"content":"Display orientation and device orientation","pos":[8462,8504]},{"content":"The <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>OrientationSensor<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/BR206371)</ept> data must be changed in a different way.","pos":[8506,8632],"source":"The [**OrientationSensor**](https://msdn.microsoft.com/library/windows/apps/BR206371) data must be changed in a different way."},{"content":"Think of these different orientations as rotations counterclockwise to the Z axis, so we need to reverse the rotation to get back the user’s orientation.","pos":[8633,8786]},{"content":"For quaternion data, we can use Euler’s formula to define a rotation with a reference quaternion, and we can also use a reference rotation matrix.","pos":[8787,8933]},{"content":"Euler's formula<ph id=\"ph1\">](images/eulers-formula.png)</ph> To get the relative orientation you want, multiply the reference object against the absolute object.","pos":[8937,9081],"source":"Euler's formula](images/eulers-formula.png)\nTo get the relative orientation you want, multiply the reference object against the absolute object."},{"content":"Note that this math is not commutative.","pos":[9082,9121]},{"pos":[9125,9296],"content":"Multiply the reference object against the absolute object<ph id=\"ph1\">](images/orientation-formula.png)</ph> In the preceding expression, the absolute object is returned by the sensor data.","source":"Multiply the reference object against the absolute object](images/orientation-formula.png)\nIn the preceding expression, the absolute object is returned by the sensor data."},{"content":"Display orientation","pos":[9300,9319]},{"content":"Counterclockwise rotation around Z","pos":[9323,9357]},{"content":"Reference quaternion (reverse rotation)","pos":[9360,9399]},{"content":"Reference rotation matrix (reverse rotation)","pos":[9402,9446]},{"content":"Landscape","pos":[9605,9614]},{"content":"0","pos":[9626,9627]},{"content":"1 + 0i + 0j + 0k","pos":[9663,9679]},{"content":"\\[1 0 0","pos":[9705,9712]},{"content":"0 1 0","pos":[9718,9723]},{"content":"0 0 1\\]","pos":[9729,9736]},{"content":"Portrait","pos":[9757,9765]},{"content":"90","pos":[9778,9780]},{"content":"cos(-45⁰) + (i + j + k)*sin(-45⁰)","pos":[9815,9848]},{"content":"\\[0 1 0","pos":[9857,9864]},{"content":"-1 0 0","pos":[9869,9875]},{"content":"0 0 1]","pos":[9880,9886]},{"content":"LandscapeFlipped","pos":[9906,9922]},{"content":"180","pos":[9927,9930]},{"content":"0 - i - j - k","pos":[9964,9977]},{"content":"\\[1 0 0","pos":[10006,10013]},{"content":"0 1 0","pos":[10019,10024]},{"content":"0 0 1]","pos":[10030,10036]},{"content":"PortraitFlipped","pos":[10057,10072]},{"content":"270","pos":[10078,10081]},{"content":"cos(-135⁰) + (i + j + k)*sin(-135⁰)","pos":[10115,10150]},{"content":"\\[0 -1 0","pos":[10157,10165]},{"content":"1  0 0","pos":[10171,10177]},{"content":"0  0 1]","pos":[10183,10190]}],"content":"# Sensor orientation\n\n\\[ Updated for UWP apps on Windows 10. For Windows 8.x articles, see the [archive](http://go.microsoft.com/fwlink/p/?linkid=619132) \\]\n\n** Important APIs **\n\n-   [**Windows.Devices.Sensors**](https://msdn.microsoft.com/library/windows/apps/BR206408)\n-   [**Windows.Devices.Sensors.Custom**](https://msdn.microsoft.com/library/windows/apps/Dn895032)\n\nSensor data from the [**Accelerometer**](https://msdn.microsoft.com/library/windows/apps/BR225687), [**Gyrometer**](https://msdn.microsoft.com/library/windows/apps/BR225718), [**Compass**](https://msdn.microsoft.com/library/windows/apps/BR225705), [**Inclinometer**](https://msdn.microsoft.com/library/windows/apps/BR225766), and [**OrientationSensor**](https://msdn.microsoft.com/library/windows/apps/BR206371) classes is defined by their reference axes. These axes are defined by the device's landscape orientation and rotate with the device as the user turns it. If your app supports automatic rotation and reorients itself to accommodate the device as the user rotates it, you must adjust your sensor data for the rotation before using it.\n\n## Display orientation vs device orientation\n\nIn order to understand the reference axes for sensors, you need to distinguish display orientation from device orientation. Display orientation is the direction text and images are displayed on the screen whereas device orientation is the physical positioning of the device. In the following picture, both the device and display orientation are in **Landscape**.\n\n![Display and device orientation in Landscape](images/accelerometer-axis-orientation-landscape-with-text.png)\n\nThe following picture shows both the display and device orientation in **LandscapeFlipped**.\n\n![Display and device orientation in LandscapeFlipped](images/accelerometer-axis-orientation-landscape-180-with-text.png)\n\nThe next picture shows the display orientation in Landscape while the device orientation is LandscapeFlipped.\n\n![Display orientation in Landscape while the device orientation is LandscapeFlipped](images/accelerometer-axis-orientation-landscape-180-with-text-inverted.png)\n\nYou can query the orientation values through the [**DisplayInformation**](https://msdn.microsoft.com/library/windows/apps/Dn264258) class by using the [**GetForCurrentView**](https://msdn.microsoft.com/en-us/library/windows/apps/windows.graphics.display.displayinformation.getforcurrentview.aspx) method with the [**CurrentOrientation**](https://msdn.microsoft.com/en-us/library/windows/apps/windows.graphics.display.displayinformation.currentorientation.aspx) property. Then you can create logic by comparing against the [**DisplayOrientations**](https://msdn.microsoft.com/library/windows/apps/BR226142) enumeration. Remember that for every orientation you support, you have to support a conversion of the reference axes to that orientation.\n\n## Landscape-first vs portrait-first devices\n\nManufacturers produce both landscape-first and portrait-first devices. When manufacturers integrate components into devices, they do so in a unified and consistent way so that all devices operate within the same reference frame. The following table shows the sensor axes for both landscape-first and portrait first devices.\n\n| Orientation | Landscape-first | Portrait-first |\n|-------------|-----------------|----------------|\n| **Landscape** | ![Landscape-first device in Landscape orientation](images/accelerometer-axis-orientation-landscape.png) | ![Portrait-first device in Landscape orientation](images/accelerometer-axis-orientation-portrait-270.png) |\n| **Portrait** | ![Landscape-first device in Portrait orientation](images/accelerometer-axis-orientation-landscape-90.png) | ![Portrait-first device in Portrait orientation](images/accelerometer-axis-orientation-portrait.png) |\n| **LandscapeFlipped ** | ![Landscape-first device in LandscapeFlipped orientation](images/accelerometer-axis-orientation-landscape-180.png) | ![Portrait-first device in LandscapeFlipped orientation](images/accelerometer-axis-orientation-portrait-90.png) | \n| **PortraitFlipped** | ![Landscape-first device in PortraitFlipped orientation](images/accelerometer-axis-orientation-landscape-270.png)| ![Portrait-first device in PortraitFlipped orientation](images/accelerometer-axis-orientation-portrait-180.png) |\n\n## Devices broadcasting display and headless devices\n\nSome devices have the ability to broadcast the display to another device. For example, you could take a tablet and broadcast the display to a projector that will be in landscape orientation. In this scenario, it is important to keep in mind that the device orientation is based on the original device, not the one presenting the display. So an accelerometer would report data for the tablet.\n\nFurthermore, some devices do not have a display. With these devices, the default orientation for these devices is portrait.\n\n## Display orientation and compass heading\n\n\nCompass heading depends upon the reference axes and so it changes with the device orientation. You compensate based on the this table (assume the user is facing north).\n\n| Display orientation | Reference axis for compass heading | API compass heading when facing north | Compass heading compensation | \n|---------------------|------------------------------------|---------------------------------------|------------------------------|\n| Landscape           | -Z | 0   | Heading               |\n| Portrait            |  Y | 90  | (Heading + 270) % 360 | \n| LandscapeFlipped    |  Z | 180 | (Heading + 180) % 360 |\n| PortraitFlipped     |  Y | 270 | (Heading + 90) % 360  |\n\nModify the compass heading as shown in the table in order to correctly display the heading. The following code snippet demonstrates how to do this.\n\n```csharp\nprivate void ReadingChanged(object sender, CompassReadingChangedEventArgs e)\n{\n    double heading = e.Reading.HeadingMagneticNorth;        \n    double displayOffset;\n    \n    // Calculate the compass heading offset based on\n    // the current display orientation.\n    DisplayInformation displayInfo = DisplayInformation.GetForCurrentView();\n    \n    switch (displayInfo.CurrentOrientation) \n    { \n        case DisplayOrientations.Landscape: \n            displayOffset = 0; \n            break;\n        case DisplayOrientations.Portrait: \n            displayOffset = 270; \n            break; \n        case DisplayOrientations.LandscapeFlipped: \n            displayOffset = 180; \n            break; \n        case DisplayOrientations.PortraitFlipped: \n            displayOffset = 90; \n            break; \n     } \n    \n\n    double displayCompensatedHeading = (heading + displayOffset) % 360;\n    \n    // Update the UI...\n}\n```\n\n## Display orientation with the accelerometer and gyrometer\n\nThis table converts accelerometer and gyrometer data for display orientation.\n\n| Reference axes        |  X |  Y | Z |\n|-----------------------|----|----|---|\n| **Landscape**         |  X |  Y | Z |\n| **Portrait**          |  Y | -X | Z |\n| **LandscapeFlipped**  | -X | -Y | Z |\n| **PortraitFlipped**   | -Y |  X | Z |\n\nThe following code example applies these conversions to the gyrometer.\n\n```csharp\nprivate void ReadingChanged(object sender, GyrometerReadingChangedEventArgs e)\n{\n    double x_Axis;\n    double y_Axis;\n    double z_Axis;\n\n    GyrometerReading reading = e.Reading;  \n    \n    // Calculate the gyrometer axes based on\n    // the current display orientation.\n    DisplayInformation displayInfo = DisplayInformation.GetForCurrentView();\n    switch (displayInfo.CurrentOrientation) \n    { \n        case DisplayOrientations.Landscape: \n            x_Axis = reading.AngularVelocityX;\n            y_Axis = reading.AngularVelocityY;\n            z_Axis = reading.AngularVelocityZ;\n            break;\n        case DisplayOrientations.Portrait: \n            x_Axis = reading.AngularVelocityY;\n            y_Axis = -1 * reading.AngularVelocityX;\n            z_Axis = reading.AngularVelocityZ;\n            break; \n        case DisplayOrientations.LandscapeFlipped: \n            x_Axis = -1 * reading.AngularVelocityX;\n            y_Axis = -1 * reading.AngularVelocityY;\n            z_Axis = reading.AngularVelocityZ;\n            break; \n        case DisplayOrientations.PortraitFlipped: \n            x_Axis = -1 * reading.AngularVelocityY;\n            y_Axis = reading.AngularVelocityX;\n            z_Axis = reading.AngularVelocityZ;\n            break; \n     } \n    \n    \n    // Update the UI...\n}\n```\n\n## Display orientation and device orientation\n\nThe [**OrientationSensor**](https://msdn.microsoft.com/library/windows/apps/BR206371) data must be changed in a different way. Think of these different orientations as rotations counterclockwise to the Z axis, so we need to reverse the rotation to get back the user’s orientation. For quaternion data, we can use Euler’s formula to define a rotation with a reference quaternion, and we can also use a reference rotation matrix.\n\n![Euler's formula](images/eulers-formula.png)\nTo get the relative orientation you want, multiply the reference object against the absolute object. Note that this math is not commutative.\n\n![Multiply the reference object against the absolute object](images/orientation-formula.png)\nIn the preceding expression, the absolute object is returned by the sensor data.\n\n| Display orientation  | Counterclockwise rotation around Z | Reference quaternion (reverse rotation) | Reference rotation matrix (reverse rotation) | \n|----------------------|------------------------------------|-----------------------------------------|----------------------------------------------|\n| **Landscape**        | 0                                  | 1 + 0i + 0j + 0k                        | \\[1 0 0<br/> 0 1 0<br/> 0 0 1\\]               |\n| **Portrait**         | 90                                 | cos(-45⁰) + (i + j + k)*sin(-45⁰)       | \\[0 1 0<br/>-1 0 0<br/>0 0 1]              |\n| **LandscapeFlipped** | 180                                | 0 - i - j - k                           | \\[1 0 0<br/> 0 1 0<br/> 0 0 1]               |\n| **PortraitFlipped**  | 270                                | cos(-135⁰) + (i + j + k)*sin(-135⁰)     | \\[0 -1 0<br/> 1  0 0<br/> 0  0 1]             |\n"}