{"nodes":[{"pos":[17,146],"content":"Learn how a user can interact with a background app through the Cortana voice and canvas during the execution of a voice command.","needQuote":true,"needEscape":true,"nodes":[{"content":"Learn how a user can interact with a background app through the Cortana voice and canvas during the execution of a voice command.","pos":[0,129]}]},{"pos":[154,184],"content":"Interact with a background app","needQuote":true,"needEscape":true,"nodes":[{"content":"Interact with a background app","pos":[0,30]}]},{"content":"Interact with a background app in Cortana","pos":[300,341]},{"content":"\\[ Updated for UWP apps on Windows 10.","pos":[344,382]},{"content":"For Windows 8.x articles, see the <bpt id=\"p1\">[</bpt>archive<ept id=\"p1\">](http://go.microsoft.com/fwlink/p/?linkid=619132)</ept> \\]","pos":[383,478],"source":" For Windows 8.x articles, see the [archive](http://go.microsoft.com/fwlink/p/?linkid=619132) \\]"},{"content":"Important APIs","pos":[483,497]},{"content":"Windows.ApplicationModel.VoiceCommands","pos":[508,546]},{"content":"Voice Command Definition (VCD) elements and attributes v1.2","pos":[615,674]},{"pos":[737,870],"content":"Learn how a user can interact with a background app through the <bpt id=\"p1\">**</bpt>Cortana<ept id=\"p1\">**</ept> voice and canvas during the execution of a voice command.","source":"Learn how a user can interact with a background app through the **Cortana** voice and canvas during the execution of a voice command."},{"content":"Voice commands with <bpt id=\"p1\">**</bpt>Cortana<ept id=\"p1\">**</ept> can include a rich user experience and interaction flow within <bpt id=\"p2\">**</bpt>Cortana<ept id=\"p2\">**</ept> that is controlled by the background app.","pos":[872,1020],"source":"Voice commands with **Cortana** can include a rich user experience and interaction flow within **Cortana** that is controlled by the background app."},{"content":"The app can specify a number of different types of screens to support functionality that includes:","pos":[1021,1119]},{"content":"Successful completion","pos":[1125,1146]},{"content":"Hand-off","pos":[1151,1159]},{"content":"Progress","pos":[1164,1172]},{"content":"Confirmation","pos":[1177,1189]},{"content":"Disambiguation","pos":[1194,1208]},{"content":"Error","pos":[1213,1218]},{"content":"Prerequisites:","pos":[1222,1236]},{"content":"This topic builds on <bpt id=\"p1\">[</bpt>Launch a background app with voice commands in Cortana<ept id=\"p1\">](launch-a-background-app-with-voice-commands-in-cortana.md)</ept>.","pos":[1242,1379],"source":"This topic builds on [Launch a background app with voice commands in Cortana](launch-a-background-app-with-voice-commands-in-cortana.md)."},{"content":"We continue here to demonstrate features with a trip planning and management app named <bpt id=\"p1\">**</bpt>Adventure Works<ept id=\"p1\">**</ept>.","pos":[1380,1487],"source":" We continue here to demonstrate features with a trip planning and management app named **Adventure Works**."},{"content":"If you're new to developing Universal Windows Platform (UWP) apps, have a look through these topics to get familiar with the technologies discussed here.","pos":[1489,1642]},{"content":"Create your first app","pos":[1649,1670]},{"pos":[1734,1851],"content":"Learn about events with <bpt id=\"p1\">[</bpt>Events and routed events overview<ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/mt185584)</ept>","source":"Learn about events with [Events and routed events overview](https://msdn.microsoft.com/library/windows/apps/mt185584)"},{"content":"User experience guidelines:","pos":[1855,1882]},{"pos":[1888,2196],"content":"See <bpt id=\"p1\">[</bpt>Cortana design guidelines<ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/dn974233)</ept> for info about how to integrate your app with <bpt id=\"p2\">**</bpt>Cortana<ept id=\"p2\">**</ept> and <bpt id=\"p3\">[</bpt>Speech design guidelines<ept id=\"p3\">](https://msdn.microsoft.com/library/windows/apps/dn596121)</ept> for helpful tips on designing a useful and engaging speech-enabled app.","source":"See [Cortana design guidelines](https://msdn.microsoft.com/library/windows/apps/dn974233) for info about how to integrate your app with **Cortana** and [Speech design guidelines](https://msdn.microsoft.com/library/windows/apps/dn596121) for helpful tips on designing a useful and engaging speech-enabled app."},{"pos":[2309,2326],"content":"Completion screen"},{"content":"A completion screen provides the user with information about the completed voice command task.","pos":[2329,2423]},{"pos":[2425,2655],"content":"Tasks that take less than 500 milliseconds for your app to respond, and require no additional information from the user, can be completed without further participation from <bpt id=\"p1\">**</bpt>Cortana<ept id=\"p1\">**</ept>, other than displaying the completion screen.","source":"Tasks that take less than 500 milliseconds for your app to respond, and require no additional information from the user, can be completed without further participation from **Cortana**, other than displaying the completion screen."},{"pos":[2657,2788],"content":"Here, we show how <bpt id=\"p1\">**</bpt>Cortana<ept id=\"p1\">**</ept> can display a cancellation result from the <bpt id=\"p2\">**</bpt>Adventure Works<ept id=\"p2\">**</ept> app for an upcoming trip to Las Vegas.","source":"Here, we show how **Cortana** can display a cancellation result from the **Adventure Works** app for an upcoming trip to Las Vegas."},{"content":"cortana background app completion screen","pos":[2792,2832]},{"content":"Choose the feedback strings to be displayed and spoken by Cortana","pos":[2879,2944]},{"pos":[2952,3124],"content":"Follow the <bpt id=\"p1\">[</bpt>Cortana design guidelines<ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/dn974233)</ept> for recommendations on composing strings that <bpt id=\"p2\">**</bpt>Cortana<ept id=\"p2\">**</ept> shows and speaks.","source":"Follow the [Cortana design guidelines](https://msdn.microsoft.com/library/windows/apps/dn974233) for recommendations on composing strings that **Cortana** shows and speaks."},{"content":"Choose content tiles based on the action performed (optional)","pos":[3132,3193]},{"content":"Content tiles can provide additional context for the user and help keep the feedback strings concise.","pos":[3201,3302]},{"pos":[3308,3423],"content":"<bpt id=\"p1\">**</bpt>Cortana<ept id=\"p1\">**</ept> supports the following content tile templates (only one template can be used on the completion screen):","source":"**Cortana** supports the following content tile templates (only one template can be used on the completion screen):"},{"content":"Title only","pos":[3433,3443]},{"content":"Title with up to three lines of text","pos":[3452,3488]},{"content":"Title with icon","pos":[3497,3512]},{"content":"Title with icon and up to three lines of text","pos":[3521,3566]},{"content":"The icon can be:","pos":[3572,3588]},{"content":"68w x 68h","pos":[3598,3607]},{"content":"68w x 92h","pos":[3616,3625]},{"content":"280w x 140h","pos":[3634,3645]},{"content":"You can also let users launch your app in the foreground by either tapping a tile or the text link to your app.","pos":[3651,3762]},{"content":"Show the successful completion screen","pos":[3770,3807]},{"content":"Here's an example of a successful completion screen with multiple content tiles.","pos":[3815,3895]},{"pos":[5247,5262],"content":"Hand-off screen"},{"content":"Once a voice command is recognized, <bpt id=\"p1\">**</bpt>Cortana<ept id=\"p1\">**</ept> must present feedback within approximately 500 milliseconds.","pos":[5265,5373],"source":"Once a voice command is recognized, **Cortana** must present feedback within approximately 500 milliseconds."},{"content":"If the app service cannot complete the action specified by the voice command within 500ms, <bpt id=\"p1\">**</bpt>Cortana<ept id=\"p1\">**</ept> presents a hand-off screen that is shown for up to 5 seconds.","pos":[5374,5538],"source":" If the app service cannot complete the action specified by the voice command within 500ms, **Cortana** presents a hand-off screen that is shown for up to 5 seconds."},{"content":"The app icon and name are displayed on the hand-off screen, and you must provide both GUI and text-to-speech (TTS) handoff strings to indicate that the voice command was correctly understood.","pos":[5540,5731]},{"content":"Here's an example of a hand-off screen for the <bpt id=\"p1\">**</bpt>Adventure Works<ept id=\"p1\">**</ept> app.","pos":[5733,5804],"source":"Here's an example of a hand-off screen for the **Adventure Works** app."},{"content":"In this example, a user has queried <bpt id=\"p1\">**</bpt>Cortana<ept id=\"p1\">**</ept> for upcoming trips.","pos":[5805,5872],"source":" In this example, a user has queried **Cortana** for upcoming trips."},{"content":"The hand-off screen includes a message customized with the app service name, an icon, and the <bpt id=\"p1\">**</bpt>Feedback<ept id=\"p1\">**</ept> string declared in the VCD file.","pos":[5873,6012],"source":" The hand-off screen includes a message customized with the app service name, an icon, and the **Feedback** string declared in the VCD file."},{"content":"cortana background app hand-off screen","pos":[6016,6054]},{"pos":[6212,6227],"content":"Progress screen"},{"content":"If the app service takes more than 500ms between steps, <bpt id=\"p1\">**</bpt>Cortana<ept id=\"p1\">**</ept> updates the user on what’s happening with a progress screen.","pos":[6230,6358],"source":"If the app service takes more than 500ms between steps, **Cortana** updates the user on what’s happening with a progress screen."},{"content":"The app icon is displayed, and you must provide both GUI and TTS progress strings to indicate that the task is being actively handled.","pos":[6359,6493]},{"content":"<bpt id=\"p1\">**</bpt>Cortana<ept id=\"p1\">**</ept> shows a progress screen for a maximum of 5 seconds.","pos":[6495,6558],"source":"**Cortana** shows a progress screen for a maximum of 5 seconds."},{"content":"After 5 seconds, <bpt id=\"p1\">**</bpt>Cortana<ept id=\"p1\">**</ept> presents the user with an error message and the app service is closed.","pos":[6559,6658],"source":" After 5 seconds, **Cortana** presents the user with an error message and the app service is closed."},{"content":"If the app service needs more than 5 seconds to complete the action, it can continue to update <bpt id=\"p1\">**</bpt>Cortana<ept id=\"p1\">**</ept> with progress screens.","pos":[6659,6788],"source":" If the app service needs more than 5 seconds to complete the action, it can continue to update **Cortana** with progress screens."},{"content":"Here's an example of a hand-off screen for the <bpt id=\"p1\">**</bpt>Adventure Works<ept id=\"p1\">**</ept> app.","pos":[6790,6861],"source":"Here's an example of a hand-off screen for the **Adventure Works** app."},{"content":"In this example, a user has canceled a trip to Las Vegas through <bpt id=\"p1\">**</bpt>Cortana<ept id=\"p1\">**</ept>.","pos":[6862,6939],"source":" In this example, a user has canceled a trip to Las Vegas through **Cortana**."},{"content":"The progress screen includes a message customized for the action, an icon, and a content tile with information about the trip being canceled.","pos":[6940,7081]},{"content":"cortana background app progress screen","pos":[7085,7123]},{"content":"Choose the feedback strings to be displayed and spoken by Cortana","pos":[7169,7234]},{"pos":[7242,7414],"content":"Follow the <bpt id=\"p1\">[</bpt>Cortana design guidelines<ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/dn974233)</ept> for recommendations on composing strings that <bpt id=\"p2\">**</bpt>Cortana<ept id=\"p2\">**</ept> shows and speaks.","source":"Follow the [Cortana design guidelines](https://msdn.microsoft.com/library/windows/apps/dn974233) for recommendations on composing strings that **Cortana** shows and speaks."},{"content":"Choose content tiles based on the action performed (optional)","pos":[7422,7483]},{"content":"Content tiles can provide additional context for the user and help keep the feedback strings concise.","pos":[7491,7592]},{"pos":[7598,7713],"content":"<bpt id=\"p1\">**</bpt>Cortana<ept id=\"p1\">**</ept> supports the following content tile templates (only one template can be used on the completion screen):","source":"**Cortana** supports the following content tile templates (only one template can be used on the completion screen):"},{"content":"Title only","pos":[7723,7733]},{"content":"Title with up to three lines of text","pos":[7742,7778]},{"content":"Title with icon","pos":[7787,7802]},{"content":"Title with icon and up to three lines of text","pos":[7811,7856]},{"content":"The icon can be:","pos":[7862,7878]},{"content":"68w x 68h","pos":[7888,7897]},{"content":"68w x 92h","pos":[7906,7915]},{"content":"280w x 140h","pos":[7924,7935]},{"content":"You can also let users launch your app in the foreground by either tapping a tile or the text link to your app.","pos":[7941,8052]},{"content":"Build the response","pos":[8060,8078]},{"pos":[8086,8218],"content":"Call <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>ReportProgressAsync<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/dn706579)</ept> to show the progress screen in <bpt id=\"p3\">**</bpt>Cortana<ept id=\"p3\">**</ept>.","source":"Call [**ReportProgressAsync**](https://msdn.microsoft.com/library/windows/apps/dn706579) to show the progress screen in **Cortana**."},{"content":"Show the progress screen","pos":[8226,8250]},{"content":"Here's an example of a progress screen with a content tile.","pos":[8258,8317]},{"pos":[8859,8878],"content":"Confirmation screen"},{"content":"When an action specified by a voice command is irreversible, has a significant impact, or the recognition confidence is not high, an app service can request confirmation.","pos":[8881,9051]},{"content":"Here's an example of a confirmation screen for the <bpt id=\"p1\">**</bpt>Adventure Works<ept id=\"p1\">**</ept> app.","pos":[9053,9128],"source":"Here's an example of a confirmation screen for the **Adventure Works** app."},{"content":"In this example, a user has instructed the app service to cancel a trip to Las Vegas through <bpt id=\"p1\">**</bpt>Cortana<ept id=\"p1\">**</ept>.","pos":[9129,9234],"source":" In this example, a user has instructed the app service to cancel a trip to Las Vegas through **Cortana**."},{"content":"The app service has provided <bpt id=\"p1\">**</bpt>Cortana<ept id=\"p1\">**</ept> with a confirmation screen that prompts the user for a yes or no answer before canceling the trip.","pos":[9235,9374],"source":" The app service has provided **Cortana** with a confirmation screen that prompts the user for a yes or no answer before canceling the trip."},{"content":"If the user says something other than \"Yes\" or \"No\", <bpt id=\"p1\">**</bpt>Cortana<ept id=\"p1\">**</ept> cannot determine the answer to the question.","pos":[9376,9485],"source":"If the user says something other than \"Yes\" or \"No\", **Cortana** cannot determine the answer to the question."},{"content":"In this case, <bpt id=\"p1\">**</bpt>Cortana<ept id=\"p1\">**</ept> prompts the user with a similar question provided by the app service.","pos":[9486,9581],"source":" In this case, **Cortana** prompts the user with a similar question provided by the app service."},{"content":"On the second prompt, if the user still doesn’t say \"Yes\" or \"No\", <bpt id=\"p1\">**</bpt>Cortana<ept id=\"p1\">**</ept> prompts the user a third time with the same question prefixed with an apology.","pos":[9583,9740],"source":"On the second prompt, if the user still doesn’t say \"Yes\" or \"No\", **Cortana** prompts the user a third time with the same question prefixed with an apology."},{"content":"If the user still doesn’t say \"Yes\" or \"No\", <bpt id=\"p1\">**</bpt>Cortana<ept id=\"p1\">**</ept> stops listening for voice input and asks the user to tap one of the buttons instead.","pos":[9741,9882],"source":" If the user still doesn’t say \"Yes\" or \"No\", **Cortana** stops listening for voice input and asks the user to tap one of the buttons instead."},{"content":"The confirmation screen includes a message customized for the action, an icon, and a content tile with information about the trip being canceled.","pos":[9884,10029]},{"content":"cortana background app confirmation screen","pos":[10033,10075]},{"content":"Choose the feedback strings to be displayed and spoken by Cortana","pos":[10124,10189]},{"pos":[10197,10369],"content":"Follow the <bpt id=\"p1\">[</bpt>Cortana design guidelines<ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/dn974233)</ept> for recommendations on composing strings that <bpt id=\"p2\">**</bpt>Cortana<ept id=\"p2\">**</ept> shows and speaks.","source":"Follow the [Cortana design guidelines](https://msdn.microsoft.com/library/windows/apps/dn974233) for recommendations on composing strings that **Cortana** shows and speaks."},{"content":"Choose content tiles based on the action performed (optional)","pos":[10377,10438]},{"content":"Content tiles can provide additional context for the user and help keep the feedback strings concise.","pos":[10446,10547]},{"pos":[10553,10668],"content":"<bpt id=\"p1\">**</bpt>Cortana<ept id=\"p1\">**</ept> supports the following content tile templates (only one template can be used on the completion screen):","source":"**Cortana** supports the following content tile templates (only one template can be used on the completion screen):"},{"content":"Title only","pos":[10678,10688]},{"content":"Title with up to three lines of text","pos":[10697,10733]},{"content":"Title with icon","pos":[10742,10757]},{"content":"Title with icon and up to three lines of text","pos":[10766,10811]},{"content":"The icon can be:","pos":[10817,10833]},{"content":"68w x 68h","pos":[10843,10852]},{"content":"68w x 92h","pos":[10861,10870]},{"content":"280w x 140h","pos":[10879,10890]},{"content":"You can also let users launch your app in the foreground by either tapping a tile or the text link to your app.","pos":[10896,11007]},{"content":"Build the response","pos":[11015,11033]},{"pos":[11041,11182],"content":"Call <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>RequestConfirmationAsync<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/dn706582)</ept> to show the confirmation screen in <bpt id=\"p3\">**</bpt>Cortana<ept id=\"p3\">**</ept>.","source":"Call [**RequestConfirmationAsync**](https://msdn.microsoft.com/library/windows/apps/dn706582) to show the confirmation screen in **Cortana**."},{"content":"Show the confirmation screen","pos":[11190,11218]},{"content":"Here's an example of a confirmation screen with a content tile.","pos":[11226,11289]},{"pos":[12956,12977],"content":"Disambiguation screen"},{"content":"When an action specified by a voice command has more than one possible outcome, an app service can request more info from the user.","pos":[12980,13111]},{"content":"Here's an example of a disambiguation screen for the <bpt id=\"p1\">**</bpt>Adventure Works<ept id=\"p1\">**</ept> app.","pos":[13113,13190],"source":"Here's an example of a disambiguation screen for the **Adventure Works** app."},{"content":"In this example, a user has instructed the app service to cancel a trip to Las Vegas through <bpt id=\"p1\">**</bpt>Cortana<ept id=\"p1\">**</ept>.","pos":[13191,13296],"source":" In this example, a user has instructed the app service to cancel a trip to Las Vegas through **Cortana**."},{"content":"However, the user has two trips to Las Vegas on different dates and the app service cannot complete the action without the user selecting the intended trip.","pos":[13297,13453]},{"pos":[13455,13616],"content":"The app service provides <bpt id=\"p1\">**</bpt>Cortana<ept id=\"p1\">**</ept> with a disambiguation screen that prompts the user to make a selection from a list of matching trips, before it cancels any.","source":"The app service provides **Cortana** with a disambiguation screen that prompts the user to make a selection from a list of matching trips, before it cancels any."},{"pos":[13618,13713],"content":"In this case, <bpt id=\"p1\">**</bpt>Cortana<ept id=\"p1\">**</ept> prompts the user with a similar question provided by the app service.","source":"In this case, **Cortana** prompts the user with a similar question provided by the app service."},{"content":"On the second prompt, if the user still doesn’t say something that can be used to identify the selection, <bpt id=\"p1\">**</bpt>Cortana<ept id=\"p1\">**</ept> prompts the user a third time with the same question prefixed with an apology.","pos":[13715,13911],"source":"On the second prompt, if the user still doesn’t say something that can be used to identify the selection, **Cortana** prompts the user a third time with the same question prefixed with an apology."},{"content":"If the user still doesn’t say something that can be used to identify the selection, <bpt id=\"p1\">**</bpt>Cortana<ept id=\"p1\">**</ept> stops listening for voice input and asks the user to tap one of the buttons instead.","pos":[13912,14092],"source":" If the user still doesn’t say something that can be used to identify the selection, **Cortana** stops listening for voice input and asks the user to tap one of the buttons instead."},{"content":"The disambiguation screen includes a message customized for the action, an icon, and a content tile with information about the trip being canceled.","pos":[14094,14241]},{"content":"cortana background app disambiguation screen","pos":[14245,14289]},{"content":"Choose the feedback strings to be displayed and spoken by Cortana","pos":[14341,14406]},{"pos":[14414,14586],"content":"Follow the <bpt id=\"p1\">[</bpt>Cortana design guidelines<ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/dn974233)</ept> for recommendations on composing strings that <bpt id=\"p2\">**</bpt>Cortana<ept id=\"p2\">**</ept> shows and speaks.","source":"Follow the [Cortana design guidelines](https://msdn.microsoft.com/library/windows/apps/dn974233) for recommendations on composing strings that **Cortana** shows and speaks."},{"content":"Choose content tiles based on the action performed (optional)","pos":[14594,14655]},{"content":"Content tiles can provide additional context for the user and help keep the feedback strings concise.","pos":[14663,14764]},{"pos":[14770,14885],"content":"<bpt id=\"p1\">**</bpt>Cortana<ept id=\"p1\">**</ept> supports the following content tile templates (only one template can be used on the completion screen):","source":"**Cortana** supports the following content tile templates (only one template can be used on the completion screen):"},{"content":"Title only","pos":[14895,14905]},{"content":"Title with up to three lines of text","pos":[14914,14950]},{"content":"Title with icon","pos":[14959,14974]},{"content":"Title with icon and up to three lines of text","pos":[14983,15028]},{"content":"The icon can be:","pos":[15034,15050]},{"content":"68w x 68h","pos":[15060,15069]},{"content":"68w x 92h","pos":[15078,15087]},{"content":"280w x 140h","pos":[15096,15107]},{"content":"You can also let users launch your app in the foreground by either tapping a tile or the text link to your app.","pos":[15113,15224]},{"content":"Build the response","pos":[15232,15250]},{"pos":[15258,15403],"content":"Call <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>RequestDisambiguationAsync<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/dn706583)</ept> to show the disambiguation screen in <bpt id=\"p3\">**</bpt>Cortana<ept id=\"p3\">**</ept>.","source":"Call [**RequestDisambiguationAsync**](https://msdn.microsoft.com/library/windows/apps/dn706583) to show the disambiguation screen in **Cortana**."},{"content":"Show the disambiguation screen","pos":[15411,15441]},{"content":"Here's an example of a disambiguation screen with content tiles.","pos":[15449,15513]},{"pos":[17890,17902],"content":"Error screen"},{"content":"When an action specified by a voice command cannot be completed, an app service can provide an error screen.","pos":[17905,18013]},{"content":"Here's an example of an error screen for the <bpt id=\"p1\">**</bpt>Adventure Works<ept id=\"p1\">**</ept> app.","pos":[18015,18084],"source":"Here's an example of an error screen for the **Adventure Works** app."},{"content":"In this example, a user has instructed the app service to cancel a trip to Las Vegas through <bpt id=\"p1\">**</bpt>Cortana<ept id=\"p1\">**</ept>.","pos":[18085,18190],"source":" In this example, a user has instructed the app service to cancel a trip to Las Vegas through **Cortana**."},{"content":"However, the user does not have any trips scheduled to Las Vegas.","pos":[18191,18256]},{"pos":[18258,18407],"content":"The app service provides <bpt id=\"p1\">**</bpt>Cortana<ept id=\"p1\">**</ept> with an error screen that includes a message customized for the action, an icon, and the specific error message.","source":"The app service provides **Cortana** with an error screen that includes a message customized for the action, an icon, and the specific error message."},{"content":"Choose the feedback strings to be displayed and spoken by Cortana","pos":[18415,18480]},{"pos":[18488,18660],"content":"Follow the <bpt id=\"p1\">[</bpt>Cortana design guidelines<ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/dn974233)</ept> for recommendations on composing strings that <bpt id=\"p2\">**</bpt>Cortana<ept id=\"p2\">**</ept> shows and speaks.","source":"Follow the [Cortana design guidelines](https://msdn.microsoft.com/library/windows/apps/dn974233) for recommendations on composing strings that **Cortana** shows and speaks."},{"content":"Choose content tiles based on the action performed (optional)","pos":[18668,18729]},{"content":"Content tiles can provide additional context for the user and help keep the feedback strings concise.","pos":[18737,18838]},{"pos":[18844,18959],"content":"<bpt id=\"p1\">**</bpt>Cortana<ept id=\"p1\">**</ept> supports the following content tile templates (only one template can be used on the completion screen):","source":"**Cortana** supports the following content tile templates (only one template can be used on the completion screen):"},{"content":"Title only","pos":[18969,18979]},{"content":"Title with up to three lines of text","pos":[18988,19024]},{"content":"Title with icon","pos":[19033,19048]},{"content":"Title with icon and up to three lines of text","pos":[19057,19102]},{"content":"The icon can be:","pos":[19108,19124]},{"content":"68w x 68h","pos":[19134,19143]},{"content":"68w x 92h","pos":[19152,19161]},{"content":"280w x 140h","pos":[19170,19181]},{"content":"You can also let users launch your app in the foreground by either tapping a tile or the text link to your app.","pos":[19187,19298]},{"content":"Build the response","pos":[19306,19324]},{"pos":[19332,19460],"content":"Call <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>ReportFailureAsync<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/dn706578)</ept> to show the error screen in <bpt id=\"p3\">**</bpt>Cortana<ept id=\"p3\">**</ept>.","source":"Call [**ReportFailureAsync**](https://msdn.microsoft.com/library/windows/apps/dn706578) to show the error screen in **Cortana**."},{"content":"Show the error screen","pos":[19468,19489]},{"content":"Here's an example of an error screen.","pos":[19497,19534]},{"pos":[19964,19980],"content":"Related articles"},{"content":"Developers","pos":[19985,19995]},{"content":"Cortana interactions","pos":[20001,20021]},{"content":"VCD elements and attributes v1.2","pos":[20053,20085]},{"content":"Designers","pos":[20150,20159]},{"content":"Cortana design guidelines","pos":[20165,20190]},{"content":"Speech design guidelines","pos":[20253,20277]},{"content":"Samples","pos":[20340,20347]},{"content":"Cortana voice command sample","pos":[20353,20381]}],"content":"---\nDescription: Learn how a user can interact with a background app through the Cortana voice and canvas during the execution of a voice command.\ntitle: Interact with a background app\nms.assetid: 6C60F03C-A242-435D-96BB-736892CC1CA6\nlabel: Interact with a background app\ntemplate: detail.hbs\n---\n\n# Interact with a background app in Cortana\n\n\n\\[ Updated for UWP apps on Windows 10. For Windows 8.x articles, see the [archive](http://go.microsoft.com/fwlink/p/?linkid=619132) \\]\n\n\n**Important APIs**\n\n-   [**Windows.ApplicationModel.VoiceCommands**](https://msdn.microsoft.com/library/windows/apps/dn706594)\n-   [**Voice Command Definition (VCD) elements and attributes v1.2**](https://msdn.microsoft.com/library/windows/apps/dn706593)\n\nLearn how a user can interact with a background app through the **Cortana** voice and canvas during the execution of a voice command.\n\nVoice commands with **Cortana** can include a rich user experience and interaction flow within **Cortana** that is controlled by the background app. The app can specify a number of different types of screens to support functionality that includes:\n\n-   Successful completion\n-   Hand-off\n-   Progress\n-   Confirmation\n-   Disambiguation\n-   Error\n\n**Prerequisites:  **\n\nThis topic builds on [Launch a background app with voice commands in Cortana](launch-a-background-app-with-voice-commands-in-cortana.md). We continue here to demonstrate features with a trip planning and management app named **Adventure Works**.\n\nIf you're new to developing Universal Windows Platform (UWP) apps, have a look through these topics to get familiar with the technologies discussed here.\n\n-   [Create your first app](https://msdn.microsoft.com/library/windows/apps/bg124288)\n-   Learn about events with [Events and routed events overview](https://msdn.microsoft.com/library/windows/apps/mt185584)\n\n**User experience guidelines:  **\n\nSee [Cortana design guidelines](https://msdn.microsoft.com/library/windows/apps/dn974233) for info about how to integrate your app with **Cortana** and [Speech design guidelines](https://msdn.microsoft.com/library/windows/apps/dn596121) for helpful tips on designing a useful and engaging speech-enabled app.\n\n## <span id=\"Completion_screen\"></span><span id=\"completion_screen\"></span><span id=\"COMPLETION_SCREEN\"></span>Completion screen\n\n\nA completion screen provides the user with information about the completed voice command task.\n\nTasks that take less than 500 milliseconds for your app to respond, and require no additional information from the user, can be completed without further participation from **Cortana**, other than displaying the completion screen.\n\nHere, we show how **Cortana** can display a cancellation result from the **Adventure Works** app for an upcoming trip to Las Vegas.\n\n![cortana background app completion screen](images/cortana-completion-screen.png)\n\n1.  **Choose the feedback strings to be displayed and spoken by Cortana**\n\n    Follow the [Cortana design guidelines](https://msdn.microsoft.com/library/windows/apps/dn974233) for recommendations on composing strings that **Cortana** shows and speaks.\n\n2.  **Choose content tiles based on the action performed (optional)**\n\n    Content tiles can provide additional context for the user and help keep the feedback strings concise.\n\n    **Cortana** supports the following content tile templates (only one template can be used on the completion screen):\n\n    -   Title only\n    -   Title with up to three lines of text\n    -   Title with icon\n    -   Title with icon and up to three lines of text\n\n    The icon can be:\n\n    -   68w x 68h\n    -   68w x 92h\n    -   280w x 140h\n\n    You can also let users launch your app in the foreground by either tapping a tile or the text link to your app.\n\n3.  **Show the successful completion screen**\n\n    Here's an example of a successful completion screen with multiple content tiles.\n\n```    CSharp\nvar userMessage = new VoiceCommandUserMessage();\n    userMessage.DisplayMessage = \"Here are your trips.\";\n    userMessage.SpokenMessage = \n      \"You have two trips to Vegas coming up.\";\n\n    var destinationsContentTiles = new List<VoiceCommandContentTile>();\n\n    var destinationTile1 = new VoiceCommandContentTile();\n    destinationTile1.ContentTileType = \n      VoiceCommandContentTileType.TitleWith68x68IconAndText;\n    destinationTile1.AppLaunchArgument = “id_Vegas_001\";\n    destinationTile1.Title = \"Las Vegas Tech Conference\";\n    destinationTile1.TextLine1 = \"May 15th 2015\";\n    destinationsContentTiles.Add(destinationTile1);\n\n    var destinationTile2 = new VoiceCommandContentTile();\n    destinationTile2.ContentTileType = \n      VoiceCommandContentTileType.TitleWith68x68IconAndText;\n    destinationTile2.AppLaunchArgument = “id_Vegas_002\";\n    destinationTile2.Title = \"Fun in Vegas\";\n    destinationTile2.TextLine1 = \"August 24th 2015\";\n    destinationsContentTiles.Add(destinationTile2);\n\n    var response = \n      VoiceCommandResponse.CreateResponse(userMessage, destinationsContentTiles);\n\n    response.AppLaunchArgument = “Las Vegas\";\n        \n    await voiceServiceConnection.ReportSuccessAsync(response);\n```\n\n## <span id=\"Hand-off_screen\"></span><span id=\"hand-off_screen\"></span><span id=\"HAND-OFF_SCREEN\"></span>Hand-off screen\n\n\nOnce a voice command is recognized, **Cortana** must present feedback within approximately 500 milliseconds. If the app service cannot complete the action specified by the voice command within 500ms, **Cortana** presents a hand-off screen that is shown for up to 5 seconds.\n\nThe app icon and name are displayed on the hand-off screen, and you must provide both GUI and text-to-speech (TTS) handoff strings to indicate that the voice command was correctly understood.\n\nHere's an example of a hand-off screen for the **Adventure Works** app. In this example, a user has queried **Cortana** for upcoming trips. The hand-off screen includes a message customized with the app service name, an icon, and the **Feedback** string declared in the VCD file.\n\n![cortana background app hand-off screen](images/cortana-backgroundapp-progress-result.png)\n\n## <span id=\"Progress_screen\"></span><span id=\"progress_screen\"></span><span id=\"PROGRESS_SCREEN\"></span>Progress screen\n\n\nIf the app service takes more than 500ms between steps, **Cortana** updates the user on what’s happening with a progress screen. The app icon is displayed, and you must provide both GUI and TTS progress strings to indicate that the task is being actively handled.\n\n**Cortana** shows a progress screen for a maximum of 5 seconds. After 5 seconds, **Cortana** presents the user with an error message and the app service is closed. If the app service needs more than 5 seconds to complete the action, it can continue to update **Cortana** with progress screens.\n\nHere's an example of a hand-off screen for the **Adventure Works** app. In this example, a user has canceled a trip to Las Vegas through **Cortana**. The progress screen includes a message customized for the action, an icon, and a content tile with information about the trip being canceled.\n\n![cortana background app progress screen ](images/cortana-progress-screen.png)\n\n1.  **Choose the feedback strings to be displayed and spoken by Cortana**\n\n    Follow the [Cortana design guidelines](https://msdn.microsoft.com/library/windows/apps/dn974233) for recommendations on composing strings that **Cortana** shows and speaks.\n\n2.  **Choose content tiles based on the action performed (optional)**\n\n    Content tiles can provide additional context for the user and help keep the feedback strings concise.\n\n    **Cortana** supports the following content tile templates (only one template can be used on the completion screen):\n\n    -   Title only\n    -   Title with up to three lines of text\n    -   Title with icon\n    -   Title with icon and up to three lines of text\n\n    The icon can be:\n\n    -   68w x 68h\n    -   68w x 92h\n    -   280w x 140h\n\n    You can also let users launch your app in the foreground by either tapping a tile or the text link to your app.\n\n3.  **Build the response**\n\n    Call [**ReportProgressAsync**](https://msdn.microsoft.com/library/windows/apps/dn706579) to show the progress screen in **Cortana**.\n\n4.  **Show the progress screen**\n\n    Here's an example of a progress screen with a content tile.\n\n```    CSharp\nvar userMessage = new VoiceCommandUserMessage();\n\n    var destinationsContentTiles = new List<VoiceCommandContentTile>();\n\n    destinationsContentTiles.Add(selectedDestination);\n\n    var response = \n      VoiceCommandResponse.CreateResponse(userMessage, destinationsContentTiles);\n\n    response.AppLaunchArgument = \"destination=Las Vegas\";\n    await voiceServiceConnection.ReportProgressAsync(response);\n```\n\n## <span id=\"Confirmation_screen\"></span><span id=\"confirmation_screen\"></span><span id=\"CONFIRMATION_SCREEN\"></span>Confirmation screen\n\n\nWhen an action specified by a voice command is irreversible, has a significant impact, or the recognition confidence is not high, an app service can request confirmation.\n\nHere's an example of a confirmation screen for the **Adventure Works** app. In this example, a user has instructed the app service to cancel a trip to Las Vegas through **Cortana**. The app service has provided **Cortana** with a confirmation screen that prompts the user for a yes or no answer before canceling the trip.\n\nIf the user says something other than \"Yes\" or \"No\", **Cortana** cannot determine the answer to the question. In this case, **Cortana** prompts the user with a similar question provided by the app service.\n\nOn the second prompt, if the user still doesn’t say \"Yes\" or \"No\", **Cortana** prompts the user a third time with the same question prefixed with an apology. If the user still doesn’t say \"Yes\" or \"No\", **Cortana** stops listening for voice input and asks the user to tap one of the buttons instead.\n\nThe confirmation screen includes a message customized for the action, an icon, and a content tile with information about the trip being canceled.\n\n![cortana background app confirmation screen](images/cortana-confirmation-screen.png)\n\n1.  **Choose the feedback strings to be displayed and spoken by Cortana**\n\n    Follow the [Cortana design guidelines](https://msdn.microsoft.com/library/windows/apps/dn974233) for recommendations on composing strings that **Cortana** shows and speaks.\n\n2.  **Choose content tiles based on the action performed (optional)**\n\n    Content tiles can provide additional context for the user and help keep the feedback strings concise.\n\n    **Cortana** supports the following content tile templates (only one template can be used on the completion screen):\n\n    -   Title only\n    -   Title with up to three lines of text\n    -   Title with icon\n    -   Title with icon and up to three lines of text\n\n    The icon can be:\n\n    -   68w x 68h\n    -   68w x 92h\n    -   280w x 140h\n\n    You can also let users launch your app in the foreground by either tapping a tile or the text link to your app.\n\n3.  **Build the response**\n\n    Call [**RequestConfirmationAsync**](https://msdn.microsoft.com/library/windows/apps/dn706582) to show the confirmation screen in **Cortana**.\n\n4.  **Show the confirmation screen**\n\n    Here's an example of a confirmation screen with a content tile.\n\n```    CSharp\nvar userPrompt = new VoiceCommandUserMessage();\n    userPrompt.DisplayMessage = userPrompt.SpokenMessage = \n      \"Are you sure you want to cancel the trip to Las Vegas?”;\n\n    var userReprompt = new VoiceCommandUserMessage();\n    userReprompt.DisplayMessage = \n      userReprompt.SpokenMessage = \"Do you want to cancel this trip to Las Vegas?\"; \n\n    userPrompt.DisplayMessage = “Cancel this trip?”;\n    userPrompt.SpokenMessage =\"Do you wanna cancel this trip to Vegas?”;\n\n    var userReprompt = new VoiceCommandUserMessage();\n    userReprompt.DisplayMessage = “Did you want to cancel this trip?”;\n    userReprompt.SpokenMessage = \"Did you wanna cancel this trip?\"; \n\n    var destinationsContentTiles = new List<VoiceCommandContentTile>();\n\n    var destinationTile = new VoiceCommandContentTile();\n    destinationTile.ContentTileType = \n      VoiceCommandContentTileType.TitleWith68x68IconAndText;\n    destinationTile.Title = \"Vegas Tech Conference\";\n\n    destinationTile.TextLine1 = \"May 15th\";\n\n\n    destinationsContentTiles.Add(destinationTile);\n\n    var response = \n      VoiceCommandResponse.CreateResponseForPrompt(\n        userPrompt, userReprompt, destinationsContentTiles);\n\n    var voiceCommandConfirmation = \n      await voiceServiceConnection.RequestConfirmationAsync(response);\n\n    if (voiceCommandConfirmation != null)\n    {\n       // Use the voiceCommandConfirmation.Confirmed to take action.\n       // Call Cortana to present the next screen in .5 seconds \n       // and avoid a transition screen.\n    }\n```\n\n## <span id=\"Disambiguation_screen\"></span><span id=\"disambiguation_screen\"></span><span id=\"DISAMBIGUATION_SCREEN\"></span>Disambiguation screen\n\n\nWhen an action specified by a voice command has more than one possible outcome, an app service can request more info from the user.\n\nHere's an example of a disambiguation screen for the **Adventure Works** app. In this example, a user has instructed the app service to cancel a trip to Las Vegas through **Cortana**. However, the user has two trips to Las Vegas on different dates and the app service cannot complete the action without the user selecting the intended trip.\n\nThe app service provides **Cortana** with a disambiguation screen that prompts the user to make a selection from a list of matching trips, before it cancels any.\n\nIn this case, **Cortana** prompts the user with a similar question provided by the app service.\n\nOn the second prompt, if the user still doesn’t say something that can be used to identify the selection, **Cortana** prompts the user a third time with the same question prefixed with an apology. If the user still doesn’t say something that can be used to identify the selection, **Cortana** stops listening for voice input and asks the user to tap one of the buttons instead.\n\nThe disambiguation screen includes a message customized for the action, an icon, and a content tile with information about the trip being canceled.\n\n![cortana background app disambiguation screen ](images/cortana-disambiguation-screen.png)\n\n1.  **Choose the feedback strings to be displayed and spoken by Cortana**\n\n    Follow the [Cortana design guidelines](https://msdn.microsoft.com/library/windows/apps/dn974233) for recommendations on composing strings that **Cortana** shows and speaks.\n\n2.  **Choose content tiles based on the action performed (optional)**\n\n    Content tiles can provide additional context for the user and help keep the feedback strings concise.\n\n    **Cortana** supports the following content tile templates (only one template can be used on the completion screen):\n\n    -   Title only\n    -   Title with up to three lines of text\n    -   Title with icon\n    -   Title with icon and up to three lines of text\n\n    The icon can be:\n\n    -   68w x 68h\n    -   68w x 92h\n    -   280w x 140h\n\n    You can also let users launch your app in the foreground by either tapping a tile or the text link to your app.\n\n3.  **Build the response**\n\n    Call [**RequestDisambiguationAsync**](https://msdn.microsoft.com/library/windows/apps/dn706583) to show the disambiguation screen in **Cortana**.\n\n4.  **Show the disambiguation screen**\n\n    Here's an example of a disambiguation screen with content tiles.\n\n```    CSharp\n// Create a VoiceCommandUserMessage for the initial question.  \n    var userPrompt = new VoiceCommandUserMessage();\n    userPrompt.DisplayMessage = \"Which one do you want to cancel?\";\n    userPrompt.SpokenMessage = \n      “Which Vegas trip do you wanna cancel? Vegas Tech Conference or Fun in Vegas?”;\n\n\n    // Create a VoiceCommandUserMessage for the second question,\n    // in case Cortana needs to reprompt. \n    var userReprompt = new VoiceCommandUserMessage();\n    userReprompt.DisplayMessage = “Which one did you want to cancel?”;\n    userReprompt.SpokenMessage = \"Which one did you wanna to cancel?\";\n\n    // Create the list of content tiles to show the selection items.\n    var destinationsContentTiles = new List<VoiceCommandContentTile>();\n\n    var destinationTile = new VoiceCommandContentTile();\n    destinationTile.ContentTileType = \n      VoiceCommandContentTileType.TitleWith68x68IconAndText;\n      \n    // The AppContext is optional. \n    // Replace this value with something specific to your app. \n    destinationTile.AppContext = \"id_Vegas_001\";\n    destinationTile.Title = \"Vegas Tech Conference\";\n\n    destinationTile.TextLine1 = \"May 15th\";\n\n\n    destinationsContentTiles.Add(destinationTile);\n\n    var destination2 = new VoiceCommandContentTile();\n    destination2.ContentTileType = \n      VoiceCommandContentTileType.TitleWith68x68IconAndText;\n    // The AppContext is optional. \n    // Replace this value with something specific to your app. \n    destination2.AppContext = \"id_LasVegas_002\";\n\n    destination2.Title = \"Fun in Vegas\";\n\n    destination2.TextLine1 = \"August 24th\";\n\n    destinationsContentTiles.Add(destination2);\n\n    // Create the disambiguation response.\n    var response = \n      VoiceCommandResponse.CreateResponseForPrompt(\n        userPrompt, userReprompt, destinationsContentTiles);\n\n    // Request that Cortana shows the Disambiguation screen.\n    var voiceCommandDisambiguationResult = \n      await voiceServiceConnection.RequestDisambiguationAsync(response);\n\n    if (voiceCommandDisambiguationResult != null)\n    {\n       // Use the voiceCommandDisambiguationResult.SelectedItem to take action.\n       // Call Cortana to present the next screen in .5 seconds   \n       // and avoid a transition screen. \n    }\n```\n\n## <span id=\"Error_screen\"></span><span id=\"error_screen\"></span><span id=\"ERROR_SCREEN\"></span>Error screen\n\n\nWhen an action specified by a voice command cannot be completed, an app service can provide an error screen.\n\nHere's an example of an error screen for the **Adventure Works** app. In this example, a user has instructed the app service to cancel a trip to Las Vegas through **Cortana**. However, the user does not have any trips scheduled to Las Vegas.\n\nThe app service provides **Cortana** with an error screen that includes a message customized for the action, an icon, and the specific error message.\n\n1.  **Choose the feedback strings to be displayed and spoken by Cortana**\n\n    Follow the [Cortana design guidelines](https://msdn.microsoft.com/library/windows/apps/dn974233) for recommendations on composing strings that **Cortana** shows and speaks.\n\n2.  **Choose content tiles based on the action performed (optional)**\n\n    Content tiles can provide additional context for the user and help keep the feedback strings concise.\n\n    **Cortana** supports the following content tile templates (only one template can be used on the completion screen):\n\n    -   Title only\n    -   Title with up to three lines of text\n    -   Title with icon\n    -   Title with icon and up to three lines of text\n\n    The icon can be:\n\n    -   68w x 68h\n    -   68w x 92h\n    -   280w x 140h\n\n    You can also let users launch your app in the foreground by either tapping a tile or the text link to your app.\n\n3.  **Build the response**\n\n    Call [**ReportFailureAsync**](https://msdn.microsoft.com/library/windows/apps/dn706578) to show the error screen in **Cortana**.\n\n4.  **Show the error screen**\n\n    Here's an example of an error screen.\n\n```    CSharp\nvar userMessage = new VoiceCommandUserMessage();\n    userMessage.DisplayMessage = userMessage.SpokenMessage = \n      \"Sorry, you don&#39;t have any trips to Las Vegas\";\n                \n    var response = VoiceCommandResponse.CreateResponse(userMessage);\n\n    response.AppLaunchArgument = \"showUpcomingTrips\";\n    await voiceServiceConnection.ReportFailureAsync(response);\n```\n\n## <span id=\"related_topics\"></span>Related articles\n\n\n**Developers**\n* [Cortana interactions](cortana-interactions.md)\n* [**VCD elements and attributes v1.2**](https://msdn.microsoft.com/library/windows/apps/dn706593)\n\n**Designers**\n* [Cortana design guidelines](https://msdn.microsoft.com/library/windows/apps/dn974233)\n* [Speech design guidelines](https://msdn.microsoft.com/library/windows/apps/dn596121)\n\n**Samples**\n* [Cortana voice command sample](http://go.microsoft.com/fwlink/p/?LinkID=619899)\n \n\n \n\n\n\n\n"}