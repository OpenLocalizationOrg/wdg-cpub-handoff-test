{"nodes":[{"content":"Creating a log file for the code analysis tool","pos":[0,46]},{"content":"The Windows Server 2012 <bpt id=\"p1\">[</bpt>Hardware Certification Program<ept id=\"p1\">](http://go.microsoft.com/fwlink/p/?linkid=227016)</ept> requires a Driver Verification Log (DVL) for all applicable driver submissions.","pos":[169,354],"source":"The Windows Server 2012 [Hardware Certification Program](http://go.microsoft.com/fwlink/p/?linkid=227016) requires a Driver Verification Log (DVL) for all applicable driver submissions."},{"content":"You must run the Code Analysis tool prior to creating a DVL for your driver.","pos":[355,431]},{"content":"The DVL contains a summary of the results from the Code Analysis and Static Driver Verifier log files.","pos":[432,534]},{"content":"The log files do not contain source code information.","pos":[535,588]},{"content":"To run code analysis on the driver","pos":[592,626]},{"content":"In Microsoft Visual Studio Ultimate 2012, select the driver project file and then right-click to open the project properties.","pos":[634,759]},{"content":"Select <bpt id=\"p1\">**</bpt>Windows 8 Release<ept id=\"p1\">**</ept> as the <bpt id=\"p2\">**</bpt>Configuration<ept id=\"p2\">**</ept> and <bpt id=\"p3\">**</bpt>x64<ept id=\"p3\">**</ept> as the <bpt id=\"p4\">**</bpt>Platform<ept id=\"p4\">**</ept>.","pos":[760,846],"source":" Select **Windows 8 Release** as the **Configuration** and **x64** as the **Platform**."},{"pos":[851,931],"content":"From the <bpt id=\"p1\">**</bpt>Analyze<ept id=\"p1\">**</ept> or <bpt id=\"p2\">**</bpt>Build<ept id=\"p2\">**</ept> menu, click <bpt id=\"p3\">**</bpt>Run Code Analysis on Solution<ept id=\"p3\">**</ept>.","source":"From the **Analyze** or **Build** menu, click **Run Code Analysis on Solution**."},{"content":"If errors or warnings are found, use the <bpt id=\"p1\">**</bpt>Code Analysis Report<ept id=\"p1\">**</ept> window to investigate the cause of the errors.","pos":[936,1048],"source":"If errors or warnings are found, use the **Code Analysis Report** window to investigate the cause of the errors."},{"content":"Use the warning messages to fix those problems.","pos":[1049,1096]},{"content":"For more information about the Code Analysis tool, see <bpt id=\"p1\">[</bpt>How to run Code Analysis for drivers<ept id=\"p1\">](https://msdn.microsoft.com/en-us/Library/Windows/Hardware/Hh454219)</ept> and <bpt id=\"p2\">[</bpt>Analyzing C/C++ Code Quality by Using Code Analysis<ept id=\"p2\">](http://go.microsoft.com/fwlink/p/?linkid=226836)</ept>.","pos":[1097,1366],"source":" For more information about the Code Analysis tool, see [How to run Code Analysis for drivers](https://msdn.microsoft.com/en-us/Library/Windows/Hardware/Hh454219) and [Analyzing C/C++ Code Quality by Using Code Analysis](http://go.microsoft.com/fwlink/p/?linkid=226836)."},{"content":"The Code Analysis tool for drivers writes the results to the file vc.nativecodeanalysis.all.xml in the build configuration and platform sub-directory of your project, for example, \\\\Windows 8Release\\\\x64.","pos":[1368,1572]},{"pos":[1652,1659],"content":"Remarks"},{"content":"Code Analysis for Drivers is a compile-time static verification tool that detects basic coding errors in C and C++ programs and includes a specialized module that is designed to detect errors in (primarily) kernel-mode driver code.","pos":[1747,1978]},{"content":"In previous versions of the WDK, the driver-specific module for code analysis was part of a stand-alone tool called PREfast for Drivers (PFD).","pos":[1979,2121]},{"content":"You can also run the Code Analysis tool from a Visual Studio Command Prompt window.","pos":[2123,2206]},{"content":"Set up the environment by running one of the following batch files.","pos":[2207,2274]},{"content":"-Or-","pos":[2361,2365]},{"content":"Run the Code Analysis tool.","pos":[2458,2485]},{"content":"For the most up-to-date information about the requirements for the Driver Verification Log, refer to the WDK Release Notes.","pos":[2699,2822]},{"pos":[2857,2871],"content":"Related topics"},{"content":"Creating a driver verification log","pos":[2924,2958]},{"content":"Creating a log file for Static Driver Verifier","pos":[3002,3048]},{"content":"Code Analysis for Drivers","pos":[3104,3129]},{"content":"Hardware Certification Program","pos":[3202,3232]},{"content":"Analyzing C/C++ Code Quality by Using Code Analysis","pos":[3286,3337]},{"content":"How to run Code Analysis for drivers","pos":[3391,3427]},{"pos":[3503,4474],"content":"<bpt id=\"p1\">[</bpt>Send comments about this topic to Microsoft<ept id=\"p1\">]</ept><bpt id=\"p2\">(mailto:wsddocfb@microsoft.com?subject=Documentation%20feedback%20[VsDriver\\vsdriver]:%20Creating%20a%20log%20file%20for%20the%20code%20analysis%20tool%20%20RELEASE:%20%289/30/2015%29&amp;body=%0A%0APRIVACY%20STATEMENT%0A%0AWe%20use%20your%20feedback%20to%20improve%20the%20documentation.%20We%20don't%20use%20your%20email%20address%20for%20any%20other%20purpose,%20and%20we'll%20remove%20your%20email%20address%20from%20our%20system%20after%20the%20issue%20that%20you're%20reporting%20is%20fixed.%20While%20we're%20working%20to%20fix%20this%20issue,%20we%20might%20send%20you%20an%20email%20message%20to%20ask%20for%20more%20info.%20Later,%20we%20might%20also%20send%20you%20an%20email%20message%20to%20let%20you%20know%20that%20we've%20addressed%20your%20feedback.%0A%0AFor%20more%20info%20about%20Microsoft's%20privacy%20policy,%20see%20http://privacy.microsoft.com/en-us/default. \"</bpt>Send comments about this topic to Microsoft<ept id=\"p2\">\")</ept>","source":"[Send comments about this topic to Microsoft](mailto:wsddocfb@microsoft.com?subject=Documentation%20feedback%20[VsDriver\\vsdriver]:%20Creating%20a%20log%20file%20for%20the%20code%20analysis%20tool%20%20RELEASE:%20%289/30/2015%29&body=%0A%0APRIVACY%20STATEMENT%0A%0AWe%20use%20your%20feedback%20to%20improve%20the%20documentation.%20We%20don't%20use%20your%20email%20address%20for%20any%20other%20purpose,%20and%20we'll%20remove%20your%20email%20address%20from%20our%20system%20after%20the%20issue%20that%20you're%20reporting%20is%20fixed.%20While%20we're%20working%20to%20fix%20this%20issue,%20we%20might%20send%20you%20an%20email%20message%20to%20ask%20for%20more%20info.%20Later,%20we%20might%20also%20send%20you%20an%20email%20message%20to%20let%20you%20know%20that%20we've%20addressed%20your%20feedback.%0A%0AFor%20more%20info%20about%20Microsoft's%20privacy%20policy,%20see%20http://privacy.microsoft.com/en-us/default. \"Send comments about this topic to Microsoft\")"}],"content":"Creating a log file for the code analysis tool\n========================================================================================================================\n\nThe Windows Server 2012 [Hardware Certification Program](http://go.microsoft.com/fwlink/p/?linkid=227016) requires a Driver Verification Log (DVL) for all applicable driver submissions. You must run the Code Analysis tool prior to creating a DVL for your driver. The DVL contains a summary of the results from the Code Analysis and Static Driver Verifier log files. The log files do not contain source code information.\n\n**To run code analysis on the driver**\n\n1.  In Microsoft Visual Studio Ultimate 2012, select the driver project file and then right-click to open the project properties. Select **Windows 8 Release** as the **Configuration** and **x64** as the **Platform**.\n2.  From the **Analyze** or **Build** menu, click **Run Code Analysis on Solution**.\n3.  If errors or warnings are found, use the **Code Analysis Report** window to investigate the cause of the errors. Use the warning messages to fix those problems. For more information about the Code Analysis tool, see [How to run Code Analysis for drivers](https://msdn.microsoft.com/en-us/Library/Windows/Hardware/Hh454219) and [Analyzing C/C++ Code Quality by Using Code Analysis](http://go.microsoft.com/fwlink/p/?linkid=226836).\n\nThe Code Analysis tool for drivers writes the results to the file vc.nativecodeanalysis.all.xml in the build configuration and platform sub-directory of your project, for example, \\\\Windows 8Release\\\\x64.\n\n<span id=\"Remarks\"></span><span id=\"remarks\"></span><span id=\"REMARKS\"></span>Remarks\n-------------------------------------------------------------------------------------\n\nCode Analysis for Drivers is a compile-time static verification tool that detects basic coding errors in C and C++ programs and includes a specialized module that is designed to detect errors in (primarily) kernel-mode driver code. In previous versions of the WDK, the driver-specific module for code analysis was part of a stand-alone tool called PREfast for Drivers (PFD).\n\nYou can also run the Code Analysis tool from a Visual Studio Command Prompt window. Set up the environment by running one of the following batch files.\n\n``` syntax\n\"C:\\Program Files\\Microsoft Visual Studio 11.0\\VC\\vcvarsall.bat\" x64\n```\n\n-Or-\n\n``` syntax\n\"C:\\Program Files (x86)\\Microsoft Visual Studio 11.0\\VC\\vcvarsall.bat\" x64\n```\n\nRun the Code Analysis tool.\n\n``` syntax\nmsbuild.exe <vcxprojectfile> /p:Configuration=\"Win8 Release\" /P:Platform=x64 /target:clean\nmsbuild.exe <vcxprojectfile> /p:Configuration=\"Win8 Release\" /P:Platform=x64 /P:RunCodeAnalysisOnce=True\n```\n\nFor the most up-to-date information about the requirements for the Driver Verification Log, refer to the WDK Release Notes.\n\n<span id=\"related_topics\"></span>Related topics\n-----------------------------------------------\n\n* [Creating a driver verification log](creating_a_driver_verification_log.md)\n* [Creating a log file for Static Driver Verifier](creating_a_log_file_for_static_driver_verifier.md)\n* [Code Analysis for Drivers](https://msdn.microsoft.com/en-us/Library/Windows/Hardware/Hh454182)\n* [Hardware Certification Program](http://go.microsoft.com/fwlink/p/?linkid=227016)\n* [Analyzing C/C++ Code Quality by Using Code Analysis](http://go.microsoft.com/fwlink/p/?linkid=226836)\n* [How to run Code Analysis for drivers](https://msdn.microsoft.com/en-us/Library/Windows/Hardware/Hh454219)\n \n\n \n\n[Send comments about this topic to Microsoft](mailto:wsddocfb@microsoft.com?subject=Documentation%20feedback%20[VsDriver\\vsdriver]:%20Creating%20a%20log%20file%20for%20the%20code%20analysis%20tool%20%20RELEASE:%20%289/30/2015%29&body=%0A%0APRIVACY%20STATEMENT%0A%0AWe%20use%20your%20feedback%20to%20improve%20the%20documentation.%20We%20don't%20use%20your%20email%20address%20for%20any%20other%20purpose,%20and%20we'll%20remove%20your%20email%20address%20from%20our%20system%20after%20the%20issue%20that%20you're%20reporting%20is%20fixed.%20While%20we're%20working%20to%20fix%20this%20issue,%20we%20might%20send%20you%20an%20email%20message%20to%20ask%20for%20more%20info.%20Later,%20we%20might%20also%20send%20you%20an%20email%20message%20to%20let%20you%20know%20that%20we've%20addressed%20your%20feedback.%0A%0AFor%20more%20info%20about%20Microsoft's%20privacy%20policy,%20see%20http://privacy.microsoft.com/en-us/default. \"Send comments about this topic to Microsoft\")\n\n\n"}