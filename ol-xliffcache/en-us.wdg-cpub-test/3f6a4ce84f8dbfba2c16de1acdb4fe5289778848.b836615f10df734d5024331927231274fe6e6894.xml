{"nodes":[{"pos":[17,246],"content":"This article explains how to receive content in your Universal Windows Platform (UWP) app shared from another app using Share contract. This Share contract allows your app to be presented as an option when the user invokes Share.","needQuote":true,"needEscape":true,"nodes":[{"content":"This article explains how to receive content in your Universal Windows Platform (UWP) app shared from another app using Share contract. This Share contract allows your app to be presented as an option when the user invokes Share.","pos":[0,229],"nodes":[{"content":"This article explains how to receive content in your Universal Windows Platform (UWP) app shared from another app using Share contract.","pos":[0,135]},{"content":"This Share contract allows your app to be presented as an option when the user invokes Share.","pos":[136,229]}]}]},{"pos":[254,266],"content":"Receive data","needQuote":true,"needEscape":true,"nodes":[{"content":"Receive data","pos":[0,12]}]},{"content":"Receive data","pos":[323,335]},{"content":"\\[ Updated for UWP apps on Windows 10.","pos":[337,375]},{"content":"For Windows 8.x articles, see the <bpt id=\"p1\">[</bpt>archive<ept id=\"p1\">](http://go.microsoft.com/fwlink/p/?linkid=619132)</ept> \\]","pos":[376,471],"source":" For Windows 8.x articles, see the [archive](http://go.microsoft.com/fwlink/p/?linkid=619132) \\]"},{"content":"This article explains how to receive content in your Universal Windows Platform (UWP) app shared from another app using Share contract.","pos":[474,609]},{"content":"This Share contract allows your app to be presented as an option when the user invokes Share.","pos":[610,703]},{"content":"Declare your app as a share target","pos":[708,742]},{"content":"The system displays a list of possible target apps when a user invokes Share.","pos":[744,821]},{"content":"In order to appear on the list, your app need to declare that it supports the Share contract.","pos":[822,915]},{"content":"This lets the system know that your app is available to receive content.","pos":[916,988]},{"content":"Open the manifest file.","pos":[994,1017]},{"content":"It should be called something like <bpt id=\"p1\">**</bpt>package.appxmanifest<ept id=\"p1\">**</ept>.","pos":[1018,1078],"source":" It should be called something like **package.appxmanifest**."},{"pos":[1083,1113],"content":"Open the <bpt id=\"p1\">**</bpt>Declarations<ept id=\"p1\">**</ept> tab.","source":"Open the **Declarations** tab."},{"pos":[1118,1201],"content":"Choose <bpt id=\"p1\">**</bpt>Share Target<ept id=\"p1\">**</ept> from the <bpt id=\"p2\">**</bpt>Available Declarations<ept id=\"p2\">**</ept> list and click <bpt id=\"p3\">**</bpt>Add<ept id=\"p3\">**</ept>.","source":"Choose **Share Target** from the **Available Declarations** list and click **Add**."},{"content":"Choose file types and formats","pos":[1206,1235]},{"content":"Next, decide what file types and data formats you support.","pos":[1237,1295]},{"content":"The Share APIs support several standard formats, such as Text, HTML, and Bitmap.","pos":[1296,1376]},{"content":"You can also specify custom file types and data formats.","pos":[1377,1433]},{"content":"If you do, remember that source apps have to know what those types and formats are, otherwise those apps can't use the formats to share data.","pos":[1434,1575]},{"content":"Only register for formats your app can handle.","pos":[1577,1623]},{"content":"Only target apps that support the data being shared appear when the user invokes share.","pos":[1624,1711]},{"content":"To set file types:","pos":[1713,1731]},{"content":"Open the manifest file.","pos":[1737,1760]},{"content":"It should be called something like <bpt id=\"p1\">**</bpt>package.appxmanifest<ept id=\"p1\">**</ept>.","pos":[1761,1821],"source":" It should be called something like **package.appxmanifest**."},{"pos":[1826,1914],"content":"In the <bpt id=\"p1\">**</bpt>Supported File Types<ept id=\"p1\">**</ept> section of the <bpt id=\"p2\">**</bpt>Declarations<ept id=\"p2\">**</ept> page, click <bpt id=\"p3\">**</bpt>Add New<ept id=\"p3\">**</ept>.","source":"In the **Supported File Types** section of the **Declarations** page, click **Add New**."},{"content":"Type the file name extension that you want to support.","pos":[1919,1973]},{"content":"For example, .docx.","pos":[1974,1993]},{"content":"You need to include the period.","pos":[1994,2025]},{"content":"If you want to support all file types, check the <bpt id=\"p1\">**</bpt>SupportsAnyFileType<ept id=\"p1\">**</ept> box.","pos":[2026,2103],"source":" If you want to support all file types, check the **SupportsAnyFileType** box."},{"content":"To set data formats:","pos":[2105,2125]},{"content":"Open the manifest file.","pos":[2131,2154]},{"pos":[2159,2244],"content":"Open the <bpt id=\"p1\">**</bpt>Data Formats<ept id=\"p1\">**</ept> section of the <bpt id=\"p2\">**</bpt>Declarations<ept id=\"p2\">**</ept> page and click <bpt id=\"p3\">**</bpt>Add New<ept id=\"p3\">**</ept>.","source":"Open the **Data Formats** section of the **Declarations** page and click **Add New**."},{"content":"Type the name of the data format you support.","pos":[2249,2294]},{"content":"For example, \"Text\".","pos":[2295,2315]},{"content":"Handle share activation","pos":[2320,2343]},{"content":"When a user selects your app (usually by selecting it from a list of available target apps in the share UI), an [<bpt id=\"p1\">**</bpt>Application.OnShareTargetActivated<ept id=\"p1\">**</ept>][OnShareTargetActivated] event is raised.","pos":[2345,2538],"source":"When a user selects your app (usually by selecting it from a list of available target apps in the share UI), an [**Application.OnShareTargetActivated**][OnShareTargetActivated] event is raised."},{"content":"Your app needs to handle this event to process the data the user wants to share.","pos":[2539,2619]},{"content":"Note that if your app is running when it is activated as a Share target, the existing instance of your app is terminated and a new instance of your app is launched to handle the contract.","pos":[2621,2808]},{"content":"The data that the user wants to share is contained in a ShareOperation object.","pos":[3099,3177]},{"content":"You can use this object to check the format of the data it contains.","pos":[3178,3246]},{"content":"Report sharing status","pos":[3616,3637]},{"content":"In some cases, it can take time for your app to process the data it wants to share.","pos":[3639,3722]},{"content":"Examples include users sharing collections of files or images.","pos":[3723,3785]},{"content":"These items are larger than a simple text string, so they take longer to process.","pos":[3786,3867]},{"content":"After calling [<bpt id=\"p1\">**</bpt>ReportStarted<ept id=\"p1\">**</ept>][ReportStarted], don't expect any more user interaction with your app.","pos":[3919,4022],"source":"After calling [**ReportStarted**][ReportStarted], don't expect any more user interaction with your app."},{"content":"As a result, you shouldn't call it unless your app is at a point where it can be dismissed by the user.","pos":[4023,4126]},{"content":"With an extended share, it's possible that the user might dismiss the source app before your app has all the data from the DataPackage object.","pos":[4128,4270]},{"content":"As a result, we recommend that you let the system know when your app has acquired the data it needs.","pos":[4271,4371]},{"content":"This way, the system can suspend or terminate the source app as necessary.","pos":[4372,4446]},{"content":"If something goes wrong, call [<bpt id=\"p1\">**</bpt>ReportError<ept id=\"p1\">**</ept>][ReportError] to send an error message to the system.","pos":[4508,4608],"source":"If something goes wrong, call [**ReportError**][ReportError] to send an error message to the system."},{"content":"The user will see the message when they check on the status of the share.","pos":[4609,4682]},{"content":"At that point, your app is shut down and the share is ended.","pos":[4683,4743]},{"content":"The user will need to start again to share the content to your app.","pos":[4744,4811]},{"content":"Depending on your scenario, you may decide that a particular error isn't serious enough to end the share operation.","pos":[4812,4927]},{"content":"In that case, you can choose to not call <bpt id=\"p1\">**</bpt>ReportError<ept id=\"p1\">**</ept> and to continue with the share.","pos":[4928,5016],"source":" In that case, you can choose to not call **ReportError** and to continue with the share."},{"pos":[5116,5264],"content":"Finally, when your app has successfully processed the shared content, you should call [<bpt id=\"p1\">**</bpt>ReportCompleted<ept id=\"p1\">**</ept>][ReportCompleted] to let the system know.","source":"Finally, when your app has successfully processed the shared content, you should call [**ReportCompleted**][ReportCompleted] to let the system know."},{"content":"When you use these methods, you usually call them in the order just described, and you don't call them more than once.","pos":[5311,5429]},{"content":"However, there are times when a target app can call [<bpt id=\"p1\">**</bpt>ReportDataRetrieved<ept id=\"p1\">**</ept>][ReportDataRetrieved] before [<bpt id=\"p2\">**</bpt>ReportStarted<ept id=\"p2\">**</ept>][ReportStarted].","pos":[5430,5571],"source":" However, there are times when a target app can call [**ReportDataRetrieved**][ReportDataRetrieved] before [**ReportStarted**][ReportStarted]."},{"content":"For example, the app might retrieve the data as part of a task in the activation handler, but not call <bpt id=\"p1\">**</bpt>ReportStarted<ept id=\"p1\">**</ept> until the user clicks a Share button.","pos":[5572,5730],"source":" For example, the app might retrieve the data as part of a task in the activation handler, but not call **ReportStarted** until the user clicks a Share button."},{"content":"Return a QuickLink if sharing was successful","pos":[5735,5779]},{"content":"When a user selects your app to receive content, we recommend that you create a [<bpt id=\"p1\">**</bpt>QuickLink<ept id=\"p1\">**</ept>][QuickLink].","pos":[5781,5888],"source":"When a user selects your app to receive content, we recommend that you create a [**QuickLink**][QuickLink]."},{"content":"A <bpt id=\"p1\">**</bpt>QuickLink<ept id=\"p1\">**</ept> is like a shortcut that makes it easier for users to share information with your app.","pos":[5889,5990],"source":" A **QuickLink** is like a shortcut that makes it easier for users to share information with your app."},{"content":"For example, you could create a <bpt id=\"p1\">**</bpt>QuickLink<ept id=\"p1\">**</ept> that opens a new mail message pre-configured with a friend's email address.","pos":[5991,6112],"source":" For example, you could create a **QuickLink** that opens a new mail message pre-configured with a friend's email address."},{"content":"A <bpt id=\"p1\">**</bpt>QuickLink<ept id=\"p1\">**</ept> must have a title, an icon, and an Id.","pos":[6114,6168],"source":"A **QuickLink** must have a title, an icon, and an Id."},{"content":"The title (like \"Email Mom\") and icon appear when the user taps the Share charm.","pos":[6169,6249]},{"content":"The Id is what your app uses to access any custom information, such as an email address or login credentials.","pos":[6250,6359]},{"content":"When your app creates a <bpt id=\"p1\">**</bpt>QuickLink<ept id=\"p1\">**</ept>, the app returns the <bpt id=\"p2\">**</bpt>QuickLink<ept id=\"p2\">**</ept> to the system by calling [<bpt id=\"p3\">**</bpt>ReportCompleted<ept id=\"p3\">**</ept>][ReportCompleted].","pos":[6360,6497],"source":" When your app creates a **QuickLink**, the app returns the **QuickLink** to the system by calling [**ReportCompleted**][ReportCompleted]."},{"content":"A <bpt id=\"p1\">**</bpt>QuickLink<ept id=\"p1\">**</ept> does not actually store data.","pos":[6499,6544],"source":"A **QuickLink** does not actually store data."},{"content":"Instead, it contains an identifier that, when selected, is sent to your app.","pos":[6545,6621]},{"content":"Your app is responsible for storing the Id of the <bpt id=\"p1\">**</bpt>QuickLink<ept id=\"p1\">**</ept> and the corresponding user data.","pos":[6622,6718],"source":" Your app is responsible for storing the Id of the **QuickLink** and the corresponding user data."},{"content":"When the user taps the <bpt id=\"p1\">**</bpt>QuickLink<ept id=\"p1\">**</ept>, you can get its Id through the [<bpt id=\"p2\">**</bpt>ShareOperation.QuickLinkId<ept id=\"p2\">**</ept>][QuickLInkId] property.","pos":[6719,6843],"source":" When the user taps the **QuickLink**, you can get its Id through the [**ShareOperation.QuickLinkId**][QuickLInkId] property."},{"content":"Related topics","pos":[7737,7751]},{"content":"Share data","pos":[7755,7765]},{"content":"OnShareTargetActivated","pos":[7802,7824]},{"content":"ReportStarted","pos":[7940,7953]},{"content":"ReportError","pos":[8097,8108]},{"content":"ReportCompleted","pos":[8250,8265]},{"content":"ReportDataRetrieved","pos":[8412,8431]},{"content":"ReportStarted","pos":[8581,8594]},{"content":"QuickLink","pos":[8738,8747]},{"content":"QuickLInkId","pos":[8872,8883]}],"content":"---\ndescription: This article explains how to receive content in your Universal Windows Platform (UWP) app shared from another app using Share contract. This Share contract allows your app to be presented as an option when the user invokes Share.\ntitle: Receive data\nms.assetid: 0AFF9E0D-DFF4-4018-B393-A26B11AFDB41\n---\n\n# Receive data\n\n\\[ Updated for UWP apps on Windows 10. For Windows 8.x articles, see the [archive](http://go.microsoft.com/fwlink/p/?linkid=619132) \\]\n\n\nThis article explains how to receive content in your Universal Windows Platform (UWP) app shared from another app using Share contract. This Share contract allows your app to be presented as an option when the user invokes Share.\n\n## Declare your app as a share target\n\nThe system displays a list of possible target apps when a user invokes Share. In order to appear on the list, your app need to declare that it supports the Share contract. This lets the system know that your app is available to receive content.\n\n1.  Open the manifest file. It should be called something like **package.appxmanifest**.\n2.  Open the **Declarations** tab.\n3.  Choose **Share Target** from the **Available Declarations** list and click **Add**.\n\n## Choose file types and formats\n\nNext, decide what file types and data formats you support. The Share APIs support several standard formats, such as Text, HTML, and Bitmap. You can also specify custom file types and data formats. If you do, remember that source apps have to know what those types and formats are, otherwise those apps can't use the formats to share data.\n\nOnly register for formats your app can handle. Only target apps that support the data being shared appear when the user invokes share.\n\nTo set file types:\n\n1.  Open the manifest file. It should be called something like **package.appxmanifest**.\n2.  In the **Supported File Types** section of the **Declarations** page, click **Add New**.\n3.  Type the file name extension that you want to support. For example, .docx. You need to include the period. If you want to support all file types, check the **SupportsAnyFileType** box.\n\nTo set data formats:\n\n1.  Open the manifest file.\n2.  Open the **Data Formats** section of the **Declarations** page and click **Add New**.\n3.  Type the name of the data format you support. For example, \"Text\".\n\n## Handle share activation\n\nWhen a user selects your app (usually by selecting it from a list of available target apps in the share UI), an [**Application.OnShareTargetActivated**][OnShareTargetActivated] event is raised. Your app needs to handle this event to process the data the user wants to share.\n\nNote that if your app is running when it is activated as a Share target, the existing instance of your app is terminated and a new instance of your app is launched to handle the contract.\n\n<!-- For some reason, the snippets in this file are all inline in the WDCML topic. Suggest moving to VS project with rest of snippets. -->\n```cs\nprotected override async void OnShareTargetActivated(ShareTargetActivatedEventArgs args)\n{\n    // Code to handle activation goes here. \n} \n```\n\nThe data that the user wants to share is contained in a ShareOperation object. You can use this object to check the format of the data it contains.\n\n```cs\nShareOperation shareOperation = args.ShareOperation;\nif (shareOperation.Data.Contains(StandardDataFormats.Text))\n{\n    string text = await shareOperation.Data.GetTextAsync();\n\n    // To output the text from this example, you need a TextBlock control\n    // with a name of &quot;sharedContent&quot;.\n    sharedContent.Text = &quot;Text: &quot; + text;\n} \n```\n\n## Report sharing status\n\nIn some cases, it can take time for your app to process the data it wants to share. Examples include users sharing collections of files or images. These items are larger than a simple text string, so they take longer to process.\n\n```cs\nshareOperation.ReportDataRetreived(); \n```\n\nAfter calling [**ReportStarted**][ReportStarted], don't expect any more user interaction with your app. As a result, you shouldn't call it unless your app is at a point where it can be dismissed by the user.\n\nWith an extended share, it's possible that the user might dismiss the source app before your app has all the data from the DataPackage object. As a result, we recommend that you let the system know when your app has acquired the data it needs. This way, the system can suspend or terminate the source app as necessary.\n\n```cs\nshareOperation.ReportSubmittedBackgroundTask(); \n```\n\nIf something goes wrong, call [**ReportError**][ReportError] to send an error message to the system. The user will see the message when they check on the status of the share. At that point, your app is shut down and the share is ended. The user will need to start again to share the content to your app. Depending on your scenario, you may decide that a particular error isn't serious enough to end the share operation. In that case, you can choose to not call **ReportError** and to continue with the share.\n\n```cs\nshareOperation.ReportError(&quot;Could not reach the server! Try again later.&quot;); \n```\n\nFinally, when your app has successfully processed the shared content, you should call [**ReportCompleted**][ReportCompleted] to let the system know.\n\n```cs\nshareOperation.ReportCompleted();\n```\n\nWhen you use these methods, you usually call them in the order just described, and you don't call them more than once. However, there are times when a target app can call [**ReportDataRetrieved**][ReportDataRetrieved] before [**ReportStarted**][ReportStarted]. For example, the app might retrieve the data as part of a task in the activation handler, but not call **ReportStarted** until the user clicks a Share button.\n\n## Return a QuickLink if sharing was successful\n\nWhen a user selects your app to receive content, we recommend that you create a [**QuickLink**][QuickLink]. A **QuickLink** is like a shortcut that makes it easier for users to share information with your app. For example, you could create a **QuickLink** that opens a new mail message pre-configured with a friend's email address.\n\nA **QuickLink** must have a title, an icon, and an Id. The title (like \"Email Mom\") and icon appear when the user taps the Share charm. The Id is what your app uses to access any custom information, such as an email address or login credentials. When your app creates a **QuickLink**, the app returns the **QuickLink** to the system by calling [**ReportCompleted**][ReportCompleted].\n\nA **QuickLink** does not actually store data. Instead, it contains an identifier that, when selected, is sent to your app. Your app is responsible for storing the Id of the **QuickLink** and the corresponding user data. When the user taps the **QuickLink**, you can get its Id through the [**ShareOperation.QuickLinkId**][QuickLInkId] property.\n\n```cs\nasync void ReportCompleted(ShareOperation shareOperation, string quickLinkId, string quickLinkTitle)\n{\n    QuickLink quickLinkInfo = new QuickLink\n    {\n        Id = quickLinkId,\n        Title = quickLinkTitle,\n\n        // For quicklinks, the supported FileTypes and DataFormats are set \n        // independently from the manifest\n        SupportedFileTypes = { &quot;*&quot; },\n        SupportedDataFormats = { StandardDataFormats.Text, StandardDataFormats.Uri, \n                StandardDataFormats.Bitmap, StandardDataFormats.StorageItems }\n    };\n\n    StorageFile iconFile = await Windows.ApplicationModel.Package.Current.InstalledLocation.CreateFileAsync(\n            &quot;assets\\\\user.png&quot;, CreationCollisionOption.OpenIfExists);\n    quickLinkInfo.Thumbnail = RandomAccessStreamReference.CreateFromFile(iconFile);\n    shareOperation.ReportCompleted(quickLinkInfo);\n}\n```\n\n## Related topics\n* [Share data](share-data.md)\n \n<!-- LINKS -->\n* [OnShareTargetActivated](https://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.application.onsharetargetactivated.aspx)\n* [ReportStarted](https://msdn.microsoft.com/en-us/library/windows/apps/windows.applicationmodel.datatransfer.sharetarget.shareoperation.reportstarted.aspx)\n* [ReportError](https://msdn.microsoft.com/en-us/library/windows/apps/windows.applicationmodel.datatransfer.sharetarget.shareoperation.reporterror.aspx)\n* [ReportCompleted](https://msdn.microsoft.com/en-us/library/windows/apps/windows.applicationmodel.datatransfer.sharetarget.shareoperation.reportecompleted.aspx)\n* [ReportDataRetrieved](https://msdn.microsoft.com/en-us/library/windows/apps/windows.applicationmodel.datatransfer.sharetarget.shareoperation.reportdataretrieved.aspx)\n* [ReportStarted](https://msdn.microsoft.com/en-us/library/windows/apps/windows.applicationmodel.datatransfer.sharetarget.shareoperation.reportstarted.aspx)\n* [QuickLink](https://msdn.microsoft.com/en-us/library/windows/apps/windows.applicationmodel.datatransfer.sharetarget.quicklink.aspx)\n* [QuickLInkId](https://msdn.microsoft.com/en-us/library/windows/apps/windows.applicationmodel.datatransfer.sharetarget.quicklink.id.aspx)\n\n\n"}