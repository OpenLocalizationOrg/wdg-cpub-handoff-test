{"nodes":[{"pos":[11,24],"content":"App lifecycle","needQuote":true,"needEscape":true,"nodes":[{"content":"App lifecycle","pos":[0,13]}]},{"pos":[38,165],"content":"This topic describes the lifecycle of a Universal Windows Platform (UWP) app, from the time it is activated until it is closed.","needQuote":true,"needEscape":true,"nodes":[{"content":"This topic describes the lifecycle of a Universal Windows Platform (UWP) app, from the time it is activated until it is closed.","pos":[0,127]}]},{"content":"App lifecycle","pos":[222,235]},{"content":"\\[ Updated for UWP apps on Windows 10.","pos":[238,276]},{"content":"For Windows 8.x articles, see the <bpt id=\"p1\">[</bpt>archive<ept id=\"p1\">](http://go.microsoft.com/fwlink/p/?linkid=619132)</ept> \\]","pos":[277,372],"source":" For Windows 8.x articles, see the [archive](http://go.microsoft.com/fwlink/p/?linkid=619132) \\]"},{"content":"Important APIs","pos":[377,391]},{"content":"Windows.UI.Xaml.Application class","pos":[402,435]},{"content":"Windows.ApplicationModel.Activation namespace","pos":[504,549]},{"content":"This topic describes the lifecycle of a Universal Windows Platform (UWP) app, from the time it is activated until it is closed.","pos":[612,739]},{"content":"Many users spread their work and play across multiple devices and apps.","pos":[740,811]},{"content":"Users now expect your app to remember its state as they multitask on their device.","pos":[812,894]},{"content":"For example, they expect the page to be scrolled to the same position and all of the controls to be in the same state as before.","pos":[895,1023]},{"content":"By understanding the application lifecycle of launching, suspending, and resuming, you can provide this kind of seamless behavior.","pos":[1024,1154]},{"content":"App execution state","pos":[1159,1178]},{"content":"This illustration represents the transitions between app execution states.","pos":[1181,1255]},{"content":"We describe these states and events in the next several sections.","pos":[1256,1321]},{"content":"For more info about each state transition and what your app should do in response, see the reference for the <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>ApplicationExecutionState<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/br224694)</ept> enumeration.","pos":[1322,1533],"source":" For more info about each state transition and what your app should do in response, see the reference for the [**ApplicationExecutionState**](https://msdn.microsoft.com/library/windows/apps/br224694) enumeration."},{"content":"state diagram showing transitions between app execution states","pos":[1537,1599]},{"content":"Deployment","pos":[1631,1641]},{"content":"In order for an app to be activated it must first be deployed.","pos":[1644,1706]},{"content":"You app is deployed when a user installs your app or when you use Visual Studio to build and run your app during development and testing.","pos":[1707,1844]},{"content":"For more info on this and on advanced deployment scenarios, see <bpt id=\"p1\">[</bpt>App packages and deployment<ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/hh464929)</ept>.","pos":[1845,1997],"source":" For more info on this and on advanced deployment scenarios, see [App packages and deployment](https://msdn.microsoft.com/library/windows/apps/hh464929)."},{"content":"App launch","pos":[2002,2012]},{"content":"An app is launched when it is in the <bpt id=\"p1\">**</bpt>NotRunning<ept id=\"p1\">**</ept> state and the user taps the app tile on the start screen or on the application list.","pos":[2015,2151],"source":"An app is launched when it is in the **NotRunning** state and the user taps the app tile on the start screen or on the application list."},{"content":"Frequently used apps may also be prelaunched to optimize responsiveness (see <bpt id=\"p1\">[</bpt>Handle app prelaunch<ept id=\"p1\">](handle-app-prelaunch.md)</ept>).","pos":[2152,2278],"source":" Frequently used apps may also be prelaunched to optimize responsiveness (see [Handle app prelaunch](handle-app-prelaunch.md))."},{"content":"An app could be in the <bpt id=\"p1\">**</bpt>NotRunning<ept id=\"p1\">**</ept> state because it has never been launched, because it was running but then crashed, or because it was suspended but then couldn't be kept in memory and was terminated by the system.","pos":[2279,2497],"source":" An app could be in the **NotRunning** state because it has never been launched, because it was running but then crashed, or because it was suspended but then couldn't be kept in memory and was terminated by the system."},{"content":"Launching is different then activation.","pos":[2498,2537]},{"content":"Activation is when your app is activated via a contract or extension such as the Search contract.","pos":[2538,2635]},{"content":"The <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>OnLaunched<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/br242335)</ept> method is called when an app is launched— including when the app is currently suspended in memory.","pos":[2637,2814],"source":"The [**OnLaunched**](https://msdn.microsoft.com/library/windows/apps/br242335) method is called when an app is launched— including when the app is currently suspended in memory."},{"content":"The <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>LaunchActivatedEventArgs<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/br224731)</ept> parameter contains the previous state of your app and the activation arguments.","pos":[2815,2987],"source":" The [**LaunchActivatedEventArgs**](https://msdn.microsoft.com/library/windows/apps/br224731) parameter contains the previous state of your app and the activation arguments."},{"content":"When the user switches to your terminated app, the system sends the <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>LaunchActivatedEventArgs<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/br224731)</ept> args with <bpt id=\"p3\">[</bpt><bpt id=\"p4\">**</bpt>Kind<ept id=\"p4\">**</ept><ept id=\"p3\">](https://msdn.microsoft.com/library/windows/apps/br224728)</ept> set to <bpt id=\"p5\">**</bpt>Launch<ept id=\"p5\">**</ept> and <bpt id=\"p6\">[</bpt><bpt id=\"p7\">**</bpt>PreviousExecutionState<ept id=\"p7\">**</ept><ept id=\"p6\">](https://msdn.microsoft.com/library/windows/apps/br224729)</ept> set to <bpt id=\"p8\">**</bpt>Terminated<ept id=\"p8\">**</ept> or <bpt id=\"p9\">**</bpt>ClosedByUser<ept id=\"p9\">**</ept>.","pos":[2989,3376],"source":"When the user switches to your terminated app, the system sends the [**LaunchActivatedEventArgs**](https://msdn.microsoft.com/library/windows/apps/br224731) args with [**Kind**](https://msdn.microsoft.com/library/windows/apps/br224728) set to **Launch** and [**PreviousExecutionState**](https://msdn.microsoft.com/library/windows/apps/br224729) set to **Terminated** or **ClosedByUser**."},{"content":"The app should load its saved application data and refresh its displayed content.","pos":[3377,3458]},{"pos":[3460,3647],"content":"If the value of <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>PreviousExecutionState<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/br224729)</ept> is <bpt id=\"p3\">**</bpt>NotRunning<ept id=\"p3\">**</ept>, the app should start over as if it were being initially launched.","source":"If the value of [**PreviousExecutionState**](https://msdn.microsoft.com/library/windows/apps/br224729) is **NotRunning**, the app should start over as if it were being initially launched."},{"content":"When an app is launched, Windows displays a splash screen for the app.","pos":[3649,3719]},{"content":"To configure the splash screen, see <bpt id=\"p1\">[</bpt>Adding a splash screen<ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/xaml/hh465331)</ept>.","pos":[3720,3844],"source":" To configure the splash screen, see [Adding a splash screen](https://msdn.microsoft.com/library/windows/apps/xaml/hh465331)."},{"content":"While the splash screen is displayed, your app should ready its user interface.","pos":[3846,3925]},{"content":"The primary tasks for the app are to register event handlers and set up any custom UI it needs for loading the initial page.","pos":[3926,4050]},{"content":"These tasks should only take a few seconds.","pos":[4051,4094]},{"content":"If an app needs to request data from the network or needs to retrieve large amounts of data from disk, these activities should be completed outside of activation.","pos":[4095,4257]},{"content":"An app can use its own custom loading UI or an extended splash screen while it waits for these long running operations to finish.","pos":[4258,4387]},{"content":"See <bpt id=\"p1\">[</bpt>Display a splash screen for more time<ept id=\"p1\">](create-a-customized-splash-screen.md)</ept> and the <bpt id=\"p2\">[</bpt>Splash screen sample<ept id=\"p2\">](http://go.microsoft.com/fwlink/p/?linkid=234889)</ept> for more info.","pos":[4388,4564],"source":" See [Display a splash screen for more time](create-a-customized-splash-screen.md) and the [Splash screen sample](http://go.microsoft.com/fwlink/p/?linkid=234889) for more info."},{"content":"After the app completes activation, it enters the <bpt id=\"p1\">**</bpt>Running<ept id=\"p1\">**</ept> state and the splash screen disappears (and all its resources and objects are cleared).","pos":[4565,4714],"source":" After the app completes activation, it enters the **Running** state and the splash screen disappears (and all its resources and objects are cleared)."},{"content":"App activation","pos":[4719,4733]},{"content":"An app can be activated by the user through a variety of extensions and contracts such as the Share contract.","pos":[4736,4845]},{"content":"For a list of ways your app can be activated, see <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>ActivationKind<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/br224693)</ept>.","pos":[4846,4975],"source":" For a list of ways your app can be activated, see [**ActivationKind**](https://msdn.microsoft.com/library/windows/apps/br224693)."},{"content":"The <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>Windows.UI.Xaml.Application<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/br242324)</ept> class defines methods you can override to handle the various activation types.","pos":[4977,5151],"source":"The [**Windows.UI.Xaml.Application**](https://msdn.microsoft.com/library/windows/apps/br242324) class defines methods you can override to handle the various activation types."},{"content":"Several of the activation types have a specific method that you can override such as such as <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>OnFileActivated<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/br242331)</ept>, <bpt id=\"p3\">[</bpt><bpt id=\"p4\">**</bpt>OnSearchActivated<ept id=\"p4\">**</ept><ept id=\"p3\">](https://msdn.microsoft.com/library/windows/apps/br242336)</ept>, etc. For the other activation types, override the <bpt id=\"p5\">[</bpt><bpt id=\"p6\">**</bpt>OnActivated<ept id=\"p6\">**</ept><ept id=\"p5\">](https://msdn.microsoft.com/library/windows/apps/br242330)</ept> method.","pos":[5152,5542],"source":" Several of the activation types have a specific method that you can override such as such as [**OnFileActivated**](https://msdn.microsoft.com/library/windows/apps/br242331), [**OnSearchActivated**](https://msdn.microsoft.com/library/windows/apps/br242336), etc. For the other activation types, override the [**OnActivated**](https://msdn.microsoft.com/library/windows/apps/br242330) method."},{"pos":[5544,5660],"content":"Your app's activation code can test to see why it was activated and whether it was already in the <bpt id=\"p1\">**</bpt>Running<ept id=\"p1\">**</ept> state.","source":"Your app's activation code can test to see why it was activated and whether it was already in the **Running** state."},{"content":"Your app can restore previously saved data during activation in the event that the operating system terminated your app, and the user subsequently re-launched it.","pos":[5662,5824]},{"content":"Windows may terminate your app after it has been suspended for a number of reasons.","pos":[5825,5908]},{"content":"The user may manually close your app, or sign out, or the system may be running low on resources.","pos":[5909,6006]},{"content":"If the user launches your app after Windows has terminated it, the app receives an <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>Application.OnActivated<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/br242330)</ept> callback and the user sees your app's splash screen until the app is activated.","pos":[6007,6257],"source":" If the user launches your app after Windows has terminated it, the app receives an [**Application.OnActivated**](https://msdn.microsoft.com/library/windows/apps/br242330) callback and the user sees your app's splash screen until the app is activated."},{"content":"You can use this event to determine whether your app needs to restore the data which it had saved when it was last suspended, or whether you must load your app’s default data.","pos":[6258,6433]},{"content":"Because the splash screen is up, your app code can invest some processing time to get this done without there being any apparent delay to the user although previously-mentioned concerns about long-running operations also apply if you're restarting or continuing.","pos":[6434,6696]},{"content":"The <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>OnActivated<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/br242330)</ept> event data includes a <bpt id=\"p3\">[</bpt><bpt id=\"p4\">**</bpt>PreviousExecutionState<ept id=\"p4\">**</ept><ept id=\"p3\">](https://msdn.microsoft.com/library/windows/apps/br224729)</ept> property that tells you which state your app was in before it was activated.","pos":[6698,6963],"source":"The [**OnActivated**](https://msdn.microsoft.com/library/windows/apps/br242330) event data includes a [**PreviousExecutionState**](https://msdn.microsoft.com/library/windows/apps/br224729) property that tells you which state your app was in before it was activated."},{"content":"This property is one of the values from the <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>ApplicationExecutionState<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/br224694)</ept> enumeration:","pos":[6964,7110],"source":" This property is one of the values from the [**ApplicationExecutionState**](https://msdn.microsoft.com/library/windows/apps/br224694) enumeration:"},{"content":"Reason for termination","pos":[7114,7136]},{"pos":[7194,7298],"content":"Value of <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>PreviousExecutionState<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/br224729)</ept> property","source":"Value of [**PreviousExecutionState**](https://msdn.microsoft.com/library/windows/apps/br224729) property"},{"content":"Action to take","pos":[7301,7315]},{"content":"Terminated by the system (for example, because of resource constraints)","pos":[7543,7614]},{"content":"Terminated","pos":[7625,7635]},{"content":"Restore session data","pos":[7729,7749]},{"content":"Closed by the user, or process-terminated by user","pos":[7757,7806]},{"content":"ClosedByUser","pos":[7839,7851]},{"content":"Start with default data","pos":[7943,7966]},{"pos":[7971,8048],"content":"Unexpectedly terminated, or app has not run during the <bpt id=\"p1\">*</bpt>current user session<ept id=\"p1\">*</ept>","source":"Unexpectedly terminated, or app has not run during the *current user session*"},{"content":"NotRunning","pos":[8053,8063]},{"content":"Start with default data","pos":[8157,8180]},{"content":"<bpt id=\"p1\">**</bpt>Note<ept id=\"p1\">**</ept>  <bpt id=\"p2\">*</bpt>Current user session<ept id=\"p2\">*</ept> is based on Windows logon.","pos":[8187,8246],"source":"**Note**  *Current user session* is based on Windows logon."},{"content":"So long as the current user hasn't explicitly logged off, shut down, or Windows hasn't restarted for other reasons, the current user session persists across events such as lock screen authentication, switch-user and so on.","pos":[8247,8469]},{"pos":[8474,8765],"content":"<bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>PreviousExecutionState<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/br224729)</ept> could also have a value of <bpt id=\"p3\">**</bpt>Running<ept id=\"p3\">**</ept> or <bpt id=\"p4\">**</bpt>Suspended<ept id=\"p4\">**</ept>, but in these cases your app was not previously terminated and therefore you don’t have to restore any data because everything is already in memory.","source":"[**PreviousExecutionState**](https://msdn.microsoft.com/library/windows/apps/br224729) could also have a value of **Running** or **Suspended**, but in these cases your app was not previously terminated and therefore you don’t have to restore any data because everything is already in memory."},{"content":"Note","pos":[8769,8773]},{"content":"If you log on using the computer's Administrator account, you can't activate any UWP apps.","pos":[8779,8869]},{"pos":[8871,8965],"content":"For more info, see <bpt id=\"p1\">[</bpt>App extensions<ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/hh464906)</ept>.","source":"For more info, see [App extensions](https://msdn.microsoft.com/library/windows/apps/hh464906)."},{"pos":[8971,9014],"content":"<bpt id=\"p1\">**</bpt>OnActivated<ept id=\"p1\">**</ept> versus specific activations","source":"**OnActivated** versus specific activations"},{"content":"The <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>OnActivated<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/br242330)</ept> method is the means to handle all possible activation types.","pos":[9016,9156],"source":"The [**OnActivated**](https://msdn.microsoft.com/library/windows/apps/br242330) method is the means to handle all possible activation types."},{"content":"However, it's more common to use different methods to handle the most common activation types, and use <bpt id=\"p1\">**</bpt>OnActivated<ept id=\"p1\">**</ept> only as the fallback method for the less common activation types.","pos":[9157,9341],"source":" However, it's more common to use different methods to handle the most common activation types, and use **OnActivated** only as the fallback method for the less common activation types."},{"content":"For example, <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>Application<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/br242324)</ept> has an <bpt id=\"p3\">[</bpt><bpt id=\"p4\">**</bpt>OnLaunched<ept id=\"p4\">**</ept><ept id=\"p3\">](https://msdn.microsoft.com/library/windows/apps/br242335)</ept> method that's invoked as a callback whenever <bpt id=\"p5\">[</bpt><bpt id=\"p6\">**</bpt>ActivationKind<ept id=\"p6\">**</ept><ept id=\"p5\">](https://msdn.microsoft.com/library/windows/apps/br224693)</ept> is <bpt id=\"p7\">**</bpt>Launch<ept id=\"p7\">**</ept>, and this is the typical activation for most apps.","pos":[9342,9701],"source":" For example, [**Application**](https://msdn.microsoft.com/library/windows/apps/br242324) has an [**OnLaunched**](https://msdn.microsoft.com/library/windows/apps/br242335) method that's invoked as a callback whenever [**ActivationKind**](https://msdn.microsoft.com/library/windows/apps/br224693) is **Launch**, and this is the typical activation for most apps."},{"content":"There are 6 more <bpt id=\"p1\">**</bpt>On\\*<ept id=\"p1\">**</ept> methods for specific activations: <bpt id=\"p2\">[</bpt><bpt id=\"p3\">**</bpt>OnCachedFileUpdaterActivated<ept id=\"p3\">**</ept><ept id=\"p2\">](https://msdn.microsoft.com/library/windows/apps/hh701797)</ept>, <bpt id=\"p4\">[</bpt><bpt id=\"p5\">**</bpt>OnFileActivated<ept id=\"p5\">**</ept><ept id=\"p4\">](https://msdn.microsoft.com/library/windows/apps/br242331)</ept>, <bpt id=\"p6\">[</bpt><bpt id=\"p7\">**</bpt>OnFileOpenPickerActivated<ept id=\"p7\">**</ept><ept id=\"p6\">](https://msdn.microsoft.com/library/windows/apps/hh701799)</ept>, <bpt id=\"p8\">[</bpt><bpt id=\"p9\">**</bpt>OnFileSavePickerActivated<ept id=\"p9\">**</ept><ept id=\"p8\">](https://msdn.microsoft.com/library/windows/apps/hh701801)</ept>, <bpt id=\"p10\">[</bpt><bpt id=\"p11\">**</bpt>OnSearchActivated<ept id=\"p11\">**</ept><ept id=\"p10\">](https://msdn.microsoft.com/library/windows/apps/br242336)</ept>, <bpt id=\"p12\">[</bpt><bpt id=\"p13\">**</bpt>OnShareTargetActivated<ept id=\"p13\">**</ept><ept id=\"p12\">](https://msdn.microsoft.com/library/windows/apps/hh701806)</ept>.","pos":[9702,10289],"source":" There are 6 more **On\\*** methods for specific activations: [**OnCachedFileUpdaterActivated**](https://msdn.microsoft.com/library/windows/apps/hh701797), [**OnFileActivated**](https://msdn.microsoft.com/library/windows/apps/br242331), [**OnFileOpenPickerActivated**](https://msdn.microsoft.com/library/windows/apps/hh701799), [**OnFileSavePickerActivated**](https://msdn.microsoft.com/library/windows/apps/hh701801), [**OnSearchActivated**](https://msdn.microsoft.com/library/windows/apps/br242336), [**OnShareTargetActivated**](https://msdn.microsoft.com/library/windows/apps/hh701806)."},{"content":"Starting templates for a XAML app have an implementation for <bpt id=\"p1\">**</bpt>OnLaunched<ept id=\"p1\">**</ept> and a handler for <bpt id=\"p2\">[</bpt><bpt id=\"p3\">**</bpt>Suspending<ept id=\"p3\">**</ept><ept id=\"p2\">](https://msdn.microsoft.com/library/windows/apps/br242341)</ept>.","pos":[10290,10459],"source":" Starting templates for a XAML app have an implementation for **OnLaunched** and a handler for [**Suspending**](https://msdn.microsoft.com/library/windows/apps/br242341)."},{"content":"App suspend","pos":[10464,10475]},{"content":"The system suspends your app whenever the user switches to another app or to the desktop or Start screen.","pos":[10478,10583]},{"content":"You app may also be suspended when the device enters a low power state.","pos":[10584,10655]},{"content":"The system resumes your app whenever the user switches back to it.","pos":[10656,10722]},{"content":"When the system resumes your app, the content of your variables and data structures is the same as it was before the system suspended the app.","pos":[10723,10865]},{"content":"The system restores the app exactly where it left off, so that it appears to the user as if it's been running in the background.","pos":[10866,10994]},{"content":"When the user moves an app to the background, Windows waits a few seconds to see whether the user will immediately switch back to the app so that the transition will be fast if they do.","pos":[10996,11181]},{"content":"If the user does not switch back within this time window, Windows suspends the app.","pos":[11182,11265]},{"content":"If you need to do asynchronous work when your app is being suspended you will need to defer completion of suspend until after your work completes.","pos":[11267,11413]},{"content":"You can use the <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>GetDeferral<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/br224690)</ept> method on the <bpt id=\"p3\">[</bpt><bpt id=\"p4\">**</bpt>SuspendingOperation<ept id=\"p4\">**</ept><ept id=\"p3\">](https://msdn.microsoft.com/library/windows/apps/br224688)</ept> object (available via the event args) to delay completion of suspend until after you call the <bpt id=\"p5\">[</bpt><bpt id=\"p6\">**</bpt>Complete<ept id=\"p6\">**</ept><ept id=\"p5\">](https://msdn.microsoft.com/library/windows/apps/br224685)</ept> method on the returned <bpt id=\"p7\">[</bpt><bpt id=\"p8\">**</bpt>SuspendingDeferral<ept id=\"p8\">**</ept><ept id=\"p7\">](https://msdn.microsoft.com/library/windows/apps/br224684)</ept> object.","pos":[11414,11884],"source":" You can use the [**GetDeferral**](https://msdn.microsoft.com/library/windows/apps/br224690) method on the [**SuspendingOperation**](https://msdn.microsoft.com/library/windows/apps/br224688) object (available via the event args) to delay completion of suspend until after you call the [**Complete**](https://msdn.microsoft.com/library/windows/apps/br224685) method on the returned [**SuspendingDeferral**](https://msdn.microsoft.com/library/windows/apps/br224684) object."},{"content":"The system attempts to keep your app and its data in memory while it's suspended.","pos":[11886,11967]},{"content":"However, if the system does not have the resources to keep your app in memory, the system will terminate your app.","pos":[11968,12082]},{"content":"Apps don't receive a notification that they are being terminated, so the only opportunity you have to save your app's data is during suspension.","pos":[12083,12227]},{"content":"When an app determines that it has been activated after being terminated, it should load the application data that it saved during suspend so that the app is in the same state as if was before it was suspended.","pos":[12228,12438]},{"content":"When the user switches back to a suspended app that has been terminated, the app should restore its application data in its <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>OnLaunched<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/br242335)</ept> method.","pos":[12439,12645],"source":" When the user switches back to a suspended app that has been terminated, the app should restore its application data in its [**OnLaunched**](https://msdn.microsoft.com/library/windows/apps/br242335) method."},{"content":"The system doesn't notify an app when it's terminated, so your app must save its application data and release exclusive resources and file handles when it's suspended, and restore them when the app is activated after termination.","pos":[12646,12875]},{"content":"If an app has registered an event handler for the <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>Application.Suspending<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/br242341)</ept> event, this code is called immediately before the app is suspended.","pos":[12877,13081],"source":"If an app has registered an event handler for the [**Application.Suspending**](https://msdn.microsoft.com/library/windows/apps/br242341) event, this code is called immediately before the app is suspended."},{"content":"You can use the event handler to save app and user data.","pos":[13082,13138]},{"content":"We recommended that you use the application data APIs for this purpose because they are guaranteed to complete before the app enters the <bpt id=\"p1\">**</bpt>Suspended<ept id=\"p1\">**</ept> state.","pos":[13139,13296],"source":" We recommended that you use the application data APIs for this purpose because they are guaranteed to complete before the app enters the **Suspended** state."},{"content":"For more info, see <bpt id=\"p1\">[</bpt>Store and retrieve settings and other app data<ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/mt299098)</ept>.","pos":[13297,13423],"source":" For more info, see [Store and retrieve settings and other app data](https://msdn.microsoft.com/library/windows/apps/mt299098)."},{"content":"You should also release exclusive resources and file handles so that other apps can access them while your app isn't using them.","pos":[13425,13553]},{"content":"Examples of exclusive resources include cameras, I/O devices, external devices, and network resources.","pos":[13554,13656]},{"content":"Explicitly releasing exclusive resources and file handles helps to ensure that other apps can access them while your app isn't using them.","pos":[13657,13795]},{"content":"When the app is activated after termination, it should reopen its exclusive resources and file handles.","pos":[13796,13899]},{"content":"Generally, your app should save its state and release its resources and file handles immediately when handling the suspending event, and the code should not take more than a second to complete.","pos":[13901,14094]},{"content":"If an app does not return from the suspending event within a few seconds, Windows assumes that the app has stopped responding and terminates it.","pos":[14095,14239]},{"content":"There are some app scenarios where the app must continue to run to complete background tasks.","pos":[14241,14334]},{"content":"For example, your app can continue to play audio in the background; for more info, see <bpt id=\"p1\">[</bpt>Background Audio<ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/mt282140)</ept>).","pos":[14335,14500],"source":" For example, your app can continue to play audio in the background; for more info, see [Background Audio](https://msdn.microsoft.com/library/windows/apps/mt282140))."},{"content":"Also, background transfer operations continue even if your app is suspended or even terminated; for more info, see <bpt id=\"p1\">[</bpt>How to download a file<ept id=\"p1\">](https://msdn.microsoft.com/en-us/library/windows/apps/xaml/jj152726.aspx#downloading_a_file_using_background_transfer)</ept>).","pos":[14501,14761],"source":" Also, background transfer operations continue even if your app is suspended or even terminated; for more info, see [How to download a file](https://msdn.microsoft.com/en-us/library/windows/apps/xaml/jj152726.aspx#downloading_a_file_using_background_transfer))."},{"pos":[14763,14881],"content":"For guidelines, see <bpt id=\"p1\">[</bpt>Guidelines for app suspend and resume<ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/hh465088)</ept>.","source":"For guidelines, see [Guidelines for app suspend and resume](https://msdn.microsoft.com/library/windows/apps/hh465088)."},{"content":"<bpt id=\"p1\">**</bpt>A note about debugging using Visual Studio:  <ept id=\"p1\">**</ept>Visual Studio prevents Windows from suspending an app that is attached to the debugger.","pos":[14883,15019],"source":"**A note about debugging using Visual Studio:  **Visual Studio prevents Windows from suspending an app that is attached to the debugger."},{"content":"This is to allow the user to view the Visual Studio debug UI while the app is running.","pos":[15020,15106]},{"content":"When you're debugging an app, you can send it a suspend event using Visual Studio.","pos":[15107,15189]},{"content":"Make sure the <bpt id=\"p1\">**</bpt>Debug Location<ept id=\"p1\">**</ept> toolbar is being shown, then click the <bpt id=\"p2\">**</bpt>Suspend<ept id=\"p2\">**</ept> icon.","pos":[15190,15279],"source":" Make sure the **Debug Location** toolbar is being shown, then click the **Suspend** icon."},{"content":"App visibility","pos":[15284,15298]},{"content":"When the user switches from your app to another app, your app is no longer visible but remains in the <bpt id=\"p1\">**</bpt>Running<ept id=\"p1\">**</ept> state until Windows suspends it.","pos":[15301,15447],"source":"When the user switches from your app to another app, your app is no longer visible but remains in the **Running** state until Windows suspends it."},{"content":"If the user switches away from your app but activates or switches back to it before it can suspended, the app remains in the <bpt id=\"p1\">**</bpt>Running<ept id=\"p1\">**</ept> state.","pos":[15448,15591],"source":" If the user switches away from your app but activates or switches back to it before it can suspended, the app remains in the **Running** state."},{"content":"Your app doesn't receive an activation event when its visibility changes because the app is still running.","pos":[15593,15699]},{"content":"Windows simply switches to and from the app as necessary.","pos":[15700,15757]},{"content":"If your app needs to do something when the user switches away and back, handle the <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>Window.VisibilityChanged<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/hh702458)</ept> event.","pos":[15758,15936],"source":" If your app needs to do something when the user switches away and back, handle the [**Window.VisibilityChanged**](https://msdn.microsoft.com/library/windows/apps/hh702458) event."},{"content":"Do not rely on a specific ordering of these events.","pos":[15938,15989]},{"content":"App resume","pos":[15994,16004]},{"content":"A suspended app is resumed when the user switches to it or when it is the active app when the device comes out of a low power state.","pos":[16007,16139]},{"content":"For an enumeration of the states that your app can be in when your app is resumed, see <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>ApplicationExecutionState<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/br224694)</ept>.","pos":[16141,16318],"source":"For an enumeration of the states that your app can be in when your app is resumed, see [**ApplicationExecutionState**](https://msdn.microsoft.com/library/windows/apps/br224694)."},{"content":"When an app is resumed from the <bpt id=\"p1\">**</bpt>Suspended<ept id=\"p1\">**</ept> state, it enters the <bpt id=\"p2\">**</bpt>Running<ept id=\"p2\">**</ept> state and continues from where it was when it was suspended.","pos":[16319,16458],"source":" When an app is resumed from the **Suspended** state, it enters the **Running** state and continues from where it was when it was suspended."},{"content":"No app data stored in memory is lost.","pos":[16459,16496]},{"content":"Therefore, most apps don't need to do anything when they are resumed.","pos":[16497,16566]},{"content":"However, the app could have been suspended for hours or even days.","pos":[16567,16633]},{"content":"If your app has content or network connections that may have gone stale, these should be refreshed when the app resumes.","pos":[16634,16754]},{"content":"If an app registered an event handler for the <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>Application.Resuming<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/br242339)</ept> event, it is called when the app is resumed from the <bpt id=\"p3\">**</bpt>Suspended<ept id=\"p3\">**</ept> state.","pos":[16755,16959],"source":" If an app registered an event handler for the [**Application.Resuming**](https://msdn.microsoft.com/library/windows/apps/br242339) event, it is called when the app is resumed from the **Suspended** state."},{"content":"You can refresh your app content and data using this event handler.","pos":[16960,17027]},{"pos":[17029,17180],"content":"If a suspended app is activated to participate in an app contract or extension, it receives the <bpt id=\"p1\">**</bpt>Resuming<ept id=\"p1\">**</ept> event first, then the <bpt id=\"p2\">**</bpt>Activated<ept id=\"p2\">**</ept> event.","source":"If a suspended app is activated to participate in an app contract or extension, it receives the **Resuming** event first, then the **Activated** event."},{"content":"While en an app is suspended, it does not receive any of the network events that it registered to receive.","pos":[17182,17288]},{"content":"These network events are not queued, they are simply missed.","pos":[17289,17349]},{"content":"Therefore, your app should test the network status when it is resumed.","pos":[17350,17420]},{"pos":[17422,17644],"content":"<bpt id=\"p1\">**</bpt>Note<ept id=\"p1\">**</ept>  Because the <bpt id=\"p2\">[</bpt><bpt id=\"p3\">**</bpt>Resuming<ept id=\"p3\">**</ept><ept id=\"p2\">](https://msdn.microsoft.com/library/windows/apps/br242339)</ept> event is not raised from the UI thread, a dispatcher must be used if the code in your resume handler communicates with your UI.","source":"**Note**  Because the [**Resuming**](https://msdn.microsoft.com/library/windows/apps/br242339) event is not raised from the UI thread, a dispatcher must be used if the code in your resume handler communicates with your UI."},{"pos":[17649,17767],"content":"For guidelines, see <bpt id=\"p1\">[</bpt>Guidelines for app suspend and resume<ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/hh465088)</ept>.","source":"For guidelines, see [Guidelines for app suspend and resume](https://msdn.microsoft.com/library/windows/apps/hh465088)."},{"content":"App close","pos":[17772,17781]},{"content":"Generally, users don't need to close apps, they can let Windows manage them.","pos":[17784,17860]},{"content":"However, users can choose to close an app using the close gesture or by pressing Alt+F4 on Windows or by using the task switcher on Windows Phone.","pos":[17861,18007]},{"content":"There's no special event to indicate that the user closed the app.","pos":[18009,18075]},{"pos":[18077,18197],"content":"After an app has been closed by the user, it's first suspended and then terminated, and enters the <bpt id=\"p1\">**</bpt>NotRunning<ept id=\"p1\">**</ept> state.","source":"After an app has been closed by the user, it's first suspended and then terminated, and enters the **NotRunning** state."},{"content":"In Windows 8.1 and later, after an app has been closed by the user, the app is removed from the screen and switch list but not explicitly terminated.","pos":[18199,18348]},{"content":"If an app has registered an event handler for the <bpt id=\"p1\">**</bpt>Suspending<ept id=\"p1\">**</ept> event, it is called when the app is suspended.","pos":[18350,18461],"source":"If an app has registered an event handler for the **Suspending** event, it is called when the app is suspended."},{"content":"You can use this event handler to save relevant application and user data to persistent storage.","pos":[18462,18558]},{"content":"<bpt id=\"p1\">**</bpt>Closed-by-user behavior:  <ept id=\"p1\">**</ept>If your app needs to do something different when it is closed by the user than when it is closed by Windows, you can use the activation event handler to determine whether the app was terminated by the user or by Windows.","pos":[18560,18810],"source":"**Closed-by-user behavior:  **If your app needs to do something different when it is closed by the user than when it is closed by Windows, you can use the activation event handler to determine whether the app was terminated by the user or by Windows."},{"content":"See the descriptions of <bpt id=\"p1\">**</bpt>ClosedByUser<ept id=\"p1\">**</ept> and <bpt id=\"p2\">**</bpt>Terminated<ept id=\"p2\">**</ept> states in the reference for the <bpt id=\"p3\">[</bpt><bpt id=\"p4\">**</bpt>ApplicationExecutionState<ept id=\"p4\">**</ept><ept id=\"p3\">](https://msdn.microsoft.com/library/windows/apps/br224694)</ept> enumeration.","pos":[18811,19005],"source":" See the descriptions of **ClosedByUser** and **Terminated** states in the reference for the [**ApplicationExecutionState**](https://msdn.microsoft.com/library/windows/apps/br224694) enumeration."},{"content":"We recommend that apps not close themselves programmatically unless absolutely necessary.","pos":[19007,19096]},{"content":"For example, if an app detects a memory leak, it can close itself to ensure the security of the user's personal data.","pos":[19097,19214]},{"content":"When you close an app programmatically, the system treats it as an app crash.","pos":[19215,19292]},{"content":"App crash","pos":[19297,19306]},{"content":"The system crash experience is designed to get users back to what they were doing as quickly as possible.","pos":[19309,19414]},{"content":"You shouldn't provide a warning dialog or other notification because that will delay the user.","pos":[19415,19509]},{"content":"If your app crashes, stops responding, or generates an exception, a problem report is sent to Microsoft per the user's <bpt id=\"p1\">[</bpt>feedback and diagnostics settings<ept id=\"p1\">](http://go.microsoft.com/fwlink/p/?LinkID=614828)</ept>.","pos":[19511,19715],"source":"If your app crashes, stops responding, or generates an exception, a problem report is sent to Microsoft per the user's [feedback and diagnostics settings](http://go.microsoft.com/fwlink/p/?LinkID=614828)."},{"content":"Microsoft provides a subset of the error data in the problem report to you so that you can use it to improve your app.","pos":[19716,19834]},{"content":"You'll be able to see this data in your app's Quality page in your Dashboard.","pos":[19835,19912]},{"content":"When the user activates an app after it crashes, its activation event handler receives an <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>ApplicationExecutionState<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/br224694)</ept> value of <bpt id=\"p3\">**</bpt>NotRunning<ept id=\"p3\">**</ept>, and should display its initial UI and data.","pos":[19914,20162],"source":"When the user activates an app after it crashes, its activation event handler receives an [**ApplicationExecutionState**](https://msdn.microsoft.com/library/windows/apps/br224694) value of **NotRunning**, and should display its initial UI and data."},{"content":"After a crash, don't routinely use the app data you would have used for <bpt id=\"p1\">**</bpt>Resuming<ept id=\"p1\">**</ept> with <bpt id=\"p2\">**</bpt>Suspended<ept id=\"p2\">**</ept> because that data could be corrupt; see <bpt id=\"p3\">[</bpt>Guidelines for app suspend and resume<ept id=\"p3\">](https://msdn.microsoft.com/library/windows/apps/hh465088)</ept>.","pos":[20163,20405],"source":" After a crash, don't routinely use the app data you would have used for **Resuming** with **Suspended** because that data could be corrupt; see [Guidelines for app suspend and resume](https://msdn.microsoft.com/library/windows/apps/hh465088)."},{"content":"App removal","pos":[20410,20421]},{"content":"When a user deletes your app, the app is removed, along with all its local data.","pos":[20424,20504]},{"content":"Removing an app doesn't affect the user's data that was stored in common locations such as the Documents or Pictures libraries.","pos":[20505,20632]},{"content":"App lifecycle and the Visual Studio project templates","pos":[20637,20690]},{"content":"The basic code that is relevant to the app lifecycle is provided in the starting Visual Studio project templates.","pos":[20693,20806]},{"content":"The basic app handles launch activation, provides a place for you to restore your app data, and displays the primary UI even before you've added any of your own code.","pos":[20807,20973]},{"content":"For more info, see <bpt id=\"p1\">[</bpt>C#, VB, and C++ project templates for apps<ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/hh768232)</ept>.","pos":[20974,21096],"source":" For more info, see [C#, VB, and C++ project templates for apps](https://msdn.microsoft.com/library/windows/apps/hh768232)."},{"content":"Application lifecycle key APIs","pos":[21101,21131]},{"pos":[21138,21236],"content":"<bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>Windows.ApplicationModel<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/br224691)</ept> namespace","source":"[**Windows.ApplicationModel**](https://msdn.microsoft.com/library/windows/apps/br224691) namespace"},{"pos":[21241,21350],"content":"<bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>Windows.ApplicationModel.Activation<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/br224766)</ept> namespace","source":"[**Windows.ApplicationModel.Activation**](https://msdn.microsoft.com/library/windows/apps/br224766) namespace"},{"pos":[21355,21458],"content":"<bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>Windows.ApplicationModel.Core<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/br205865)</ept> namespace","source":"[**Windows.ApplicationModel.Core**](https://msdn.microsoft.com/library/windows/apps/br205865) namespace"},{"pos":[21463,21567],"content":"<bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>Windows.UI.Xaml.Application<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/br242324)</ept> class (XAML)","source":"[**Windows.UI.Xaml.Application**](https://msdn.microsoft.com/library/windows/apps/br242324) class (XAML)"},{"pos":[21572,21671],"content":"<bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>Windows.UI.Xaml.Window<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/br209041)</ept> class (XAML)","source":"[**Windows.UI.Xaml.Window**](https://msdn.microsoft.com/library/windows/apps/br209041) class (XAML)"},{"content":"Note","pos":[21675,21679]},{"content":"This article is for Windows 10 developers writing Universal Windows Platform (UWP) apps.","pos":[21684,21772]},{"content":"If you’re developing for Windows 8.x or Windows Phone 8.x, see the <bpt id=\"p1\">[</bpt>archived documentation<ept id=\"p1\">](http://go.microsoft.com/fwlink/p/?linkid=619132)</ept>.","pos":[21773,21914],"source":" If you’re developing for Windows 8.x or Windows Phone 8.x, see the [archived documentation](http://go.microsoft.com/fwlink/p/?linkid=619132)."},{"content":"Related topics","pos":[21922,21936]},{"content":"Guidelines for app suspend and resume","pos":[21942,21979]},{"content":"Handle app prelaunch","pos":[22042,22062]},{"content":"Handle app activation","pos":[22092,22113]},{"content":"Handle app suspend","pos":[22138,22156]},{"content":"Handle app resume","pos":[22180,22197]}],"content":"---\ntitle: App lifecycle\ndescription: This topic describes the lifecycle of a Universal Windows Platform (UWP) app, from the time it is activated until it is closed.\nms.assetid: 6C469E77-F1E3-4859-A27B-C326F9616D10\n---\n\n# App lifecycle\n\n\n\\[ Updated for UWP apps on Windows 10. For Windows 8.x articles, see the [archive](http://go.microsoft.com/fwlink/p/?linkid=619132) \\]\n\n\n**Important APIs**\n\n-   [**Windows.UI.Xaml.Application class**](https://msdn.microsoft.com/library/windows/apps/br242324)\n-   [**Windows.ApplicationModel.Activation namespace**](https://msdn.microsoft.com/library/windows/apps/br224766)\n\nThis topic describes the lifecycle of a Universal Windows Platform (UWP) app, from the time it is activated until it is closed. Many users spread their work and play across multiple devices and apps. Users now expect your app to remember its state as they multitask on their device. For example, they expect the page to be scrolled to the same position and all of the controls to be in the same state as before. By understanding the application lifecycle of launching, suspending, and resuming, you can provide this kind of seamless behavior.\n\n## App execution state\n\n\nThis illustration represents the transitions between app execution states. We describe these states and events in the next several sections. For more info about each state transition and what your app should do in response, see the reference for the [**ApplicationExecutionState**](https://msdn.microsoft.com/library/windows/apps/br224694) enumeration.\n\n![state diagram showing transitions between app execution states](images/state-diagram.png)\n\n## Deployment\n\n\nIn order for an app to be activated it must first be deployed. You app is deployed when a user installs your app or when you use Visual Studio to build and run your app during development and testing. For more info on this and on advanced deployment scenarios, see [App packages and deployment](https://msdn.microsoft.com/library/windows/apps/hh464929).\n\n## App launch\n\n\nAn app is launched when it is in the **NotRunning** state and the user taps the app tile on the start screen or on the application list. Frequently used apps may also be prelaunched to optimize responsiveness (see [Handle app prelaunch](handle-app-prelaunch.md)). An app could be in the **NotRunning** state because it has never been launched, because it was running but then crashed, or because it was suspended but then couldn't be kept in memory and was terminated by the system. Launching is different then activation. Activation is when your app is activated via a contract or extension such as the Search contract.\n\nThe [**OnLaunched**](https://msdn.microsoft.com/library/windows/apps/br242335) method is called when an app is launched— including when the app is currently suspended in memory. The [**LaunchActivatedEventArgs**](https://msdn.microsoft.com/library/windows/apps/br224731) parameter contains the previous state of your app and the activation arguments.\n\nWhen the user switches to your terminated app, the system sends the [**LaunchActivatedEventArgs**](https://msdn.microsoft.com/library/windows/apps/br224731) args with [**Kind**](https://msdn.microsoft.com/library/windows/apps/br224728) set to **Launch** and [**PreviousExecutionState**](https://msdn.microsoft.com/library/windows/apps/br224729) set to **Terminated** or **ClosedByUser**. The app should load its saved application data and refresh its displayed content.\n\nIf the value of [**PreviousExecutionState**](https://msdn.microsoft.com/library/windows/apps/br224729) is **NotRunning**, the app should start over as if it were being initially launched.\n\nWhen an app is launched, Windows displays a splash screen for the app. To configure the splash screen, see [Adding a splash screen](https://msdn.microsoft.com/library/windows/apps/xaml/hh465331).\n\nWhile the splash screen is displayed, your app should ready its user interface. The primary tasks for the app are to register event handlers and set up any custom UI it needs for loading the initial page. These tasks should only take a few seconds. If an app needs to request data from the network or needs to retrieve large amounts of data from disk, these activities should be completed outside of activation. An app can use its own custom loading UI or an extended splash screen while it waits for these long running operations to finish. See [Display a splash screen for more time](create-a-customized-splash-screen.md) and the [Splash screen sample](http://go.microsoft.com/fwlink/p/?linkid=234889) for more info. After the app completes activation, it enters the **Running** state and the splash screen disappears (and all its resources and objects are cleared).\n\n## App activation\n\n\nAn app can be activated by the user through a variety of extensions and contracts such as the Share contract. For a list of ways your app can be activated, see [**ActivationKind**](https://msdn.microsoft.com/library/windows/apps/br224693).\n\nThe [**Windows.UI.Xaml.Application**](https://msdn.microsoft.com/library/windows/apps/br242324) class defines methods you can override to handle the various activation types. Several of the activation types have a specific method that you can override such as such as [**OnFileActivated**](https://msdn.microsoft.com/library/windows/apps/br242331), [**OnSearchActivated**](https://msdn.microsoft.com/library/windows/apps/br242336), etc. For the other activation types, override the [**OnActivated**](https://msdn.microsoft.com/library/windows/apps/br242330) method.\n\nYour app's activation code can test to see why it was activated and whether it was already in the **Running** state.\n\nYour app can restore previously saved data during activation in the event that the operating system terminated your app, and the user subsequently re-launched it. Windows may terminate your app after it has been suspended for a number of reasons. The user may manually close your app, or sign out, or the system may be running low on resources. If the user launches your app after Windows has terminated it, the app receives an [**Application.OnActivated**](https://msdn.microsoft.com/library/windows/apps/br242330) callback and the user sees your app's splash screen until the app is activated. You can use this event to determine whether your app needs to restore the data which it had saved when it was last suspended, or whether you must load your app’s default data. Because the splash screen is up, your app code can invest some processing time to get this done without there being any apparent delay to the user although previously-mentioned concerns about long-running operations also apply if you're restarting or continuing.\n\nThe [**OnActivated**](https://msdn.microsoft.com/library/windows/apps/br242330) event data includes a [**PreviousExecutionState**](https://msdn.microsoft.com/library/windows/apps/br224729) property that tells you which state your app was in before it was activated. This property is one of the values from the [**ApplicationExecutionState**](https://msdn.microsoft.com/library/windows/apps/br224694) enumeration:\n\n| Reason for termination                                                        | Value of [**PreviousExecutionState**](https://msdn.microsoft.com/library/windows/apps/br224729) property | Action to take          |\n|-------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------|-------------------------|\n| Terminated by the system (for example, because of resource constraints)       | **Terminated**                                                                                          | Restore session data    |\n| Closed by the user, or process-terminated by user                             | **ClosedByUser**                                                                                        | Start with default data |\n| Unexpectedly terminated, or app has not run during the *current user session* | **NotRunning**                                                                                          | Start with default data |\n\n \n\n**Note**  *Current user session* is based on Windows logon. So long as the current user hasn't explicitly logged off, shut down, or Windows hasn't restarted for other reasons, the current user session persists across events such as lock screen authentication, switch-user and so on.\n\n \n\n[**PreviousExecutionState**](https://msdn.microsoft.com/library/windows/apps/br224729) could also have a value of **Running** or **Suspended**, but in these cases your app was not previously terminated and therefore you don’t have to restore any data because everything is already in memory.\n\n**Note**  \n\nIf you log on using the computer's Administrator account, you can't activate any UWP apps.\n\nFor more info, see [App extensions](https://msdn.microsoft.com/library/windows/apps/hh464906).\n\n### **OnActivated** versus specific activations\n\nThe [**OnActivated**](https://msdn.microsoft.com/library/windows/apps/br242330) method is the means to handle all possible activation types. However, it's more common to use different methods to handle the most common activation types, and use **OnActivated** only as the fallback method for the less common activation types. For example, [**Application**](https://msdn.microsoft.com/library/windows/apps/br242324) has an [**OnLaunched**](https://msdn.microsoft.com/library/windows/apps/br242335) method that's invoked as a callback whenever [**ActivationKind**](https://msdn.microsoft.com/library/windows/apps/br224693) is **Launch**, and this is the typical activation for most apps. There are 6 more **On\\*** methods for specific activations: [**OnCachedFileUpdaterActivated**](https://msdn.microsoft.com/library/windows/apps/hh701797), [**OnFileActivated**](https://msdn.microsoft.com/library/windows/apps/br242331), [**OnFileOpenPickerActivated**](https://msdn.microsoft.com/library/windows/apps/hh701799), [**OnFileSavePickerActivated**](https://msdn.microsoft.com/library/windows/apps/hh701801), [**OnSearchActivated**](https://msdn.microsoft.com/library/windows/apps/br242336), [**OnShareTargetActivated**](https://msdn.microsoft.com/library/windows/apps/hh701806). Starting templates for a XAML app have an implementation for **OnLaunched** and a handler for [**Suspending**](https://msdn.microsoft.com/library/windows/apps/br242341).\n\n## App suspend\n\n\nThe system suspends your app whenever the user switches to another app or to the desktop or Start screen. You app may also be suspended when the device enters a low power state. The system resumes your app whenever the user switches back to it. When the system resumes your app, the content of your variables and data structures is the same as it was before the system suspended the app. The system restores the app exactly where it left off, so that it appears to the user as if it's been running in the background.\n\nWhen the user moves an app to the background, Windows waits a few seconds to see whether the user will immediately switch back to the app so that the transition will be fast if they do. If the user does not switch back within this time window, Windows suspends the app.\n\nIf you need to do asynchronous work when your app is being suspended you will need to defer completion of suspend until after your work completes. You can use the [**GetDeferral**](https://msdn.microsoft.com/library/windows/apps/br224690) method on the [**SuspendingOperation**](https://msdn.microsoft.com/library/windows/apps/br224688) object (available via the event args) to delay completion of suspend until after you call the [**Complete**](https://msdn.microsoft.com/library/windows/apps/br224685) method on the returned [**SuspendingDeferral**](https://msdn.microsoft.com/library/windows/apps/br224684) object.\n\nThe system attempts to keep your app and its data in memory while it's suspended. However, if the system does not have the resources to keep your app in memory, the system will terminate your app. Apps don't receive a notification that they are being terminated, so the only opportunity you have to save your app's data is during suspension. When an app determines that it has been activated after being terminated, it should load the application data that it saved during suspend so that the app is in the same state as if was before it was suspended. When the user switches back to a suspended app that has been terminated, the app should restore its application data in its [**OnLaunched**](https://msdn.microsoft.com/library/windows/apps/br242335) method. The system doesn't notify an app when it's terminated, so your app must save its application data and release exclusive resources and file handles when it's suspended, and restore them when the app is activated after termination.\n\nIf an app has registered an event handler for the [**Application.Suspending**](https://msdn.microsoft.com/library/windows/apps/br242341) event, this code is called immediately before the app is suspended. You can use the event handler to save app and user data. We recommended that you use the application data APIs for this purpose because they are guaranteed to complete before the app enters the **Suspended** state. For more info, see [Store and retrieve settings and other app data](https://msdn.microsoft.com/library/windows/apps/mt299098).\n\nYou should also release exclusive resources and file handles so that other apps can access them while your app isn't using them. Examples of exclusive resources include cameras, I/O devices, external devices, and network resources. Explicitly releasing exclusive resources and file handles helps to ensure that other apps can access them while your app isn't using them. When the app is activated after termination, it should reopen its exclusive resources and file handles.\n\nGenerally, your app should save its state and release its resources and file handles immediately when handling the suspending event, and the code should not take more than a second to complete. If an app does not return from the suspending event within a few seconds, Windows assumes that the app has stopped responding and terminates it.\n\nThere are some app scenarios where the app must continue to run to complete background tasks. For example, your app can continue to play audio in the background; for more info, see [Background Audio](https://msdn.microsoft.com/library/windows/apps/mt282140)). Also, background transfer operations continue even if your app is suspended or even terminated; for more info, see [How to download a file](https://msdn.microsoft.com/en-us/library/windows/apps/xaml/jj152726.aspx#downloading_a_file_using_background_transfer)).\n\nFor guidelines, see [Guidelines for app suspend and resume](https://msdn.microsoft.com/library/windows/apps/hh465088).\n\n**A note about debugging using Visual Studio:  **Visual Studio prevents Windows from suspending an app that is attached to the debugger. This is to allow the user to view the Visual Studio debug UI while the app is running. When you're debugging an app, you can send it a suspend event using Visual Studio. Make sure the **Debug Location** toolbar is being shown, then click the **Suspend** icon.\n\n## App visibility\n\n\nWhen the user switches from your app to another app, your app is no longer visible but remains in the **Running** state until Windows suspends it. If the user switches away from your app but activates or switches back to it before it can suspended, the app remains in the **Running** state.\n\nYour app doesn't receive an activation event when its visibility changes because the app is still running. Windows simply switches to and from the app as necessary. If your app needs to do something when the user switches away and back, handle the [**Window.VisibilityChanged**](https://msdn.microsoft.com/library/windows/apps/hh702458) event.\n\nDo not rely on a specific ordering of these events.\n\n## App resume\n\n\nA suspended app is resumed when the user switches to it or when it is the active app when the device comes out of a low power state.\n\nFor an enumeration of the states that your app can be in when your app is resumed, see [**ApplicationExecutionState**](https://msdn.microsoft.com/library/windows/apps/br224694). When an app is resumed from the **Suspended** state, it enters the **Running** state and continues from where it was when it was suspended. No app data stored in memory is lost. Therefore, most apps don't need to do anything when they are resumed. However, the app could have been suspended for hours or even days. If your app has content or network connections that may have gone stale, these should be refreshed when the app resumes. If an app registered an event handler for the [**Application.Resuming**](https://msdn.microsoft.com/library/windows/apps/br242339) event, it is called when the app is resumed from the **Suspended** state. You can refresh your app content and data using this event handler.\n\nIf a suspended app is activated to participate in an app contract or extension, it receives the **Resuming** event first, then the **Activated** event.\n\nWhile en an app is suspended, it does not receive any of the network events that it registered to receive. These network events are not queued, they are simply missed. Therefore, your app should test the network status when it is resumed.\n\n**Note**  Because the [**Resuming**](https://msdn.microsoft.com/library/windows/apps/br242339) event is not raised from the UI thread, a dispatcher must be used if the code in your resume handler communicates with your UI.\n\n \n\nFor guidelines, see [Guidelines for app suspend and resume](https://msdn.microsoft.com/library/windows/apps/hh465088).\n\n## App close\n\n\nGenerally, users don't need to close apps, they can let Windows manage them. However, users can choose to close an app using the close gesture or by pressing Alt+F4 on Windows or by using the task switcher on Windows Phone.\n\nThere's no special event to indicate that the user closed the app.\n\nAfter an app has been closed by the user, it's first suspended and then terminated, and enters the **NotRunning** state.\n\nIn Windows 8.1 and later, after an app has been closed by the user, the app is removed from the screen and switch list but not explicitly terminated.\n\nIf an app has registered an event handler for the **Suspending** event, it is called when the app is suspended. You can use this event handler to save relevant application and user data to persistent storage.\n\n**Closed-by-user behavior:  **If your app needs to do something different when it is closed by the user than when it is closed by Windows, you can use the activation event handler to determine whether the app was terminated by the user or by Windows. See the descriptions of **ClosedByUser** and **Terminated** states in the reference for the [**ApplicationExecutionState**](https://msdn.microsoft.com/library/windows/apps/br224694) enumeration.\n\nWe recommend that apps not close themselves programmatically unless absolutely necessary. For example, if an app detects a memory leak, it can close itself to ensure the security of the user's personal data. When you close an app programmatically, the system treats it as an app crash.\n\n## App crash\n\n\nThe system crash experience is designed to get users back to what they were doing as quickly as possible. You shouldn't provide a warning dialog or other notification because that will delay the user.\n\nIf your app crashes, stops responding, or generates an exception, a problem report is sent to Microsoft per the user's [feedback and diagnostics settings](http://go.microsoft.com/fwlink/p/?LinkID=614828). Microsoft provides a subset of the error data in the problem report to you so that you can use it to improve your app. You'll be able to see this data in your app's Quality page in your Dashboard.\n\nWhen the user activates an app after it crashes, its activation event handler receives an [**ApplicationExecutionState**](https://msdn.microsoft.com/library/windows/apps/br224694) value of **NotRunning**, and should display its initial UI and data. After a crash, don't routinely use the app data you would have used for **Resuming** with **Suspended** because that data could be corrupt; see [Guidelines for app suspend and resume](https://msdn.microsoft.com/library/windows/apps/hh465088).\n\n## App removal\n\n\nWhen a user deletes your app, the app is removed, along with all its local data. Removing an app doesn't affect the user's data that was stored in common locations such as the Documents or Pictures libraries.\n\n## App lifecycle and the Visual Studio project templates\n\n\nThe basic code that is relevant to the app lifecycle is provided in the starting Visual Studio project templates. The basic app handles launch activation, provides a place for you to restore your app data, and displays the primary UI even before you've added any of your own code. For more info, see [C#, VB, and C++ project templates for apps](https://msdn.microsoft.com/library/windows/apps/hh768232).\n\n## Application lifecycle key APIs\n\n\n-   [**Windows.ApplicationModel**](https://msdn.microsoft.com/library/windows/apps/br224691) namespace\n-   [**Windows.ApplicationModel.Activation**](https://msdn.microsoft.com/library/windows/apps/br224766) namespace\n-   [**Windows.ApplicationModel.Core**](https://msdn.microsoft.com/library/windows/apps/br205865) namespace\n-   [**Windows.UI.Xaml.Application**](https://msdn.microsoft.com/library/windows/apps/br242324) class (XAML)\n-   [**Windows.UI.Xaml.Window**](https://msdn.microsoft.com/library/windows/apps/br209041) class (XAML)\n\n**Note**  \nThis article is for Windows 10 developers writing Universal Windows Platform (UWP) apps. If you’re developing for Windows 8.x or Windows Phone 8.x, see the [archived documentation](http://go.microsoft.com/fwlink/p/?linkid=619132).\n\n \n\n## Related topics\n\n\n* [Guidelines for app suspend and resume](https://msdn.microsoft.com/library/windows/apps/hh465088)\n* [Handle app prelaunch](handle-app-prelaunch.md)\n* [Handle app activation](activate-an-app.md)\n* [Handle app suspend](suspend-an-app.md)\n* [Handle app resume](resume-an-app.md)\n\n \n\n \n\n\n\n"}