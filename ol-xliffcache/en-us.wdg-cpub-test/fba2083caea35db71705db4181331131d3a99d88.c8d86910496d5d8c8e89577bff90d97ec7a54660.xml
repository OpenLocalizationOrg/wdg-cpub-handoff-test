{"nodes":[{"pos":[66,176],"content":"Use this method in the Windows Store purchase API to grant a free app or in-app product (IAP) to a given user.","needQuote":true,"needEscape":true,"nodes":[{"content":"Use this method in the Windows Store purchase API to grant a free app or in-app product (IAP) to a given user.","pos":[0,110]}]},{"pos":[184,203],"content":"Grant free products","needQuote":true,"needEscape":true,"nodes":[{"content":"Grant free products","pos":[0,19]}]},{"content":"Grant free products","pos":[211,230]},{"content":"\\[ Updated for UWP apps on Windows 10.","pos":[232,270]},{"content":"For Windows 8.x articles, see the <bpt id=\"p1\">[</bpt>archive<ept id=\"p1\">](http://go.microsoft.com/fwlink/p/?linkid=619132)</ept> \\]","pos":[271,366],"source":" For Windows 8.x articles, see the [archive](http://go.microsoft.com/fwlink/p/?linkid=619132) \\]"},{"content":"Use this method in the Windows Store purchase API to grant a free app or in-app product (IAP) to a given user.","pos":[368,478]},{"content":"Currently, you can only grant free products.","pos":[480,524]},{"content":"If your service attempts to use this method to grant a product that is not free, this method will return an error.","pos":[525,639]},{"content":"Prerequisites","pos":[644,657]},{"content":"To use this method, you will need:","pos":[659,693]},{"pos":[699,798],"content":"An Azure AD access token that was created with the <bpt id=\"p1\">**</bpt>https://onestore.microsoft.com<ept id=\"p1\">**</ept> audience URI.","source":"An Azure AD access token that was created with the **https://onestore.microsoft.com** audience URI."},{"pos":[803,992],"content":"A Windows Store ID key that was generated by calling the <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>GetCustomerPurchaseIdAsync<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/mt608675)</ept> method from client-side code in your app.","source":"A Windows Store ID key that was generated by calling the [**GetCustomerPurchaseIdAsync**](https://msdn.microsoft.com/library/windows/apps/mt608675) method from client-side code in your app."},{"pos":[994,1104],"content":"For more information, see <bpt id=\"p1\">[</bpt>View and grant products from a service<ept id=\"p1\">](view-and-grant-products-from-a-service.md)</ept>.","source":"For more information, see [View and grant products from a service](view-and-grant-products-from-a-service.md)."},{"content":"Request","pos":[1109,1116]},{"content":"Request syntax","pos":[1123,1137]},{"content":"Method","pos":[1141,1147]},{"content":"Request URI","pos":[1150,1161]},{"content":"POST","pos":[1277,1281]},{"content":"https://purchase.mp.microsoft.com/v6.0/purchases/grant","pos":[1286,1340]},{"content":"Request header","pos":[1351,1365]},{"content":"Header","pos":[1369,1375]},{"content":"Type","pos":[1386,1390]},{"content":"Description","pos":[1395,1406]},{"content":"Authorization","pos":[1633,1646]},{"content":"string","pos":[1650,1656]},{"content":"Required.","pos":[1659,1668]},{"content":"The Azure AD access token in the form <bpt id=\"p1\">**</bpt>Bearer<ept id=\"p1\">**</ept> <ph id=\"ph1\">&amp;lt;</ph><bpt id=\"p2\">*</bpt>token<ept id=\"p2\">*</ept><ph id=\"ph2\">&amp;gt;</ph>.","pos":[1669,1734],"source":" The Azure AD access token in the form **Bearer** &lt;*token*&gt;."},{"content":"Host","pos":[1765,1769]},{"content":"string","pos":[1782,1788]},{"pos":[1791,1849],"content":"Must be set to the value <bpt id=\"p1\">**</bpt>collections.mp.microsoft.com<ept id=\"p1\">**</ept>.","source":"Must be set to the value **collections.mp.microsoft.com**."},{"content":"Content-Length","pos":[1897,1911]},{"content":"number","pos":[1914,1920]},{"content":"The length of the request body.","pos":[1923,1954]},{"content":"Content-Type","pos":[2029,2041]},{"content":"string","pos":[2046,2052]},{"content":"Specifies the request and response type.","pos":[2055,2095]},{"content":"Currently, the only supported value is <bpt id=\"p1\">**</bpt>application/json<ept id=\"p1\">**</ept>.","pos":[2096,2156],"source":" Currently, the only supported value is **application/json**."},{"content":"Request body","pos":[2167,2179]},{"content":"Parameter","pos":[2183,2192]},{"content":"Type","pos":[2200,2204]},{"content":"Description","pos":[2209,2220]},{"content":"Required","pos":[2522,2530]},{"content":"availabilityId","pos":[2887,2901]},{"content":"string","pos":[2904,2910]},{"content":"The availability ID of the product to be purchased from the Windows Store catalog.","pos":[2913,2995]},{"content":"Yes","pos":[3226,3229]},{"content":"b2bKey","pos":[3239,3245]},{"content":"string","pos":[3256,3262]},{"content":"The Windows Store ID key that represents the customer identity.","pos":[3265,3328]},{"content":"Yes","pos":[3578,3581]},{"content":"devOfferId","pos":[3591,3601]},{"content":"string","pos":[3608,3614]},{"content":"A developer-specified offer ID that will appear in the Collection item after purchase.","pos":[3617,3703]},{"content":"No","pos":[3930,3932]},{"content":"language","pos":[3943,3951]},{"content":"string","pos":[3960,3966]},{"content":"The language of the user.","pos":[3969,3994]},{"content":"Yes","pos":[4282,4285]},{"content":"market","pos":[4295,4301]},{"content":"string","pos":[4312,4318]},{"content":"The market of the user.","pos":[4321,4344]},{"content":"Yes","pos":[4634,4637]},{"content":"orderId","pos":[4647,4654]},{"content":"guid","pos":[4664,4668]},{"content":"A GUID generated for the order.","pos":[4673,4704]},{"content":"This value be unique for the user, but it is not required to be unique across all orders.","pos":[4705,4794]},{"content":"Yes","pos":[4986,4989]},{"content":"productId","pos":[4999,5008]},{"content":"string","pos":[5016,5022]},{"content":"The product ID from the Windows Store catalog.","pos":[5025,5071]},{"content":"To obtain your product ID, navigate to your app in the Windows Dev Center dashboard, go to the <bpt id=\"p1\">**</bpt>App management<ept id=\"p1\">**</ept> <ph id=\"ph1\">&amp;gt;</ph> <bpt id=\"p2\">**</bpt>App identity<ept id=\"p2\">**</ept> page, and retrieve the suffix of the string shown in the <bpt id=\"p3\">**</bpt>URL for Windows 10<ept id=\"p3\">**</ept> field.","pos":[5072,5294],"source":" To obtain your product ID, navigate to your app in the Windows Dev Center dashboard, go to the **App management** &gt; **App identity** page, and retrieve the suffix of the string shown in the **URL for Windows 10** field."},{"content":"An example product ID is “9WZDNCRFJ3Q8”.","pos":[5295,5335]},{"content":"Yes","pos":[5338,5341]},{"content":"quantity","pos":[5351,5359]},{"content":"int","pos":[5368,5371]},{"content":"The quantity to purchase.","pos":[5377,5402]},{"content":"Currently, the only supported value is 1.","pos":[5403,5444]},{"content":"If not specified, the default is 1.","pos":[5445,5480]},{"content":"No","pos":[5690,5692]},{"content":"skuId","pos":[5703,5708]},{"content":"string","pos":[5720,5726]},{"content":"The SKU ID from the Windows Store catalog.","pos":[5729,5771]},{"content":"An example SKU ID is “0010”.","pos":[5772,5800]},{"content":"Yes","pos":[6042,6045]},{"content":"Request example","pos":[6061,6076]},{"content":"Response","pos":[6484,6492]},{"content":"Response body","pos":[6499,6512]},{"content":"Parameter","pos":[6516,6525]},{"content":"Type","pos":[6544,6548]},{"content":"Description","pos":[6574,6585]},{"content":"Required","pos":[6729,6737]},{"content":"clientContext","pos":[6968,6981]},{"content":"ClientContextV6","pos":[6996,7011]},{"content":"Client contextual information for this order.","pos":[7026,7071]},{"content":"This will be assigned to the <bpt id=\"p1\">*</bpt>clientID<ept id=\"p1\">*</ept> value from the Azure AD token.","pos":[7072,7142],"source":" This will be assigned to the *clientID* value from the Azure AD token."},{"content":"Yes","pos":[7181,7184]},{"content":"createdtime","pos":[7194,7205]},{"content":"datetimeoffset","pos":[7222,7236]},{"content":"The time the order was created.","pos":[7252,7283]},{"content":"Yes","pos":[7407,7410]},{"content":"currencyCode","pos":[7420,7432]},{"content":"string","pos":[7448,7454]},{"content":"Currency code for <bpt id=\"p1\">*</bpt>totalAmount<ept id=\"p1\">*</ept> and <bpt id=\"p2\">*</bpt>totalTaxAmount<ept id=\"p2\">*</ept>.","pos":[7478,7531],"source":"Currency code for *totalAmount* and *totalTaxAmount*."},{"content":"N/A for free items.","pos":[7532,7551]},{"content":"Yes","pos":[7633,7636]},{"content":"friendlyName","pos":[7646,7658]},{"content":"string","pos":[7674,7680]},{"content":"The friendly name for the order.","pos":[7704,7736]},{"content":"N/A for orders made using the Windows Store purchase API.","pos":[7737,7794]},{"content":"Yes","pos":[7859,7862]},{"content":"isPIRequired","pos":[7872,7884]},{"content":"boolean","pos":[7900,7907]},{"content":"Indicates whether a payment instrument (PI) is required as part of the purchase order.","pos":[7930,8016]},{"content":"Yes","pos":[8085,8088]},{"content":"language","pos":[8098,8106]},{"content":"string","pos":[8126,8132]},{"content":"The language ID for the order (for example, “en”).","pos":[8156,8206]},{"content":"Yes","pos":[8311,8314]},{"content":"market","pos":[8324,8330]},{"content":"string","pos":[8352,8358]},{"content":"The market ID for the order (for example, “US”).","pos":[8382,8430]},{"content":"Yes","pos":[8537,8540]},{"content":"orderId","pos":[8550,8557]},{"content":"string","pos":[8578,8584]},{"content":"An ID that identifies the order for a particular user.","pos":[8608,8662]},{"content":"Yes","pos":[8763,8766]},{"content":"orderLineItems","pos":[8776,8790]},{"content":"list<ph id=\"ph1\">&amp;lt;</ph>OrderLineItemV6","pos":[8804,8827],"source":"list&lt;OrderLineItemV6"},{"content":"The list of line items for the order.","pos":[8834,8871]},{"content":"Typically there is 1 line item per order.","pos":[8872,8913]},{"content":"Yes","pos":[8989,8992]},{"content":"orderState","pos":[9002,9012]},{"content":"string","pos":[9030,9036]},{"content":"The state of the order.","pos":[9060,9083]},{"content":"The valid states are <bpt id=\"p1\">**</bpt>Editing<ept id=\"p1\">**</ept>, <bpt id=\"p2\">**</bpt>CheckingOut<ept id=\"p2\">**</ept>, <bpt id=\"p3\">**</bpt>Pending<ept id=\"p3\">**</ept>, <bpt id=\"p4\">**</bpt>Purchased<ept id=\"p4\">**</ept>, <bpt id=\"p5\">**</bpt>Refunded<ept id=\"p5\">**</ept>, <bpt id=\"p6\">**</bpt>ChargedBack<ept id=\"p6\">**</ept>, and <bpt id=\"p7\">**</bpt>Cancelled<ept id=\"p7\">**</ept>.","pos":[9084,9212],"source":" The valid states are **Editing**, **CheckingOut**, **Pending**, **Purchased**, **Refunded**, **ChargedBack**, and **Cancelled**."},{"content":"Yes","pos":[9215,9218]},{"content":"orderValidityEndTime","pos":[9228,9248]},{"content":"string","pos":[9256,9262]},{"content":"The last time the order pricing is valid before it is submitted.","pos":[9286,9350]},{"content":"N/A for free apps.","pos":[9351,9369]},{"content":"Yes","pos":[9441,9444]},{"content":"orderValidityStartTime","pos":[9454,9476]},{"content":"string","pos":[9482,9488]},{"content":"The first time the order pricing is valid before it is submitted.","pos":[9512,9577]},{"content":"N/A for free apps.","pos":[9578,9596]},{"content":"Yes","pos":[9667,9670]},{"content":"purchaser","pos":[9680,9689]},{"content":"IdentityV6","pos":[9708,9718]},{"content":"An object that describes the identity of the purchaser.","pos":[9738,9793]},{"content":"Yes","pos":[9893,9896]},{"content":"totalAmount","pos":[9906,9917]},{"content":"decimal","pos":[9934,9941]},{"content":"The total purchase amount of all items in the order including tax.","pos":[9964,10030]},{"content":"Yes","pos":[10119,10122]},{"content":"totalAmountBeforeTax","pos":[10132,10152]},{"content":"decimal","pos":[10160,10167]},{"content":"Total purchase amount of all items in the order before tax.","pos":[10190,10249]},{"content":"Yes","pos":[10345,10348]},{"content":"totalChargedToCsvTopOffPI","pos":[10358,10383]},{"content":"decimal","pos":[10386,10393]},{"content":"If using a separate payment instrument and stored value (CSV), the amount charged to CSV.","pos":[10416,10505]},{"content":"Yes","pos":[10571,10574]},{"content":"totalTaxAmount","pos":[10584,10598]},{"content":"decimal","pos":[10612,10619]},{"content":"The total amount of tax for all line items.","pos":[10642,10685]},{"content":"Yes","pos":[10797,10800]},{"content":"The ClientContext object contains the following parameters.","pos":[10812,10871]},{"content":"Parameter","pos":[10875,10884]},{"content":"Type","pos":[10887,10891]},{"content":"Description","pos":[10896,10907]},{"content":"Required","pos":[10936,10944]},{"content":"client","pos":[11023,11029]},{"content":"string","pos":[11035,11041]},{"content":"The client ID that created the order.","pos":[11044,11081]},{"content":"No","pos":[11084,11086]},{"content":"The OrderLineItemV6 object contains the following parameters.","pos":[11099,11160]},{"content":"Parameter","pos":[11164,11173]},{"content":"Type","pos":[11190,11194]},{"content":"Description","pos":[11207,11218]},{"content":"Required","pos":[11318,11326]},{"content":"agent","pos":[11498,11503]},{"content":"IdentityV6","pos":[11524,11534]},{"content":"The agent that last edited the line item.","pos":[11541,11582]},{"content":"For more information about this object, see the table below.","pos":[11583,11643]},{"content":"No","pos":[11652,11654]},{"content":"availabilityId","pos":[11665,11679]},{"content":"string","pos":[11691,11697]},{"content":"The availability ID of the product to be purchased from the Windows Store catalog.","pos":[11708,11790]},{"content":"Yes","pos":[11819,11822]},{"content":"beneficiary","pos":[11832,11843]},{"content":"IdentityV6","pos":[11858,11868]},{"content":"The identity of the beneficiary of the order.","pos":[11875,11920]},{"content":"No","pos":[11986,11988]},{"content":"billingState","pos":[11999,12011]},{"content":"string","pos":[12025,12031]},{"content":"The billing state of the order.","pos":[12042,12073]},{"content":"This is set to <bpt id=\"p1\">**</bpt>Charged<ept id=\"p1\">**</ept> when completed.","pos":[12074,12116],"source":" This is set to **Charged** when completed."},{"content":"No","pos":[12153,12155]},{"content":"campaignId","pos":[12166,12176]},{"content":"string","pos":[12192,12198]},{"content":"The campaign ID for this order.","pos":[12209,12240]},{"content":"No","pos":[12320,12322]},{"content":"currencyCode","pos":[12333,12345]},{"content":"string","pos":[12359,12365]},{"content":"The currency code used for price details.","pos":[12376,12417]},{"content":"Yes","pos":[12487,12490]},{"content":"Description","pos":[12500,12511]},{"content":"string","pos":[12526,12532]},{"content":"A localized description of the line item.","pos":[12543,12584]},{"content":"Yes","pos":[12654,12657]},{"content":"devofferId","pos":[12667,12677]},{"content":"string","pos":[12693,12699]},{"content":"The offer ID for the particular order, if present.","pos":[12710,12760]},{"content":"No","pos":[12821,12823]},{"content":"fulfillmentDate","pos":[12834,12849]},{"content":"datetimeoffset","pos":[12860,12874]},{"content":"The date the fulfillment occurred.","pos":[12877,12911]},{"content":"No","pos":[12988,12990]},{"content":"fulfillmentState","pos":[13001,13017]},{"content":"string","pos":[13027,13033]},{"content":"The state of the fulfillment of this item.","pos":[13044,13086]},{"content":"This is set to <bpt id=\"p1\">**</bpt>Fulfilled<ept id=\"p1\">**</ept> when completed.","pos":[13087,13131],"source":" This is set to **Fulfilled** when completed."},{"content":"No","pos":[13155,13157]},{"content":"isPIRequired","pos":[13168,13180]},{"content":"boolean","pos":[13194,13201]},{"content":"Indicates whether a payment instrument is required for this line item.","pos":[13211,13281]},{"content":"Yes","pos":[13322,13325]},{"content":"isTaxIncluded","pos":[13335,13348]},{"content":"boolean","pos":[13361,13368]},{"content":"Indicated whether tax is included in the pricing details of the item.","pos":[13378,13447]},{"content":"Yes","pos":[13489,13492]},{"content":"legacyBillingOrderId","pos":[13502,13522]},{"content":"string","pos":[13528,13534]},{"content":"The legacy billing ID.","pos":[13545,13567]},{"content":"No","pos":[13656,13658]},{"content":"lineItemId","pos":[13669,13679]},{"content":"string","pos":[13695,13701]},{"content":"The line item ID for the item in this order.","pos":[13712,13756]},{"content":"Yes","pos":[13823,13826]},{"content":"listPrice","pos":[13836,13845]},{"content":"decimal","pos":[13862,13869]},{"content":"The list price of the item in this order.","pos":[13879,13920]},{"content":"Yes","pos":[13990,13993]},{"content":"productId","pos":[14003,14012]},{"content":"string","pos":[14029,14035]},{"content":"The Windows Store product ID of the line item.","pos":[14046,14092]},{"content":"Yes","pos":[14157,14160]},{"content":"productType","pos":[14170,14181]},{"content":"string","pos":[14196,14202]},{"content":"The type of the product.","pos":[14213,14237]},{"content":"The supported values are <bpt id=\"p1\">**</bpt>Durable<ept id=\"p1\">**</ept>, <bpt id=\"p2\">**</bpt>Application<ept id=\"p2\">**</ept>, and <bpt id=\"p3\">**</bpt>UnmanagedConsumable<ept id=\"p3\">**</ept>.","pos":[14238,14321],"source":" The supported values are **Durable**, **Application**, and **UnmanagedConsumable**."},{"content":"Yes","pos":[14324,14327]},{"content":"Quantity","pos":[14337,14345]},{"content":"int","pos":[14363,14366]},{"content":"The quantity of the item ordered.","pos":[14380,14413]},{"content":"Yes","pos":[14491,14494]},{"content":"retailPrice","pos":[14504,14515]},{"content":"decimal","pos":[14530,14537]},{"content":"The retail price of the item ordered.","pos":[14547,14584]},{"content":"Yes","pos":[14658,14661]},{"content":"revenueRecognitionState","pos":[14671,14694]},{"content":"string","pos":[14697,14703]},{"content":"The revenue recognition state.","pos":[14714,14744]},{"content":"Yes","pos":[14825,14828]},{"content":"skuId","pos":[14838,14843]},{"content":"string","pos":[14864,14870]},{"content":"The Windows Store SKU ID of the line item.","pos":[14881,14923]},{"content":"Yes","pos":[14992,14995]},{"content":"taxAmount","pos":[15005,15014]},{"content":"decimal","pos":[15031,15038]},{"content":"The tax amount for the line item.","pos":[15048,15081]},{"content":"Yes","pos":[15159,15162]},{"content":"taxType","pos":[15172,15179]},{"content":"string","pos":[15198,15204]},{"content":"The tax type for the applicable taxes.","pos":[15215,15253]},{"content":"Yes","pos":[15326,15329]},{"content":"Title","pos":[15339,15344]},{"content":"string","pos":[15365,15371]},{"content":"The localized title of the line item.","pos":[15382,15419]},{"content":"Yes","pos":[15493,15496]},{"content":"totalAmount","pos":[15506,15517]},{"content":"decimal","pos":[15532,15539]},{"content":"The total purchase amount of the line item including tax.","pos":[15549,15606]},{"content":"Yes","pos":[15660,15663]},{"content":"The IdentityV6 object contains the following parameters.","pos":[15675,15731]},{"content":"Parameter","pos":[15735,15744]},{"content":"Type","pos":[15751,15755]},{"content":"Description","pos":[15760,15771]},{"content":"Required","pos":[15845,15853]},{"content":"identityType","pos":[15981,15993]},{"content":"string","pos":[15997,16003]},{"pos":[16006,16035],"content":"Contains the value <bpt id=\"p1\">**</bpt>\"pub\"<ept id=\"p1\">**</ept>.","source":"Contains the value **\"pub\"**."},{"content":"Yes","pos":[16091,16094]},{"content":"identityValue","pos":[16104,16117]},{"content":"string","pos":[16120,16126]},{"pos":[16129,16211],"content":"The string value of the <bpt id=\"p1\">*</bpt>publisherUserId<ept id=\"p1\">*</ept> from the specified Windows Store ID key.","source":"The string value of the *publisherUserId* from the specified Windows Store ID key."},{"content":"Yes","pos":[16214,16217]},{"content":"Response example","pos":[16233,16249]},{"content":"Error codes","pos":[18084,18095]},{"content":"Code","pos":[18100,18104]},{"content":"Error","pos":[18107,18112]},{"content":"Inner error code","pos":[18122,18138]},{"content":"Description","pos":[18151,18162]},{"content":"401","pos":[18574,18577]},{"content":"Unauthorized","pos":[18581,18593]},{"content":"AuthenticationTokenInvalid","pos":[18596,18622]},{"content":"The Azure AD access token is invalid.","pos":[18625,18662]},{"content":"In some cases the details of the ServiceError will contain more information, such as when the token is expired or the <bpt id=\"p1\">*</bpt>appid<ept id=\"p1\">*</ept> claim is missing.","pos":[18663,18806],"source":" In some cases the details of the ServiceError will contain more information, such as when the token is expired or the *appid* claim is missing."},{"content":"401","pos":[18811,18814]},{"content":"Unauthorized","pos":[18818,18830]},{"content":"PartnerAadTicketRequired","pos":[18833,18857]},{"content":"An Azure AD access token was not passed to the service in the authorization header.","pos":[18862,18945]},{"content":"401","pos":[19048,19051]},{"content":"Unauthorized","pos":[19055,19067]},{"content":"InconsistentClientId","pos":[19070,19090]},{"pos":[19099,19260],"content":"The <bpt id=\"p1\">*</bpt>clientId<ept id=\"p1\">*</ept> claim in the Windows Store ID key in the request body and the <bpt id=\"p2\">*</bpt>appid<ept id=\"p2\">*</ept> claim in the Azure AD access token in the authorization header do not match.","source":"The *clientId* claim in the Windows Store ID key in the request body and the *appid* claim in the Azure AD access token in the authorization header do not match."},{"content":"400","pos":[19285,19288]},{"content":"BadRequest","pos":[19292,19302]},{"content":"InvalidParameter","pos":[19307,19323]},{"content":"The details contain information regarding the request body and which fields have an invalid value.","pos":[19336,19434]},{"content":"Related topics","pos":[19527,19541]},{"content":"View and grant products from a service","pos":[19547,19585]},{"content":"Query for products","pos":[19633,19651]},{"content":"Report consumable products as fulfilled","pos":[19679,19718]},{"content":"Renew a Windows Store ID key","pos":[19767,19795]}],"content":"---\nms.assetid: FA55C65C-584A-4B9B-8451-E9C659882EDE\ndescription: Use this method in the Windows Store purchase API to grant a free app or in-app product (IAP) to a given user.\ntitle: Grant free products\n---\n\n# Grant free products\n\n\\[ Updated for UWP apps on Windows 10. For Windows 8.x articles, see the [archive](http://go.microsoft.com/fwlink/p/?linkid=619132) \\]\n\nUse this method in the Windows Store purchase API to grant a free app or in-app product (IAP) to a given user.\n\nCurrently, you can only grant free products. If your service attempts to use this method to grant a product that is not free, this method will return an error.\n\n## Prerequisites\n\nTo use this method, you will need:\n\n-   An Azure AD access token that was created with the **https://onestore.microsoft.com** audience URI.\n-   A Windows Store ID key that was generated by calling the [**GetCustomerPurchaseIdAsync**](https://msdn.microsoft.com/library/windows/apps/mt608675) method from client-side code in your app.\n\nFor more information, see [View and grant products from a service](view-and-grant-products-from-a-service.md).\n\n## Request\n\n\n### Request syntax\n\n| Method | Request URI                                            |\n|--------|--------------------------------------------------------|\n| POST   | https://purchase.mp.microsoft.com/v6.0/purchases/grant |\n\n \n\n### Request header\n\n| Header         | Type   | Description                                                                                           |\n|----------------|--------|-------------------------------------------------------------------------------------------------------|\n| Authorization  | string | Required. The Azure AD access token in the form **Bearer** &lt;*token*&gt;.                           |\n| Host           | string | Must be set to the value **collections.mp.microsoft.com**.                                            |\n| Content-Length | number | The length of the request body.                                                                       |\n| Content-Type   | string | Specifies the request and response type. Currently, the only supported value is **application/json**. |\n\n \n\n### Request body\n\n| Parameter      | Type   | Description                                                                                                                                                                                                                                                                                                            | Required |\n|----------------|--------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------|\n| availabilityId | string | The availability ID of the product to be purchased from the Windows Store catalog.                                                                                                                                                                                                                                     | Yes      |\n| b2bKey         | string | The Windows Store ID key that represents the customer identity.                                                                                                                                                                                                                                                        | Yes      |\n| devOfferId     | string | A developer-specified offer ID that will appear in the Collection item after purchase.                                                                                                                                                                                                                                 | No       |\n| language       | string | The language of the user.                                                                                                                                                                                                                                                                                              | Yes      |\n| market         | string | The market of the user.                                                                                                                                                                                                                                                                                                | Yes      |\n| orderId        | guid   | A GUID generated for the order. This value be unique for the user, but it is not required to be unique across all orders.                                                                                                                                                                                              | Yes      |\n| productId      | string | The product ID from the Windows Store catalog. To obtain your product ID, navigate to your app in the Windows Dev Center dashboard, go to the **App management** &gt; **App identity** page, and retrieve the suffix of the string shown in the **URL for Windows 10** field. An example product ID is “9WZDNCRFJ3Q8”. | Yes      |\n| quantity       | int    | The quantity to purchase. Currently, the only supported value is 1. If not specified, the default is 1.                                                                                                                                                                                                                | No       |\n| skuId          | string | The SKU ID from the Windows Store catalog. An example SKU ID is “0010”.                                                                                                                                                                                                                                                | Yes      |\n\n \n\n### Request example\n\n```\nPOST https://purchase.mp.microsoft.com/v6.0/purchases/grant HTTP/1.1\nAuthorization: Bearer eyJ0eXAiOiJK……\nContent-Length: 1863\nContent-Type: application/json\n\n{\n    \"b2bKey\" : \"eyJ0eXAiOiJK……\",\n    \"availabilityId\" : \"9RT7C09D5J3W\",\n    \"productId\" : \"9NBLGGH5WVP6\",\n    \"skuId\" : \"0010\",\n    \"language\" : \"en-us\",\n    \"market\" : \"us\",\n    \"orderId\" : \"3eea1529-611e-4aee-915c-345494e4ee76\",\n}\n```\n\n## Response\n\n\n### Response body\n\n| Parameter                 | Type                        | Description                                                                                                                                              | Required |\n|---------------------------|-----------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------|----------|\n| clientContext             | ClientContextV6             | Client contextual information for this order. This will be assigned to the *clientID* value from the Azure AD token.                                     | Yes      |\n| createdtime               | datetimeoffset              | The time the order was created.                                                                                                                          | Yes      |\n| currencyCode              | string                      | Currency code for *totalAmount* and *totalTaxAmount*. N/A for free items.                                                                                | Yes      |\n| friendlyName              | string                      | The friendly name for the order. N/A for orders made using the Windows Store purchase API.                                                               | Yes      |\n| isPIRequired              | boolean                     | Indicates whether a payment instrument (PI) is required as part of the purchase order.                                                                   | Yes      |\n| language                  | string                      | The language ID for the order (for example, “en”).                                                                                                       | Yes      |\n| market                    | string                      | The market ID for the order (for example, “US”).                                                                                                         | Yes      |\n| orderId                   | string                      | An ID that identifies the order for a particular user.                                                                                                   | Yes      |\n| orderLineItems            | list&lt;OrderLineItemV6&gt; | The list of line items for the order. Typically there is 1 line item per order.                                                                          | Yes      |\n| orderState                | string                      | The state of the order. The valid states are **Editing**, **CheckingOut**, **Pending**, **Purchased**, **Refunded**, **ChargedBack**, and **Cancelled**. | Yes      |\n| orderValidityEndTime      | string                      | The last time the order pricing is valid before it is submitted. N/A for free apps.                                                                      | Yes      |\n| orderValidityStartTime    | string                      | The first time the order pricing is valid before it is submitted. N/A for free apps.                                                                     | Yes      |\n| purchaser                 | IdentityV6                  | An object that describes the identity of the purchaser.                                                                                                  | Yes      |\n| totalAmount               | decimal                     | The total purchase amount of all items in the order including tax.                                                                                       | Yes      |\n| totalAmountBeforeTax      | decimal                     | Total purchase amount of all items in the order before tax.                                                                                              | Yes      |\n| totalChargedToCsvTopOffPI | decimal                     | If using a separate payment instrument and stored value (CSV), the amount charged to CSV.                                                                | Yes      |\n| totalTaxAmount            | decimal                     | The total amount of tax for all line items.                                                                                                              | Yes      |\n\n \n\nThe ClientContext object contains the following parameters.\n\n| Parameter | Type   | Description                           | Required |\n|-----------|--------|---------------------------------------|----------|\n| client    | string | The client ID that created the order. | No       |\n\n \n\nThe OrderLineItemV6 object contains the following parameters.\n\n| Parameter               | Type           | Description                                                                                                  | Required |\n|-------------------------|----------------|--------------------------------------------------------------------------------------------------------------|----------|\n| agent                   | IdentityV6     | The agent that last edited the line item. For more information about this object, see the table below.       | No       |\n| availabilityId          | string         | The availability ID of the product to be purchased from the Windows Store catalog.                           | Yes      |\n| beneficiary             | IdentityV6     | The identity of the beneficiary of the order.                                                                | No       |\n| billingState            | string         | The billing state of the order. This is set to **Charged** when completed.                                   | No       |\n| campaignId              | string         | The campaign ID for this order.                                                                              | No       |\n| currencyCode            | string         | The currency code used for price details.                                                                    | Yes      |\n| Description             | string         | A localized description of the line item.                                                                    | Yes      |\n| devofferId              | string         | The offer ID for the particular order, if present.                                                           | No       |\n| fulfillmentDate         | datetimeoffset | The date the fulfillment occurred.                                                                           | No       |\n| fulfillmentState        | string         | The state of the fulfillment of this item. This is set to **Fulfilled** when completed.                      | No       |\n| isPIRequired            | boolean        | Indicates whether a payment instrument is required for this line item.                                       | Yes      |\n| isTaxIncluded           | boolean        | Indicated whether tax is included in the pricing details of the item.                                        | Yes      |\n| legacyBillingOrderId    | string         | The legacy billing ID.                                                                                       | No       |\n| lineItemId              | string         | The line item ID for the item in this order.                                                                 | Yes      |\n| listPrice               | decimal        | The list price of the item in this order.                                                                    | Yes      |\n| productId               | string         | The Windows Store product ID of the line item.                                                               | Yes      |\n| productType             | string         | The type of the product. The supported values are **Durable**, **Application**, and **UnmanagedConsumable**. | Yes      |\n| Quantity                | int            | The quantity of the item ordered.                                                                            | Yes      |\n| retailPrice             | decimal        | The retail price of the item ordered.                                                                        | Yes      |\n| revenueRecognitionState | string         | The revenue recognition state.                                                                               | Yes      |\n| skuId                   | string         | The Windows Store SKU ID of the line item.                                                                   | Yes      |\n| taxAmount               | decimal        | The tax amount for the line item.                                                                            | Yes      |\n| taxType                 | string         | The tax type for the applicable taxes.                                                                       | Yes      |\n| Title                   | string         | The localized title of the line item.                                                                        | Yes      |\n| totalAmount             | decimal        | The total purchase amount of the line item including tax.                                                    | Yes      |\n\n \n\nThe IdentityV6 object contains the following parameters.\n\n| Parameter     | Type   | Description                                                                        | Required |\n|---------------|--------|------------------------------------------------------------------------------------|----------|\n| identityType  | string | Contains the value **\"pub\"**.                                                      | Yes      |\n| identityValue | string | The string value of the *publisherUserId* from the specified Windows Store ID key. | Yes      |\n\n \n\n### Response example\n\n```\nContent-Length: 1203\nContent-Type: application/json\nMS-CorrelationId: fb2e69bc-f26a-4aab-a823-7586c19f5762\nMS-RequestId: c1bc832c-f742-47e4-a76c-cf061402f698\nMS-CV: XjfuNWLQlEuxj6Mt.8\nMS-ServerId: 030032362\nDate: Tue, 13 Oct 2015 21:21:51 GMT\n\n{\n    \"clientContext\": {\n        \"client\": \"86b78998-d05a-487b-b380-6c738f6553ea\"\n    },\n    \"createdTime\": \"2015-10-13T21:21:51.1863494+00:00\",\n    \"currencyCode\": \"USD\",\n    \"isPIRequired\": false,\n    \"language\": \"en-us\",\n    \"market\": \"us\",\n    \"orderId\": \"3eea1529-611e-4aee-915c-345494e4ee76\",\n    \"orderLineItems\": [{\n        \"availabilityId\": \"9RT7C09D5J3W\",\n        \"beneficiary\": {\n            \"identityType\": \"pub\",\n            \"identityValue\": \"user1\"\n        },\n        \"billingState\": \"Charged\",\n        \"currencyCode\": \"USD\",\n        \"description\": \"Jewels, Jewels, Jewels - Consumable 2\",\n        \"fulfillmentDate\": \"2015-10-13T21:21:51.639478+00:00\",\n        \"fulfillmentState\": \"Fulfilled\",\n        \"isPIRequired\": false,\n        \"isTaxIncluded\": true,\n        \"lineItemId\": \"2814d758-3ee3-46b3-9671-4fb3bdae9ffe\",\n        \"listPrice\": 0.0,\n        \"payments\": [],\n        \"productId\": \"9NBLGGH5WVP6\",\n        \"productType\": \"UnmanagedConsumable\",\n        \"quantity\": 1,\n        \"retailPrice\": 0.0,\n        \"revenueRecognitionState\": \"None\",\n        \"skuId\": \"0010\",\n        \"taxAmount\": 0.0,\n        \"taxType\": \"NoApplicableTaxes\",\n        \"title\": \"Jewels, Jewels, Jewels - Consumable 2\",\n        \"totalAmount\": 0.0\n    }],\n    \"orderState\": \"Purchased\",\n    \"orderValidityEndTime\": \"2015-10-14T21:21:51.1863494+00:00\",\n    \"orderValidityStartTime\": \"2015-10-13T21:21:51.1863494+00:00\",\n    \"purchaser\": {\n        \"identityType\": \"pub\",\n        \"identityValue\": \"user1\"\n    },\n    \"testScenarios\": \"None\",\n    \"totalAmount\": 0.0,\n    \"totalTaxAmount\": 0.0\n}\n```\n\n## Error codes\n\n\n| Code | Error        | Inner error code           | Description                                                                                                                                                                           |\n|------|--------------|----------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| 401  | Unauthorized | AuthenticationTokenInvalid | The Azure AD access token is invalid. In some cases the details of the ServiceError will contain more information, such as when the token is expired or the *appid* claim is missing. |\n| 401  | Unauthorized | PartnerAadTicketRequired   | An Azure AD access token was not passed to the service in the authorization header.                                                                                                   |\n| 401  | Unauthorized | InconsistentClientId       | The *clientId* claim in the Windows Store ID key in the request body and the *appid* claim in the Azure AD access token in the authorization header do not match.                     |\n| 400  | BadRequest   | InvalidParameter           | The details contain information regarding the request body and which fields have an invalid value.                                                                                    |\n\n \n\n## Related topics\n\n\n* [View and grant products from a service](view-and-grant-products-from-a-service.md)\n* [Query for products](query-for-products.md)\n* [Report consumable products as fulfilled](report-consumable-products-as-fulfilled.md)\n* [Renew a Windows Store ID key](renew-a-windows-store-id-key.md)\n \n\n \n\n\n\n"}