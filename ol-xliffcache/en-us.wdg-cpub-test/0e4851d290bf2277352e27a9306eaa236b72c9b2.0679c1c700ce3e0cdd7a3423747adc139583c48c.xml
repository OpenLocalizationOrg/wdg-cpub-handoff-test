{"nodes":[{"pos":[66,293],"content":"Use this method in the Windows Store collection API to get all the products that a customer owns for apps that are associated with your Azure AD client ID. You can scope your query to a particular product, or use other filters.","needQuote":true,"needEscape":true,"nodes":[{"content":"Use this method in the Windows Store collection API to get all the products that a customer owns for apps that are associated with your Azure AD client ID. You can scope your query to a particular product, or use other filters.","pos":[0,227],"nodes":[{"content":"Use this method in the Windows Store collection API to get all the products that a customer owns for apps that are associated with your Azure AD client ID.","pos":[0,155]},{"content":"You can scope your query to a particular product, or use other filters.","pos":[156,227]}]}]},{"pos":[301,319],"content":"Query for products","needQuote":true,"needEscape":true,"nodes":[{"content":"Query for products","pos":[0,18]}]},{"content":"Query for products","pos":[327,345]},{"content":"\\[ Updated for UWP apps on Windows 10.","pos":[348,386]},{"content":"For Windows 8.x articles, see the <bpt id=\"p1\">[</bpt>archive<ept id=\"p1\">](http://go.microsoft.com/fwlink/p/?linkid=619132)</ept> \\]","pos":[387,482],"source":" For Windows 8.x articles, see the [archive](http://go.microsoft.com/fwlink/p/?linkid=619132) \\]"},{"content":"Use this method in the Windows Store collection API to get all the products that a customer owns for apps that are associated with your Azure AD client ID.","pos":[484,639]},{"content":"You can scope your query to a particular product, or use other filters.","pos":[640,711]},{"content":"This method is designed to be called by your service in response to a message from your app.","pos":[713,805]},{"content":"Your service should not regularly poll for all users on a schedule.","pos":[806,873]},{"content":"Prerequisites","pos":[878,891]},{"content":"To use this method, you will need:","pos":[894,928]},{"pos":[934,1033],"content":"An Azure AD access token that was created with the <bpt id=\"p1\">**</bpt>https://onestore.microsoft.com<ept id=\"p1\">**</ept> audience URI.","source":"An Azure AD access token that was created with the **https://onestore.microsoft.com** audience URI."},{"pos":[1038,1230],"content":"A Windows Store ID key that was generated by calling the <bpt id=\"p1\">[</bpt><bpt id=\"p2\">**</bpt>GetCustomerCollectionsIdAsync<ept id=\"p2\">**</ept><ept id=\"p1\">](https://msdn.microsoft.com/library/windows/apps/mt608674)</ept> method from client-side code in your app.","source":"A Windows Store ID key that was generated by calling the [**GetCustomerCollectionsIdAsync**](https://msdn.microsoft.com/library/windows/apps/mt608674) method from client-side code in your app."},{"pos":[1232,1342],"content":"For more information, see <bpt id=\"p1\">[</bpt>View and grant products from a service<ept id=\"p1\">](view-and-grant-products-from-a-service.md)</ept>.","source":"For more information, see [View and grant products from a service](view-and-grant-products-from-a-service.md)."},{"content":"Request","pos":[1347,1354]},{"content":"Request syntax","pos":[1360,1374]},{"content":"Method","pos":[1378,1384]},{"content":"Request URI","pos":[1387,1398]},{"content":"POST","pos":[1524,1528]},{"content":"https://collections.mp.microsoft.com/v6.0/collections/query","pos":[1533,1592]},{"content":"Request header","pos":[1602,1616]},{"content":"Header","pos":[1620,1626]},{"content":"Type","pos":[1637,1641]},{"content":"Description","pos":[1646,1657]},{"content":"Authorization","pos":[1884,1897]},{"content":"string","pos":[1901,1907]},{"content":"Required.","pos":[1910,1919]},{"content":"The Azure AD access token in the form <bpt id=\"p1\">**</bpt>Bearer<ept id=\"p1\">**</ept> <ph id=\"ph1\">&amp;lt;</ph><bpt id=\"p2\">*</bpt>token<ept id=\"p2\">*</ept><ph id=\"ph2\">&amp;gt;</ph>.","pos":[1920,1985],"source":" The Azure AD access token in the form **Bearer** &lt;*token*&gt;."},{"content":"Host","pos":[2016,2020]},{"content":"string","pos":[2033,2039]},{"pos":[2042,2100],"content":"Must be set to the value <bpt id=\"p1\">**</bpt>collections.mp.microsoft.com<ept id=\"p1\">**</ept>.","source":"Must be set to the value **collections.mp.microsoft.com**."},{"content":"Content-Length","pos":[2148,2162]},{"content":"number","pos":[2165,2171]},{"content":"The length of the request body.","pos":[2174,2205]},{"content":"Content-Type","pos":[2280,2292]},{"content":"string","pos":[2297,2303]},{"content":"Specifies the request and response type.","pos":[2306,2346]},{"content":"Currently, the only supported value is <bpt id=\"p1\">**</bpt>application/json<ept id=\"p1\">**</ept>.","pos":[2347,2407],"source":" Currently, the only supported value is **application/json**."},{"content":"Request body","pos":[2418,2430]},{"content":"Parameter","pos":[2434,2443]},{"content":"Type","pos":[2454,2458]},{"content":"Description","pos":[2469,2480]},{"content":"Required","pos":[2732,2740]},{"content":"beneficiaries","pos":[3056,3069]},{"content":"UserIdentity","pos":[3076,3088]},{"content":"A UserIdentity object that represents the user being queried for products.","pos":[3091,3165]},{"content":"Yes","pos":[3354,3357]},{"content":"continuationToken","pos":[3367,3384]},{"content":"string","pos":[3387,3393]},{"content":"If there are multiple sets of products, the response body returns a continuation token when the page limit is reached.","pos":[3402,3520]},{"content":"Provide that continuation token here in subsequent calls to retrieve remaining products.","pos":[3521,3609]},{"content":"No","pos":[3665,3667]},{"content":"maxPageSize","pos":[3678,3689]},{"content":"number","pos":[3698,3704]},{"content":"The maximum number of products to return in one response.","pos":[3713,3770]},{"content":"The default and maximum value is 100.","pos":[3771,3808]},{"content":"No","pos":[3976,3978]},{"content":"modifiedAfter","pos":[3989,4002]},{"content":"datetime","pos":[4009,4017]},{"content":"If specified, the service only returns products that have been modified after this date.","pos":[4024,4112]},{"content":"No","pos":[4287,4289]},{"content":"parentProductId","pos":[4300,4315]},{"content":"string","pos":[4320,4326]},{"content":"If specified, the service only returns IAPs that correspond to the specified app.","pos":[4335,4416]},{"content":"No","pos":[4598,4600]},{"content":"productSkuIds","pos":[4611,4624]},{"content":"ProductSkuId","pos":[4631,4643]},{"content":"If specified, the service only returns products applicable to the provided Product/SKU pairs.","pos":[4646,4739]},{"content":"No","pos":[4909,4911]},{"content":"productTypes","pos":[4922,4934]},{"content":"string","pos":[4942,4948]},{"content":"If specified, the service only returns products that match the specified product types.","pos":[4957,5044]},{"content":"Supported product types are <bpt id=\"p1\">**</bpt>Application<ept id=\"p1\">**</ept>, <bpt id=\"p2\">**</bpt>Durable<ept id=\"p2\">**</ept>, and <bpt id=\"p3\">**</bpt>UnmanagedConsumable<ept id=\"p3\">**</ept>.","pos":[5045,5131],"source":" Supported product types are **Application**, **Durable**, and **UnmanagedConsumable**."},{"content":"No","pos":[5220,5222]},{"content":"validityType","pos":[5233,5245]},{"content":"string","pos":[5253,5259]},{"content":"When set to <bpt id=\"p1\">**</bpt>All<ept id=\"p1\">**</ept>, all products for a user will be returned, including expired items.","pos":[5268,5355],"source":"When set to **All**, all products for a user will be returned, including expired items."},{"content":"When set to <bpt id=\"p1\">**</bpt>Valid<ept id=\"p1\">**</ept>, only products that are valid at this point in time are returned (that is, they have an active status, start date <ph id=\"ph1\">&amp;lt;</ph> now, and end date is <ph id=\"ph2\">&amp;gt;</ph> now).","pos":[5356,5528],"source":" When set to **Valid**, only products that are valid at this point in time are returned (that is, they have an active status, start date &lt; now, and end date is &gt; now)."},{"content":"No","pos":[5531,5533]},{"content":"The UserIdentity object contains the following parameters.","pos":[5546,5604]},{"content":"Parameter","pos":[5608,5617]},{"content":"Type","pos":[5631,5635]},{"content":"Description","pos":[5640,5651]},{"content":"Required","pos":[5863,5871]},{"content":"identityType","pos":[6144,6156]},{"content":"string","pos":[6167,6173]},{"pos":[6176,6209],"content":"Specify the string value <bpt id=\"p1\">**</bpt>b2b<ept id=\"p1\">**</ept>.","source":"Specify the string value **b2b**."},{"content":"Yes","pos":[6399,6402]},{"content":"identityValue","pos":[6412,6425]},{"content":"string","pos":[6435,6441]},{"content":"String value of the Windows Store ID key.","pos":[6444,6485]},{"content":"Yes","pos":[6667,6670]},{"content":"localTicketReference","pos":[6680,6700]},{"content":"string","pos":[6703,6709]},{"content":"Requested identifier for the returned products.","pos":[6712,6759]},{"content":"Returned items in the response body will have a matching <bpt id=\"p1\">*</bpt>localTicketReference<ept id=\"p1\">*</ept>.","pos":[6760,6840],"source":" Returned items in the response body will have a matching *localTicketReference*."},{"content":"We recommend that you use the same value as the <bpt id=\"p1\">*</bpt>userId<ept id=\"p1\">*</ept> claim in the Windows Store ID key.","pos":[6841,6932],"source":" We recommend that you use the same value as the *userId* claim in the Windows Store ID key."},{"content":"Yes","pos":[6935,6938]},{"content":"The ProductSkuId object contains the following parameters.","pos":[6950,7008]},{"content":"Parameter","pos":[7012,7021]},{"content":"Type","pos":[7024,7028]},{"content":"Description","pos":[7033,7044]},{"content":"Required","pos":[7346,7354]},{"content":"productId","pos":[7706,7715]},{"content":"string","pos":[7718,7724]},{"content":"The product ID from the Windows Store catalog.","pos":[7727,7773]},{"content":"To obtain your product ID, navigate to your app in the Windows Dev Center dashboard, go to the <bpt id=\"p1\">**</bpt>App management<ept id=\"p1\">**</ept> <ph id=\"ph1\">&amp;gt;</ph> <bpt id=\"p2\">**</bpt>App identity<ept id=\"p2\">**</ept> page, and retrieve the suffix of the string shown in the <bpt id=\"p3\">**</bpt>URL for Windows 10<ept id=\"p3\">**</ept> field.","pos":[7774,7996],"source":" To obtain your product ID, navigate to your app in the Windows Dev Center dashboard, go to the **App management** &gt; **App identity** page, and retrieve the suffix of the string shown in the **URL for Windows 10** field."},{"content":"An example product ID is “9WZDNCRFJ3Q8”.","pos":[7997,8037]},{"content":"Yes","pos":[8040,8043]},{"content":"skuID","pos":[8053,8058]},{"content":"string","pos":[8065,8071]},{"content":"The SKU ID from the Windows Store catalog.","pos":[8074,8116]},{"content":"An example SKU ID is “0010”.","pos":[8117,8145]},{"content":"Yes","pos":[8387,8390]},{"content":"Request example","pos":[8406,8421]},{"content":"Response","pos":[9158,9166]},{"content":"Response body","pos":[9173,9186]},{"content":"Parameter","pos":[9190,9199]},{"content":"Type","pos":[9210,9214]},{"content":"Description","pos":[9237,9248]},{"content":"Required","pos":[9426,9434]},{"content":"continuationToken","pos":[9688,9705]},{"content":"string","pos":[9708,9714]},{"content":"If there are multiple sets of products, this token is returned when the page limit is reached.","pos":[9735,9829]},{"content":"You can specify this continuation token in subsequent calls to retrieve remaining products.","pos":[9830,9921]},{"content":"No","pos":[9924,9926]},{"content":"Items","pos":[9937,9942]},{"content":"CollectionItemContractV6","pos":[9957,9981]},{"content":"An array of products for the specified user.","pos":[9984,10028]},{"content":"No","pos":[10173,10175]},{"content":"The CollectionItemContractV6 object contains the following parameters.","pos":[10188,10258]},{"content":"Parameter","pos":[10262,10271]},{"content":"Type","pos":[10285,10289]},{"content":"Description","pos":[10306,10317]},{"content":"Required","pos":[10455,10463]},{"content":"acquiredDate","pos":[10674,10686]},{"content":"datetime","pos":[10697,10705]},{"content":"The date on which the user acquired the item.","pos":[10718,10763]},{"content":"Yes","pos":[10867,10870]},{"content":"campaignId","pos":[10880,10890]},{"content":"string","pos":[10903,10909]},{"content":"The campaign ID that was provided at purchase time for this item.","pos":[10924,10989]},{"content":"No","pos":[11073,11075]},{"content":"devOfferId","pos":[11086,11096]},{"content":"string","pos":[11109,11115]},{"content":"The offer ID from an in-app purchase.","pos":[11130,11167]},{"content":"No","pos":[11279,11281]},{"content":"endDate","pos":[11292,11299]},{"content":"datetime","pos":[11315,11323]},{"content":"the end date of the item.","pos":[11336,11361]},{"content":"Yes","pos":[11485,11488]},{"content":"fulfillmentData","pos":[11498,11513]},{"content":"string","pos":[11521,11527]},{"content":"N/A","pos":[11542,11545]},{"content":"No","pos":[11691,11693]},{"content":"inAppOfferToken","pos":[11704,11719]},{"content":"string","pos":[11727,11733]},{"content":"The developer-specified product ID string that is assigned to the item in the Windows Dev Center dashboard.","pos":[11748,11855]},{"content":"An example product ID is “product123”.","pos":[11856,11894]},{"content":"No","pos":[11897,11899]},{"content":"itemId","pos":[11910,11916]},{"content":"string","pos":[11933,11939]},{"content":"An ID that identifies this collection item from other items the user owns.","pos":[11954,12028]},{"content":"This ID is unique per product.","pos":[12029,12059]},{"content":"Yes","pos":[12103,12106]},{"content":"localTicketReference","pos":[12116,12136]},{"content":"string","pos":[12139,12145]},{"pos":[12160,12237],"content":"The ID of the previously supplied <ph id=\"ph1\">`localTicketReference`</ph> in the request body.","source":"The ID of the previously supplied `localTicketReference` in the request body."},{"content":"Yes","pos":[12309,12312]},{"content":"modifiedDate","pos":[12322,12334]},{"content":"datetime","pos":[12345,12353]},{"content":"The date this item was last modified.","pos":[12366,12403]},{"content":"Yes","pos":[12515,12518]},{"content":"orderId","pos":[12528,12535]},{"content":"string","pos":[12551,12557]},{"content":"If present, the order ID of which this item was obtained.","pos":[12572,12629]},{"content":"No","pos":[12721,12723]},{"content":"orderLineItemId","pos":[12734,12749]},{"content":"string","pos":[12757,12763]},{"content":"If present, the line item of the particular order for which this item was obtained.","pos":[12778,12861]},{"content":"No","pos":[12927,12929]},{"content":"ownershipType","pos":[12940,12953]},{"content":"string","pos":[12963,12969]},{"content":"The string “OwnedByBeneficiary”.","pos":[12984,13016]},{"content":"Yes","pos":[13133,13136]},{"content":"productId","pos":[13146,13155]},{"content":"string","pos":[13169,13175]},{"content":"The product ID from the Windows Store catalog.","pos":[13190,13236]},{"content":"An example product ID is “9WZDNCRFJ3Q8”.","pos":[13237,13277]},{"content":"Yes","pos":[13339,13342]},{"content":"productType","pos":[13352,13363]},{"content":"string","pos":[13375,13381]},{"pos":[13396,13490],"content":"One of the following product types: <bpt id=\"p1\">**</bpt>Application<ept id=\"p1\">**</ept>, <bpt id=\"p2\">**</bpt>Durable<ept id=\"p2\">**</ept>, and <bpt id=\"p3\">**</bpt>UnmanagedConsumable<ept id=\"p3\">**</ept>.","source":"One of the following product types: **Application**, **Durable**, and **UnmanagedConsumable**."},{"content":"Yes","pos":[13545,13548]},{"content":"purchasedCountry","pos":[13558,13574]},{"content":"string","pos":[13581,13587]},{"content":"N/A.","pos":[13602,13606]},{"content":"No","pos":[13751,13753]},{"content":"purchaser","pos":[13764,13773]},{"content":"IdentityContractV6","pos":[13787,13805]},{"content":"If present, this represents the identity of the purchaser of the item.","pos":[13808,13878]},{"content":"See the details for this object below.","pos":[13879,13917]},{"content":"No","pos":[13957,13959]},{"content":"Quantity","pos":[13970,13978]},{"content":"number","pos":[13993,13999]},{"content":"The quantity of the item.","pos":[14014,14039]},{"content":"Currently, this will always be 1.","pos":[14040,14073]},{"content":"No","pos":[14163,14165]},{"content":"skuId","pos":[14176,14181]},{"content":"string","pos":[14199,14205]},{"content":"The SKU ID from the Windows Store catalog.","pos":[14220,14262]},{"content":"An example SKU ID is “0010”.","pos":[14263,14291]},{"content":"Yes","pos":[14369,14372]},{"content":"skuType","pos":[14382,14389]},{"content":"string","pos":[14405,14411]},{"content":"Type of the SKU.","pos":[14426,14442]},{"content":"Possible values include <bpt id=\"p1\">**</bpt>Trial<ept id=\"p1\">**</ept>, <bpt id=\"p2\">**</bpt>Full<ept id=\"p2\">**</ept>, and <bpt id=\"p3\">**</bpt>Rental<ept id=\"p3\">**</ept>.","pos":[14443,14503],"source":" Possible values include **Trial**, **Full**, and **Rental**."},{"content":"Yes","pos":[14575,14578]},{"content":"startDate","pos":[14588,14597]},{"content":"datetime","pos":[14611,14619]},{"content":"The date that the item starts being valid.","pos":[14632,14674]},{"content":"Yes","pos":[14781,14784]},{"content":"Status","pos":[14794,14800]},{"content":"string","pos":[14817,14823]},{"content":"The status of the item.","pos":[14838,14861]},{"content":"Possible values include <bpt id=\"p1\">**</bpt>Active<ept id=\"p1\">**</ept>, <bpt id=\"p2\">**</bpt>Expired<ept id=\"p2\">**</ept>, <bpt id=\"p3\">**</bpt>Revoked<ept id=\"p3\">**</ept>, and <bpt id=\"p4\">**</bpt>Banned<ept id=\"p4\">**</ept>.","pos":[14862,14939],"source":" Possible values include **Active**, **Expired**, **Revoked**, and **Banned**."},{"content":"Yes","pos":[14987,14990]},{"content":"Tags","pos":[15000,15004]},{"content":"string","pos":[15023,15029]},{"content":"N/A","pos":[15044,15047]},{"content":"Yes","pos":[15193,15196]},{"content":"transactionId","pos":[15206,15219]},{"content":"guid","pos":[15229,15233]},{"content":"The transaction ID as a result of the purchase of this item.","pos":[15250,15310]},{"content":"Can be used for reporting an item as fulfilled.","pos":[15311,15358]},{"content":"Yes","pos":[15399,15402]},{"content":"The IdentityContractV6 object contains the following parameters.","pos":[15414,15478]},{"content":"Parameter","pos":[15482,15491]},{"content":"Type","pos":[15498,15502]},{"content":"Description","pos":[15507,15518]},{"content":"Required","pos":[15592,15600]},{"content":"identityType","pos":[15728,15740]},{"content":"string","pos":[15744,15750]},{"pos":[15753,15782],"content":"Contains the value <bpt id=\"p1\">**</bpt>\"pub\"<ept id=\"p1\">**</ept>.","source":"Contains the value **\"pub\"**."},{"content":"Yes","pos":[15838,15841]},{"content":"identityValue","pos":[15851,15864]},{"content":"string","pos":[15867,15873]},{"pos":[15876,15958],"content":"The string value of the <bpt id=\"p1\">*</bpt>publisherUserId<ept id=\"p1\">*</ept> from the specified Windows Store ID key.","source":"The string value of the *publisherUserId* from the specified Windows Store ID key."},{"content":"Yes","pos":[15961,15964]},{"content":"Response example","pos":[15980,15996]},{"content":"Related topics","pos":[17365,17379]},{"content":"View and grant products from a service","pos":[17384,17422]},{"content":"Report consumable products as fulfilled","pos":[17470,17509]},{"content":"Grant free products","pos":[17558,17577]},{"content":"Renew a Windows Store ID key","pos":[17606,17634]}],"content":"---\nms.assetid: D1F233EC-24B5-4F84-A92F-2030753E608E\ndescription: Use this method in the Windows Store collection API to get all the products that a customer owns for apps that are associated with your Azure AD client ID. You can scope your query to a particular product, or use other filters.\ntitle: Query for products\n---\n\n# Query for products\n\n\n\\[ Updated for UWP apps on Windows 10. For Windows 8.x articles, see the [archive](http://go.microsoft.com/fwlink/p/?linkid=619132) \\]\n\nUse this method in the Windows Store collection API to get all the products that a customer owns for apps that are associated with your Azure AD client ID. You can scope your query to a particular product, or use other filters.\n\nThis method is designed to be called by your service in response to a message from your app. Your service should not regularly poll for all users on a schedule.\n\n## Prerequisites\n\n\nTo use this method, you will need:\n\n-   An Azure AD access token that was created with the **https://onestore.microsoft.com** audience URI.\n-   A Windows Store ID key that was generated by calling the [**GetCustomerCollectionsIdAsync**](https://msdn.microsoft.com/library/windows/apps/mt608674) method from client-side code in your app.\n\nFor more information, see [View and grant products from a service](view-and-grant-products-from-a-service.md).\n\n## Request\n\n### Request syntax\n\n| Method | Request URI                                                 |\n|--------|-------------------------------------------------------------|\n| POST   | https://collections.mp.microsoft.com/v6.0/collections/query |\n\n \n### Request header\n\n| Header         | Type   | Description                                                                                           |\n|----------------|--------|-------------------------------------------------------------------------------------------------------|\n| Authorization  | string | Required. The Azure AD access token in the form **Bearer** &lt;*token*&gt;.                           |\n| Host           | string | Must be set to the value **collections.mp.microsoft.com**.                                            |\n| Content-Length | number | The length of the request body.                                                                       |\n| Content-Type   | string | Specifies the request and response type. Currently, the only supported value is **application/json**. |\n\n \n\n### Request body\n\n| Parameter         | Type         | Description                                                                                                                                                                                                                                                          | Required |\n|-------------------|--------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------|\n| beneficiaries     | UserIdentity | A UserIdentity object that represents the user being queried for products.                                                                                                                                                                                           | Yes      |\n| continuationToken | string       | If there are multiple sets of products, the response body returns a continuation token when the page limit is reached. Provide that continuation token here in subsequent calls to retrieve remaining products.                                                      | No       |\n| maxPageSize       | number       | The maximum number of products to return in one response. The default and maximum value is 100.                                                                                                                                                                      | No       |\n| modifiedAfter     | datetime     | If specified, the service only returns products that have been modified after this date.                                                                                                                                                                             | No       |\n| parentProductId   | string       | If specified, the service only returns IAPs that correspond to the specified app.                                                                                                                                                                                    | No       |\n| productSkuIds     | ProductSkuId | If specified, the service only returns products applicable to the provided Product/SKU pairs.                                                                                                                                                                        | No       |\n| productTypes      | string       | If specified, the service only returns products that match the specified product types. Supported product types are **Application**, **Durable**, and **UnmanagedConsumable**.                                                                                       | No       |\n| validityType      | string       | When set to **All**, all products for a user will be returned, including expired items. When set to **Valid**, only products that are valid at this point in time are returned (that is, they have an active status, start date &lt; now, and end date is &gt; now). | No       |\n\n \n\nThe UserIdentity object contains the following parameters.\n\n| Parameter            | Type   | Description                                                                                                                                                                                                                  | Required |\n|----------------------|--------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------|\n| identityType         | string | Specify the string value **b2b**.                                                                                                                                                                                            | Yes      |\n| identityValue        | string | String value of the Windows Store ID key.                                                                                                                                                                                    | Yes      |\n| localTicketReference | string | Requested identifier for the returned products. Returned items in the response body will have a matching *localTicketReference*. We recommend that you use the same value as the *userId* claim in the Windows Store ID key. | Yes      |\n\n \n\nThe ProductSkuId object contains the following parameters.\n\n| Parameter | Type   | Description                                                                                                                                                                                                                                                                                                            | Required |\n|-----------|--------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------|\n| productId | string | The product ID from the Windows Store catalog. To obtain your product ID, navigate to your app in the Windows Dev Center dashboard, go to the **App management** &gt; **App identity** page, and retrieve the suffix of the string shown in the **URL for Windows 10** field. An example product ID is “9WZDNCRFJ3Q8”. | Yes      |\n| skuID     | string | The SKU ID from the Windows Store catalog. An example SKU ID is “0010”.                                                                                                                                                                                                                                                | Yes      |\n\n \n\n### Request example\n\n```\nPOST https://collections.mp.microsoft.com/v6.0/collections/query HTTP/1.1\nAuthorization: Bearer eyJ0eXAiOiJKV1Q…….\nHost: collections.mp.microsoft.com\nContent-Length: 2531\nContent-Type: application/json\n\n{\n    \"maxPageSize\": 100,\n    \"beneficiaries\": [\n            {\n                \"localTicketReference\": \"1055521810674918\",\n                \"identityValue\": \"eyJ0eXAiOiJ……\",\n                \"identityType\": \"b2b\"\n            }\n        ],\n    \"modifiedAfter\": \"\\/Date(-62135568000000)\\/\",\n    \"productSkuIds\": [\n            {\n                \"productId\": \"9NBLGGH5WVP6\",\n                \"skuId\": \"0010\"\n            }\n        ],\n    \"productTypes\": [\n            \"UnmanagedConsumable\"\n        ],\n    \"validityType\": \"All\"\n}\n```\n\n## Response\n\n\n### Response body\n\n| Parameter         | Type                     | Description                                                                                                                                                                                | Required |\n|-------------------|--------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------|\n| continuationToken | string                   | If there are multiple sets of products, this token is returned when the page limit is reached. You can specify this continuation token in subsequent calls to retrieve remaining products. | No       |\n| Items             | CollectionItemContractV6 | An array of products for the specified user.                                                                                                                                               | No       |\n\n \n\nThe CollectionItemContractV6 object contains the following parameters.\n\n| Parameter            | Type               | Description                                                                                                                                        | Required |\n|----------------------|--------------------|----------------------------------------------------------------------------------------------------------------------------------------------------|----------|\n| acquiredDate         | datetime           | The date on which the user acquired the item.                                                                                                      | Yes      |\n| campaignId           | string             | The campaign ID that was provided at purchase time for this item.                                                                                  | No       |\n| devOfferId           | string             | The offer ID from an in-app purchase.                                                                                                              | No       |\n| endDate              | datetime           | the end date of the item.                                                                                                                          | Yes      |\n| fulfillmentData      | string             | N/A                                                                                                                                                | No       |\n| inAppOfferToken      | string             | The developer-specified product ID string that is assigned to the item in the Windows Dev Center dashboard. An example product ID is “product123”. | No       |\n| itemId               | string             | An ID that identifies this collection item from other items the user owns. This ID is unique per product.                                          | Yes      |\n| localTicketReference | string             | The ID of the previously supplied `localTicketReference` in the request body.                                                                      | Yes      |\n| modifiedDate         | datetime           | The date this item was last modified.                                                                                                              | Yes      |\n| orderId              | string             | If present, the order ID of which this item was obtained.                                                                                          | No       |\n| orderLineItemId      | string             | If present, the line item of the particular order for which this item was obtained.                                                                | No       |\n| ownershipType        | string             | The string “OwnedByBeneficiary”.                                                                                                                   | Yes      |\n| productId            | string             | The product ID from the Windows Store catalog. An example product ID is “9WZDNCRFJ3Q8”.                                                            | Yes      |\n| productType          | string             | One of the following product types: **Application**, **Durable**, and **UnmanagedConsumable**.                                                     | Yes      |\n| purchasedCountry     | string             | N/A.                                                                                                                                               | No       |\n| purchaser            | IdentityContractV6 | If present, this represents the identity of the purchaser of the item. See the details for this object below.                                      | No       |\n| Quantity             | number             | The quantity of the item. Currently, this will always be 1.                                                                                        | No       |\n| skuId                | string             | The SKU ID from the Windows Store catalog. An example SKU ID is “0010”.                                                                            | Yes      |\n| skuType              | string             | Type of the SKU. Possible values include **Trial**, **Full**, and **Rental**.                                                                      | Yes      |\n| startDate            | datetime           | The date that the item starts being valid.                                                                                                         | Yes      |\n| Status               | string             | The status of the item. Possible values include **Active**, **Expired**, **Revoked**, and **Banned**.                                              | Yes      |\n| Tags                 | string             | N/A                                                                                                                                                | Yes      |\n| transactionId        | guid               | The transaction ID as a result of the purchase of this item. Can be used for reporting an item as fulfilled.                                       | Yes      |\n\n \n\nThe IdentityContractV6 object contains the following parameters.\n\n| Parameter     | Type   | Description                                                                        | Required |\n|---------------|--------|------------------------------------------------------------------------------------|----------|\n| identityType  | string | Contains the value **\"pub\"**.                                                      | Yes      |\n| identityValue | string | The string value of the *publisherUserId* from the specified Windows Store ID key. | Yes      |\n\n \n\n### Response example\n\n```\nHTTP/1.1 200 OK\nContent-Length: 7241\nContent-Type: application/json\nMS-CorrelationId: 699681ce-662c-4841-920a-f2269b2b4e6c\nMS-RequestId: a9988cf9-652b-4791-beba-b0e732121a12\nMS-CV: xu2HW6SrSkyfHyFh.0.1\nMS-ServerId: 020022359\nDate: Tue, 22 Sep 2015 20:28:18 GMT\n\n{\n    \"items\" : [\n        {\n            \"acquiredDate\" : \"2015-09-22T19:22:51.2068724+00:00\",\n            \"devOfferId\" : \"f9587c53-540a-498b-a281-8a349491ed47\",\n            \"endDate\" : \"9999-12-31T23:59:59.9999999+00:00\",\n            \"fulfillmentData\" : [],\n            \"inAppOfferToken\" : \"consumable2\",\n            \"itemId\" : \"4b8fbb13127a41f299270ea668681c1d\",\n            \"localTicketReference\" : \"1055521810674918\",\n            \"modifiedDate\" : \"2015-09-22T19:22:51.2513155+00:00\",\n            \"orderId\" : \"4ba5960d-4ec6-4a81-ac20-aafce02ddf31\",\n            \"ownershipType\" : \"OwnedByBeneficiary\",\n            \"productId\" : \"9NBLGGH5WVP6\",\n            \"productType\" : \"UnmanagedConsumable\",\n            \"purchaser\" : {\n                \"identityType\" : \"pub\",\n                \"identityValue\" : \"user123\"\n            },\n            \"skuId\" : \"0010\",\n            \"skuType\" : \"Full\",\n            \"startDate\" : \"2015-09-22T19:22:51.2068724+00:00\",\n            \"status\" : \"Active\",\n            \"tags\" : [],\n            \"transactionId\" : \"4ba5960d-4ec6-4a81-ac20-aafce02ddf31\"\n        }\n    ]\n}\n```\n\n## Related topics\n\n* [View and grant products from a service](view-and-grant-products-from-a-service.md)\n* [Report consumable products as fulfilled](report-consumable-products-as-fulfilled.md)\n* [Grant free products](grant-free-products.md)\n* [Renew a Windows Store ID key](renew-a-windows-store-id-key.md)\n"}